"use strict";const ze=require("electron"),Et=require("events"),Le=require("crypto"),ud=require("tty"),Xi=require("util"),Ki=require("os"),Ge=require("fs"),me=require("stream"),Ve=require("url"),dd=require("string_decoder"),hd=require("constants"),Fl=require("assert"),se=require("path"),Qi=require("child_process"),Aa=require("zlib"),Ll=require("http"),oa=require("node:path"),fd=require("https"),Ji=require("net"),Ul=require("dns"),Ml=require("punycode"),jl=require("tls");var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function md(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var br={},Tr={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.CancellationError=Ft.CancellationToken=void 0;const gd=Et;class vd extends gd.EventEmitter{constructor(e){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,e!=null&&(this.parent=e)}get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(e){this.removeParentCancelHandler(),this._parent=e,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(e){this.cancelled?e():this.once("cancel",e)}createPromise(e){if(this.cancelled)return Promise.reject(new la);const i=()=>{if(n!=null)try{this.removeListener("cancel",n),n=null}catch{}};let n=null;return new Promise((r,a)=>{let s=null;if(n=()=>{try{s!=null&&(s(),s=null)}finally{a(new la)}},this.cancelled){n();return}this.onCancel(n),e(r,a,o=>{s=o})}).then(r=>(i(),r)).catch(r=>{throw i(),r})}removeParentCancelHandler(){const e=this._parent;e!=null&&this.parentCancelHandler!=null&&(e.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}Ft.CancellationToken=vd;class la extends Error{constructor(){super("cancelled")}}Ft.CancellationError=la;var ne={},ca={exports:{}},xn={exports:{}},Ar,ys;function xd(){if(ys)return Ar;ys=1;var t=1e3,e=t*60,i=e*60,n=i*24,r=n*7,a=n*365.25;Ar=function(u,p){p=p||{};var c=typeof u;if(c==="string"&&u.length>0)return s(u);if(c==="number"&&isFinite(u))return p.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var c=parseFloat(p[1]),h=(p[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*r;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function o(u){var p=Math.abs(u);return p>=n?Math.round(u/n)+"d":p>=i?Math.round(u/i)+"h":p>=e?Math.round(u/e)+"m":p>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var p=Math.abs(u);return p>=n?d(u,p,n,"day"):p>=i?d(u,p,i,"hour"):p>=e?d(u,p,e,"minute"):p>=t?d(u,p,t,"second"):u+" ms"}function d(u,p,c,h){var _=p>=c*1.5;return Math.round(u/c)+" "+h+(_?"s":"")}return Ar}var Sr,Es;function Hl(){if(Es)return Sr;Es=1;function t(e){n.debug=n,n.default=n,n.coerce=d,n.disable=s,n.enable=a,n.enabled=o,n.humanize=xd(),n.destroy=u,Object.keys(e).forEach(p=>{n[p]=e[p]}),n.names=[],n.skips=[],n.formatters={};function i(p){let c=0;for(let h=0;h<p.length;h++)c=(c<<5)-c+p.charCodeAt(h),c|=0;return n.colors[Math.abs(c)%n.colors.length]}n.selectColor=i;function n(p){let c,h=null,_,A;function w(...E){if(!w.enabled)return;const f=w,T=Number(new Date),y=T-(c||T);f.diff=y,f.prev=c,f.curr=T,c=T,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let I=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(b,N)=>{if(b==="%%")return"%";I++;const g=n.formatters[N];if(typeof g=="function"){const F=E[I];b=g.call(f,F),E.splice(I,1),I--}return b}),n.formatArgs.call(f,E),(f.log||n.log).apply(f,E)}return w.namespace=p,w.useColors=n.useColors(),w.color=n.selectColor(p),w.extend=r,w.destroy=n.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(_!==n.namespaces&&(_=n.namespaces,A=n.enabled(p)),A),set:E=>{h=E}}),typeof n.init=="function"&&n.init(w),w}function r(p,c){const h=n(this.namespace+(typeof c>"u"?":":c)+p);return h.log=this.log,h}function a(p){n.save(p),n.namespaces=p,n.names=[],n.skips=[];let c;const h=(typeof p=="string"?p:"").split(/[\s,]+/),_=h.length;for(c=0;c<_;c++)h[c]&&(p=h[c].replace(/\*/g,".*?"),p[0]==="-"?n.skips.push(new RegExp("^"+p.slice(1)+"$")):n.names.push(new RegExp("^"+p+"$")))}function s(){const p=[...n.names.map(l),...n.skips.map(l).map(c=>"-"+c)].join(",");return n.enable(""),p}function o(p){if(p[p.length-1]==="*")return!0;let c,h;for(c=0,h=n.skips.length;c<h;c++)if(n.skips[c].test(p))return!1;for(c=0,h=n.names.length;c<h;c++)if(n.names[c].test(p))return!0;return!1}function l(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function d(p){return p instanceof Error?p.stack||p.message:p}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Sr=t,Sr}var _s;function wd(){return _s||(_s=1,function(t,e){e.formatArgs=n,e.save=r,e.load=a,e.useColors=i,e.storage=s(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;l.splice(1,0,d,"color: inherit");let u=0,p=0;l[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(u++,c==="%c"&&(p=u))}),l.splice(p,0,d)}e.log=console.debug||console.log||(()=>{});function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function a(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function s(){try{return localStorage}catch{}}t.exports=Hl()(e);const{formatters:o}=t.exports;o.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}(xn,xn.exports)),xn.exports}var wn={exports:{}},Cr,bs;function yd(){return bs||(bs=1,Cr=(t,e)=>{e=e||process.argv;const i=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(i+t),r=e.indexOf("--");return n!==-1&&(r===-1?!0:n<r)}),Cr}var Ir,Ts;function Ed(){if(Ts)return Ir;Ts=1;const t=Ki,e=yd(),i=process.env;let n;e("no-color")||e("no-colors")||e("color=false")?n=!1:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(n=!0),"FORCE_COLOR"in i&&(n=i.FORCE_COLOR.length===0||parseInt(i.FORCE_COLOR,10)!==0);function r(o){return o===0?!1:{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}function a(o){if(n===!1)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(o&&!o.isTTY&&n!==!0)return 0;const l=n?1:0;if(process.platform==="win32"){const d=t.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(d[0])>=10&&Number(d[2])>=10586?Number(d[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(d=>d in i)||i.CI_NAME==="codeship"?1:l;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if(i.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in i){const d=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return d>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:(i.TERM==="dumb",l)}function s(o){const l=a(o);return r(l)}return Ir={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)},Ir}var As;function _d(){return As||(As=1,function(t,e){const i=ud,n=Xi;e.init=u,e.log=o,e.formatArgs=a,e.save=l,e.load=d,e.useColors=r,e.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const c=Ed();c&&(c.stderr||c).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(c=>/^debug_/i.test(c)).reduce((c,h)=>{const _=h.substring(6).toLowerCase().replace(/_([a-z])/g,(w,E)=>E.toUpperCase());let A=process.env[h];return/^(yes|on|true|enabled)$/i.test(A)?A=!0:/^(no|off|false|disabled)$/i.test(A)?A=!1:A==="null"?A=null:A=Number(A),c[_]=A,c},{});function r(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:i.isatty(process.stderr.fd)}function a(c){const{namespace:h,useColors:_}=this;if(_){const A=this.color,w="\x1B[3"+(A<8?A:"8;5;"+A),E=`  ${w};1m${h} \x1B[0m`;c[0]=E+c[0].split(`
`).join(`
`+E),c.push(w+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else c[0]=s()+h+" "+c[0]}function s(){return e.inspectOpts.hideDate?"":new Date().toISOString()+" "}function o(...c){return process.stderr.write(n.format(...c)+`
`)}function l(c){c?process.env.DEBUG=c:delete process.env.DEBUG}function d(){return process.env.DEBUG}function u(c){c.inspectOpts={};const h=Object.keys(e.inspectOpts);for(let _=0;_<h.length;_++)c.inspectOpts[h[_]]=e.inspectOpts[h[_]]}t.exports=Hl()(e);const{formatters:p}=t.exports;p.o=function(c){return this.inspectOpts.colors=this.useColors,n.inspect(c,this.inspectOpts).split(`
`).map(h=>h.trim()).join(" ")},p.O=function(c){return this.inspectOpts.colors=this.useColors,n.inspect(c,this.inspectOpts)}}(wn,wn.exports)),wn.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?ca.exports=wd():ca.exports=_d();var bd=ca.exports,Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ProgressCallbackTransform=void 0;const Td=me;class Ad extends Td.Transform{constructor(e,i,n){super(),this.total=e,this.cancellationToken=i,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(e,i,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=e.length,this.delta+=e.length;const r=Date.now();r>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=r+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((r-this.start)/1e3))}),this.delta=0),n(null,e)}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,e(null)}}Zi.ProgressCallbackTransform=Ad;var Ss;function Sd(){if(Ss)return ne;Ss=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.safeStringifyJson=ne.configureRequestOptions=ne.safeGetHeader=ne.DigestTransform=ne.configureRequestUrl=ne.configureRequestOptionsFromUrl=ne.HttpExecutor=ne.parseJson=ne.HttpError=ne.createHttpError=void 0;const t=Le,e=bd,i=Ge,n=me,r=Ve,a=Ft,s=pe(),o=Zi,l=e.default("electron-builder");function d(O,b=null){return new p(O.statusCode||-1,`${O.statusCode} ${O.statusMessage}`+(b==null?"":`
`+JSON.stringify(b,null,"  "))+`
Headers: `+I(O.headers),b)}ne.createHttpError=d;const u=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class p extends Error{constructor(b,N=`HTTP error: ${u.get(b)||b}`,g=null){super(N),this.statusCode=b,this.description=g,this.name="HttpError",this.code=`HTTP_ERROR_${b}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}ne.HttpError=p;function c(O){return O.then(b=>b==null||b.length===0?null:JSON.parse(b))}ne.parseJson=c;class h{constructor(){this.maxRedirects=10}request(b,N=new a.CancellationToken,g){y(b);const F=g==null?void 0:JSON.stringify(g),B=F?Buffer.from(F):void 0;if(B!=null){l(F);const{headers:U,...P}=b;b={method:"post",headers:{"Content-Type":"application/json","Content-Length":B.length,...U},...P}}return this.doApiRequest(b,N,U=>U.end(B))}doApiRequest(b,N,g,F=0){return l.enabled&&l(`Request: ${I(b)}`),N.createPromise((B,U,P)=>{const R=this.createRequest(b,L=>{try{this.handleResponse(L,b,N,B,U,F,g)}catch(H){U(H)}});this.addErrorAndTimeoutHandlers(R,U,b.timeout),this.addRedirectHandlers(R,b,U,F,L=>{this.doApiRequest(L,N,g,F).then(B).catch(U)}),g(R,U),P(()=>R.abort())})}addRedirectHandlers(b,N,g,F,B){}addErrorAndTimeoutHandlers(b,N,g=60*1e3){this.addTimeOutHandler(b,N,g),b.on("error",N),b.on("aborted",()=>{N(new Error("Request has been aborted by the server"))})}handleResponse(b,N,g,F,B,U,P){var R;if(l.enabled&&l(`Response: ${b.statusCode} ${b.statusMessage}, request options: ${I(N)}`),b.statusCode===404){B(d(b,`method: ${N.method||"GET"} url: ${N.protocol||"https:"}//${N.hostname}${N.port?`:${N.port}`:""}${N.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(b.statusCode===204){F();return}const L=(R=b.statusCode)!==null&&R!==void 0?R:0,H=L>=300&&L<400,$=f(b,"location");if(H&&$!=null){if(U>this.maxRedirects){B(this.createMaxRedirectError());return}this.doApiRequest(h.prepareRedirectUrlOptions($,N),g,P,U).then(F).catch(B);return}b.setEncoding("utf8");let M="";b.on("error",B),b.on("data",j=>M+=j),b.on("end",()=>{try{if(b.statusCode!=null&&b.statusCode>=400){const j=f(b,"content-type"),W=j!=null&&(Array.isArray(j)?j.find(G=>G.includes("json"))!=null:j.includes("json"));B(d(b,`method: ${N.method||"GET"} url: ${N.protocol||"https:"}//${N.hostname}${N.port?`:${N.port}`:""}${N.path}

          Data:
          ${W?JSON.stringify(JSON.parse(M)):M}
          `))}else F(M.length===0?null:M)}catch(j){B(j)}})}async downloadToBuffer(b,N){return await N.cancellationToken.createPromise((g,F,B)=>{let U=null;const P={headers:N.headers||void 0,redirect:"manual"};A(b,P),y(P),this.doDownload(P,{destination:null,options:N,onCancel:B,callback:R=>{R==null?g(U):F(R)},responseHandler:(R,L)=>{const H=f(R,"content-length");let $=-1;if(H!=null){const M=parseInt(H,10);if(M>0){if(M>524288e3){L(new Error("Maximum allowed size is 500 MB"));return}U=Buffer.alloc(M),$=0}}R.on("data",M=>{if($!==-1)M.copy(U,$),$+=M.length;else if(U==null)U=M;else{if(U.length>524288e3){L(new Error("Maximum allowed size is 500 MB"));return}U=Buffer.concat([U,M])}}),R.on("end",()=>{U!=null&&$!==-1&&$!==U.length?L(new Error(`Received data length ${$} is not equal to expected ${U.length}`)):L(null)})}},0)})}doDownload(b,N,g){const F=this.createRequest(b,B=>{if(B.statusCode>=400){N.callback(new Error(`Cannot download "${b.protocol||"https:"}//${b.hostname}${b.path}", status ${B.statusCode}: ${B.statusMessage}`));return}B.on("error",N.callback);const U=f(B,"location");if(U!=null){g<this.maxRedirects?this.doDownload(h.prepareRedirectUrlOptions(U,b),N,g++):N.callback(this.createMaxRedirectError());return}N.responseHandler==null?T(N,B):N.responseHandler(B,N.callback)});this.addErrorAndTimeoutHandlers(F,N.callback,b.timeout),this.addRedirectHandlers(F,b,N.callback,g,B=>{this.doDownload(B,N,g++)}),F.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(b,N,g){b.on("socket",F=>{F.setTimeout(g,()=>{b.abort(),N(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(b,N){const g=_(b,{...N}),F=g.headers;if(F!=null&&F.authorization){const B=new r.URL(b);(B.hostname.endsWith(".amazonaws.com")||B.searchParams.has("X-Amz-Credential"))&&delete F.authorization}return g}static retryOnServerError(b,N=3){for(let g=0;;g++)try{return b()}catch(F){if(g<N&&(F instanceof p&&F.isServerError()||F.code==="EPIPE"))continue;throw F}}}ne.HttpExecutor=h;function _(O,b){const N=y(b);return A(new r.URL(O),N),N}ne.configureRequestOptionsFromUrl=_;function A(O,b){b.protocol=O.protocol,b.hostname=O.hostname,O.port?b.port=O.port:b.port&&delete b.port,b.path=O.pathname+O.search}ne.configureRequestUrl=A;class w extends n.Transform{constructor(b,N="sha512",g="base64"){super(),this.expected=b,this.algorithm=N,this.encoding=g,this._actual=null,this.isValidateOnEnd=!0,this.digester=t.createHash(N)}get actual(){return this._actual}_transform(b,N,g){this.digester.update(b),g(null,b)}_flush(b){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(N){b(N);return}b(null)}validate(){if(this._actual==null)throw s.newError("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw s.newError(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}ne.DigestTransform=w;function E(O,b,N){return O!=null&&b!=null&&O!==b?(N(new Error(`checksum mismatch: expected ${b} but got ${O} (X-Checksum-Sha2 header)`)),!1):!0}function f(O,b){const N=O.headers[b];return N==null?null:Array.isArray(N)?N.length===0?null:N[N.length-1]:N}ne.safeGetHeader=f;function T(O,b){if(!E(f(b,"X-Checksum-Sha2"),O.options.sha2,O.callback))return;const N=[];if(O.options.onProgress!=null){const U=f(b,"content-length");U!=null&&N.push(new o.ProgressCallbackTransform(parseInt(U,10),O.options.cancellationToken,O.options.onProgress))}const g=O.options.sha512;g!=null?N.push(new w(g,"sha512",g.length===128&&!g.includes("+")&&!g.includes("Z")&&!g.includes("=")?"hex":"base64")):O.options.sha2!=null&&N.push(new w(O.options.sha2,"sha256","hex"));const F=i.createWriteStream(O.destination);N.push(F);let B=b;for(const U of N)U.on("error",P=>{F.close(),O.options.cancellationToken.cancelled||O.callback(P)}),B=B.pipe(U);F.on("finish",()=>{F.close(O.callback)})}function y(O,b,N){N!=null&&(O.method=N),O.headers={...O.headers};const g=O.headers;return b!=null&&(g.authorization=b.startsWith("Basic")||b.startsWith("Bearer")?b:`token ${b}`),g["User-Agent"]==null&&(g["User-Agent"]="electron-builder"),(N==null||N==="GET"||g["Cache-Control"]==null)&&(g["Cache-Control"]="no-cache"),O.protocol==null&&process.versions.electron!=null&&(O.protocol="https:"),O}ne.configureRequestOptions=y;function I(O,b){return JSON.stringify(O,(N,g)=>N.endsWith("Authorization")||N.endsWith("authorization")||N.endsWith("Password")||N.endsWith("PASSWORD")||N.endsWith("Token")||N.includes("password")||N.includes("token")||b!=null&&b.has(N)?"<stripped sensitive data>":g,2)}return ne.safeStringifyJson=I,ne}var ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.getS3LikeProviderBaseUrl=ai.githubUrl=void 0;function Cd(t,e="github.com"){return`${t.protocol||"https"}://${t.host||e}`}ai.githubUrl=Cd;function Id(t){const e=t.provider;if(e==="s3")return Nd(t);if(e==="spaces")return Od(t);throw new Error(`Not supported provider: ${e}`)}ai.getS3LikeProviderBaseUrl=Id;function Nd(t){let e;if(t.endpoint!=null)e=`${t.endpoint}/${t.bucket}`;else if(t.bucket.includes(".")){if(t.region==null)throw new Error(`Bucket name "${t.bucket}" includes a dot, but S3 region is missing`);t.region==="us-east-1"?e=`https://s3.amazonaws.com/${t.bucket}`:e=`https://s3-${t.region}.amazonaws.com/${t.bucket}`}else t.region==="cn-north-1"?e=`https://${t.bucket}.s3.${t.region}.amazonaws.com.cn`:e=`https://${t.bucket}.s3.amazonaws.com`;return Bl(e,t.path)}function Bl(t,e){return e!=null&&e.length>0&&(e.startsWith("/")||(t+="/"),t+=e),t}function Od(t){if(t.name==null)throw new Error("name is missing");if(t.region==null)throw new Error("region is missing");return Bl(`https://${t.name}.${t.region}.digitaloceanspaces.com`,t.path)}var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.parseDn=void 0;function Rd(t){let e=!1,i=null,n="",r=0;t=t.trim();const a=new Map;for(let s=0;s<=t.length;s++){if(s===t.length){i!==null&&a.set(i,n);break}const o=t[s];if(e){if(o==='"'){e=!1;continue}}else{if(o==='"'){e=!0;continue}if(o==="\\"){s++;const l=parseInt(t.slice(s,s+2),16);Number.isNaN(l)?n+=t[s]:(s++,n+=String.fromCharCode(l));continue}if(i===null&&o==="="){i=n,n="";continue}if(o===","||o===";"||o==="+"){i!==null&&a.set(i,n),i=null,n="";continue}}if(o===" "&&!e){if(n.length===0)continue;if(s>r){let l=s;for(;t[l]===" ";)l++;r=l}if(r>=t.length||t[r]===","||t[r]===";"||i===null&&t[r]==="="||i!==null&&t[r]==="+"){s=r-1;continue}}n+=o}return a}Gn.parseDn=Rd;var Ct={},Cs;function $d(){if(Cs)return Ct;Cs=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.nil=Ct.UUID=void 0;const t=Le,e=pe(),i="options.name must be either a string or a Buffer",n=t.randomBytes(16);n[0]=n[0]|1;const r={},a=[];for(let p=0;p<256;p++){const c=(p+256).toString(16).substr(1);r[c]=p,a[p]=c}class s{constructor(c){this.ascii=null,this.binary=null;const h=s.check(c);if(!h)throw new Error("not a UUID");this.version=h.version,h.format==="ascii"?this.ascii=c:this.binary=c}static v5(c,h){return d(c,"sha1",80,h)}toString(){return this.ascii==null&&(this.ascii=u(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(c,h=0){if(typeof c=="string")return c=c.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(c)?c==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(r[c[14]+c[15]]&240)>>4,variant:o((r[c[19]+c[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(c)){if(c.length<h+16)return!1;let _=0;for(;_<16&&c[h+_]===0;_++);return _===16?{version:void 0,variant:"nil",format:"binary"}:{version:(c[h+6]&240)>>4,variant:o((c[h+8]&224)>>5),format:"binary"}}throw e.newError("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(c){const h=Buffer.allocUnsafe(16);let _=0;for(let A=0;A<16;A++)h[A]=r[c[_++]+c[_++]],(A===3||A===5||A===7||A===9)&&(_+=1);return h}}Ct.UUID=s,s.OID=s.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function o(p){switch(p){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var l;(function(p){p[p.ASCII=0]="ASCII",p[p.BINARY=1]="BINARY",p[p.OBJECT=2]="OBJECT"})(l||(l={}));function d(p,c,h,_,A=l.ASCII){const w=t.createHash(c);if(typeof p!="string"&&!Buffer.isBuffer(p))throw e.newError(i,"ERR_INVALID_UUID_NAME");w.update(_),w.update(p);const f=w.digest();let T;switch(A){case l.BINARY:f[6]=f[6]&15|h,f[8]=f[8]&63|128,T=f;break;case l.OBJECT:f[6]=f[6]&15|h,f[8]=f[8]&63|128,T=new s(f);break;default:T=a[f[0]]+a[f[1]]+a[f[2]]+a[f[3]]+"-"+a[f[4]]+a[f[5]]+"-"+a[f[6]&15|h]+a[f[7]]+"-"+a[f[8]&63|128]+a[f[9]]+"-"+a[f[10]]+a[f[11]]+a[f[12]]+a[f[13]]+a[f[14]]+a[f[15]];break}return T}function u(p){return a[p[0]]+a[p[1]]+a[p[2]]+a[p[3]]+"-"+a[p[4]]+a[p[5]]+"-"+a[p[6]]+a[p[7]]+"-"+a[p[8]]+a[p[9]]+"-"+a[p[10]]+a[p[11]]+a[p[12]]+a[p[13]]+a[p[14]]+a[p[15]]}return Ct.nil=new s("00000000-0000-0000-0000-000000000000"),Ct}var It={},ql={};(function(t){(function(e){e.parser=function(v,m){return new n(v,m)},e.SAXParser=n,e.SAXStream=u,e.createStream=d,e.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(v,m){if(!(this instanceof n))return new n(v,m);var D=this;a(D),D.q=D.c="",D.bufferCheckPosition=e.MAX_BUFFER_LENGTH,D.opt=m||{},D.opt.lowercase=D.opt.lowercase||D.opt.lowercasetags,D.looseCase=D.opt.lowercase?"toLowerCase":"toUpperCase",D.tags=[],D.closed=D.closedRoot=D.sawRoot=!1,D.tag=D.error=null,D.strict=!!v,D.noscript=!!(v||D.opt.noscript),D.state=g.BEGIN,D.strictEntities=D.opt.strictEntities,D.ENTITIES=D.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),D.attribList=[],D.opt.xmlns&&(D.ns=Object.create(A)),D.trackPosition=D.opt.position!==!1,D.trackPosition&&(D.position=D.line=D.column=0),B(D,"onready")}Object.create||(Object.create=function(v){function m(){}m.prototype=v;var D=new m;return D}),Object.keys||(Object.keys=function(v){var m=[];for(var D in v)v.hasOwnProperty(D)&&m.push(D);return m});function r(v){for(var m=Math.max(e.MAX_BUFFER_LENGTH,10),D=0,C=0,X=i.length;C<X;C++){var te=v[i[C]].length;if(te>m)switch(i[C]){case"textNode":P(v);break;case"cdata":U(v,"oncdata",v.cdata),v.cdata="";break;case"script":U(v,"onscript",v.script),v.script="";break;default:L(v,"Max buffer length exceeded: "+i[C])}D=Math.max(D,te)}var oe=e.MAX_BUFFER_LENGTH-D;v.bufferCheckPosition=oe+v.position}function a(v){for(var m=0,D=i.length;m<D;m++)v[i[m]]=""}function s(v){P(v),v.cdata!==""&&(U(v,"oncdata",v.cdata),v.cdata=""),v.script!==""&&(U(v,"onscript",v.script),v.script="")}n.prototype={end:function(){H(this)},write:fi,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch{o=function(){}}var l=e.EVENTS.filter(function(v){return v!=="error"&&v!=="end"});function d(v,m){return new u(v,m)}function u(v,m){if(!(this instanceof u))return new u(v,m);o.apply(this),this._parser=new n(v,m),this.writable=!0,this.readable=!0;var D=this;this._parser.onend=function(){D.emit("end")},this._parser.onerror=function(C){D.emit("error",C),D._parser.error=null},this._decoder=null,l.forEach(function(C){Object.defineProperty(D,"on"+C,{get:function(){return D._parser["on"+C]},set:function(X){if(!X)return D.removeAllListeners(C),D._parser["on"+C]=X,X;D.on(C,X)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(o.prototype,{constructor:{value:u}}),u.prototype.write=function(v){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(v)){if(!this._decoder){var m=dd.StringDecoder;this._decoder=new m("utf8")}v=this._decoder.write(v)}return this._parser.write(v.toString()),this.emit("data",v),!0},u.prototype.end=function(v){return v&&v.length&&this.write(v),this._parser.end(),!0},u.prototype.on=function(v,m){var D=this;return!D._parser["on"+v]&&l.indexOf(v)!==-1&&(D._parser["on"+v]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,v),D.emit.apply(D,C)}),o.prototype.on.call(D,v,m)};var p="[CDATA[",c="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",A={xml:h,xmlns:_},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function y(v){return v===" "||v===`
`||v==="\r"||v==="	"}function I(v){return v==='"'||v==="'"}function O(v){return v===">"||y(v)}function b(v,m){return v.test(m)}function N(v,m){return!b(v,m)}var g=0;e.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(v){var m=e.ENTITIES[v],D=typeof m=="number"?String.fromCharCode(m):m;e.ENTITIES[v]=D});for(var F in e.STATE)e.STATE[e.STATE[F]]=F;g=e.STATE;function B(v,m,D){v[m]&&v[m](D)}function U(v,m,D){v.textNode&&P(v),B(v,m,D)}function P(v){v.textNode=R(v.opt,v.textNode),v.textNode&&B(v,"ontext",v.textNode),v.textNode=""}function R(v,m){return v.trim&&(m=m.trim()),v.normalize&&(m=m.replace(/\s+/g," ")),m}function L(v,m){return P(v),v.trackPosition&&(m+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c),m=new Error(m),v.error=m,B(v,"onerror",m),v}function H(v){return v.sawRoot&&!v.closedRoot&&$(v,"Unclosed root tag"),v.state!==g.BEGIN&&v.state!==g.BEGIN_WHITESPACE&&v.state!==g.TEXT&&L(v,"Unexpected end"),P(v),v.c="",v.closed=!0,B(v,"onend"),n.call(v,v.strict,v.opt),v}function $(v,m){if(typeof v!="object"||!(v instanceof n))throw new Error("bad call to strictFail");v.strict&&L(v,m)}function M(v){v.strict||(v.tagName=v.tagName[v.looseCase]());var m=v.tags[v.tags.length-1]||v,D=v.tag={name:v.tagName,attributes:{}};v.opt.xmlns&&(D.ns=m.ns),v.attribList.length=0,U(v,"onopentagstart",D)}function j(v,m){var D=v.indexOf(":"),C=D<0?["",v]:v.split(":"),X=C[0],te=C[1];return m&&v==="xmlns"&&(X="xmlns",te=""),{prefix:X,local:te}}function W(v){if(v.strict||(v.attribName=v.attribName[v.looseCase]()),v.attribList.indexOf(v.attribName)!==-1||v.tag.attributes.hasOwnProperty(v.attribName)){v.attribName=v.attribValue="";return}if(v.opt.xmlns){var m=j(v.attribName,!0),D=m.prefix,C=m.local;if(D==="xmlns")if(C==="xml"&&v.attribValue!==h)$(v,"xml: prefix must be bound to "+h+`
Actual: `+v.attribValue);else if(C==="xmlns"&&v.attribValue!==_)$(v,"xmlns: prefix must be bound to "+_+`
Actual: `+v.attribValue);else{var X=v.tag,te=v.tags[v.tags.length-1]||v;X.ns===te.ns&&(X.ns=Object.create(te.ns)),X.ns[C]=v.attribValue}v.attribList.push([v.attribName,v.attribValue])}else v.tag.attributes[v.attribName]=v.attribValue,U(v,"onattribute",{name:v.attribName,value:v.attribValue});v.attribName=v.attribValue=""}function G(v,m){if(v.opt.xmlns){var D=v.tag,C=j(v.tagName);D.prefix=C.prefix,D.local=C.local,D.uri=D.ns[C.prefix]||"",D.prefix&&!D.uri&&($(v,"Unbound namespace prefix: "+JSON.stringify(v.tagName)),D.uri=C.prefix);var X=v.tags[v.tags.length-1]||v;D.ns&&X.ns!==D.ns&&Object.keys(D.ns).forEach(function(cn){U(v,"onopennamespace",{prefix:cn,uri:D.ns[cn]})});for(var te=0,oe=v.attribList.length;te<oe;te++){var ve=v.attribList[te],De=ve[0],ct=ve[1],ue=j(De,!0),Ue=ue.prefix,mr=ue.local,ln=Ue===""?"":D.ns[Ue]||"",mi={name:De,value:ct,prefix:Ue,local:mr,uri:ln};Ue&&Ue!=="xmlns"&&!ln&&($(v,"Unbound namespace prefix: "+JSON.stringify(Ue)),mi.uri=Ue),v.tag.attributes[De]=mi,U(v,"onattribute",mi)}v.attribList.length=0}v.tag.isSelfClosing=!!m,v.sawRoot=!0,v.tags.push(v.tag),U(v,"onopentag",v.tag),m||(!v.noscript&&v.tagName.toLowerCase()==="script"?v.state=g.SCRIPT:v.state=g.TEXT,v.tag=null,v.tagName=""),v.attribName=v.attribValue="",v.attribList.length=0}function Q(v){if(!v.tagName){$(v,"Weird empty close tag."),v.textNode+="</>",v.state=g.TEXT;return}if(v.script){if(v.tagName!=="script"){v.script+="</"+v.tagName+">",v.tagName="",v.state=g.SCRIPT;return}U(v,"onscript",v.script),v.script=""}var m=v.tags.length,D=v.tagName;v.strict||(D=D[v.looseCase]());for(var C=D;m--;){var X=v.tags[m];if(X.name!==C)$(v,"Unexpected close tag");else break}if(m<0){$(v,"Unmatched closing tag: "+v.tagName),v.textNode+="</"+v.tagName+">",v.state=g.TEXT;return}v.tagName=D;for(var te=v.tags.length;te-- >m;){var oe=v.tag=v.tags.pop();v.tagName=v.tag.name,U(v,"onclosetag",v.tagName);var ve={};for(var De in oe.ns)ve[De]=oe.ns[De];var ct=v.tags[v.tags.length-1]||v;v.opt.xmlns&&oe.ns!==ct.ns&&Object.keys(oe.ns).forEach(function(ue){var Ue=oe.ns[ue];U(v,"onclosenamespace",{prefix:ue,uri:Ue})})}m===0&&(v.closedRoot=!0),v.tagName=v.attribValue=v.attribName="",v.attribList.length=0,v.state=g.TEXT}function ge(v){var m=v.entity,D=m.toLowerCase(),C,X="";return v.ENTITIES[m]?v.ENTITIES[m]:v.ENTITIES[D]?v.ENTITIES[D]:(m=D,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),C=parseInt(m,16),X=C.toString(16)):(m=m.slice(1),C=parseInt(m,10),X=C.toString(10))),m=m.replace(/^0+/,""),isNaN(C)||X.toLowerCase()!==m?($(v,"Invalid character entity"),"&"+v.entity+";"):String.fromCodePoint(C))}function Z(v,m){m==="<"?(v.state=g.OPEN_WAKA,v.startTagPosition=v.position):y(m)||($(v,"Non-whitespace before first tag."),v.textNode=m,v.state=g.TEXT)}function Y(v,m){var D="";return m<v.length&&(D=v.charAt(m)),D}function fi(v){var m=this;if(this.error)throw this.error;if(m.closed)return L(m,"Cannot write after close. Assign an onready handler.");if(v===null)return H(m);typeof v=="object"&&(v=v.toString());for(var D=0,C="";C=Y(v,D++),m.c=C,!!C;)switch(m.trackPosition&&(m.position++,C===`
`?(m.line++,m.column=0):m.column++),m.state){case g.BEGIN:if(m.state=g.BEGIN_WHITESPACE,C==="\uFEFF")continue;Z(m,C);continue;case g.BEGIN_WHITESPACE:Z(m,C);continue;case g.TEXT:if(m.sawRoot&&!m.closedRoot){for(var X=D-1;C&&C!=="<"&&C!=="&";)C=Y(v,D++),C&&m.trackPosition&&(m.position++,C===`
`?(m.line++,m.column=0):m.column++);m.textNode+=v.substring(X,D-1)}C==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=g.OPEN_WAKA,m.startTagPosition=m.position):(!y(C)&&(!m.sawRoot||m.closedRoot)&&$(m,"Text data outside of root node."),C==="&"?m.state=g.TEXT_ENTITY:m.textNode+=C);continue;case g.SCRIPT:C==="<"?m.state=g.SCRIPT_ENDING:m.script+=C;continue;case g.SCRIPT_ENDING:C==="/"?m.state=g.CLOSE_TAG:(m.script+="<"+C,m.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(C==="!")m.state=g.SGML_DECL,m.sgmlDecl="";else if(!y(C))if(b(w,C))m.state=g.OPEN_TAG,m.tagName=C;else if(C==="/")m.state=g.CLOSE_TAG,m.tagName="";else if(C==="?")m.state=g.PROC_INST,m.procInstName=m.procInstBody="";else{if($(m,"Unencoded <"),m.startTagPosition+1<m.position){var te=m.position-m.startTagPosition;C=new Array(te).join(" ")+C}m.textNode+="<"+C,m.state=g.TEXT}continue;case g.SGML_DECL:(m.sgmlDecl+C).toUpperCase()===p?(U(m,"onopencdata"),m.state=g.CDATA,m.sgmlDecl="",m.cdata=""):m.sgmlDecl+C==="--"?(m.state=g.COMMENT,m.comment="",m.sgmlDecl=""):(m.sgmlDecl+C).toUpperCase()===c?(m.state=g.DOCTYPE,(m.doctype||m.sawRoot)&&$(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):C===">"?(U(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=g.TEXT):(I(C)&&(m.state=g.SGML_DECL_QUOTED),m.sgmlDecl+=C);continue;case g.SGML_DECL_QUOTED:C===m.q&&(m.state=g.SGML_DECL,m.q=""),m.sgmlDecl+=C;continue;case g.DOCTYPE:C===">"?(m.state=g.TEXT,U(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=C,C==="["?m.state=g.DOCTYPE_DTD:I(C)&&(m.state=g.DOCTYPE_QUOTED,m.q=C));continue;case g.DOCTYPE_QUOTED:m.doctype+=C,C===m.q&&(m.q="",m.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:m.doctype+=C,C==="]"?m.state=g.DOCTYPE:I(C)&&(m.state=g.DOCTYPE_DTD_QUOTED,m.q=C);continue;case g.DOCTYPE_DTD_QUOTED:m.doctype+=C,C===m.q&&(m.state=g.DOCTYPE_DTD,m.q="");continue;case g.COMMENT:C==="-"?m.state=g.COMMENT_ENDING:m.comment+=C;continue;case g.COMMENT_ENDING:C==="-"?(m.state=g.COMMENT_ENDED,m.comment=R(m.opt,m.comment),m.comment&&U(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+C,m.state=g.COMMENT);continue;case g.COMMENT_ENDED:C!==">"?($(m,"Malformed comment"),m.comment+="--"+C,m.state=g.COMMENT):m.state=g.TEXT;continue;case g.CDATA:C==="]"?m.state=g.CDATA_ENDING:m.cdata+=C;continue;case g.CDATA_ENDING:C==="]"?m.state=g.CDATA_ENDING_2:(m.cdata+="]"+C,m.state=g.CDATA);continue;case g.CDATA_ENDING_2:C===">"?(m.cdata&&U(m,"oncdata",m.cdata),U(m,"onclosecdata"),m.cdata="",m.state=g.TEXT):C==="]"?m.cdata+="]":(m.cdata+="]]"+C,m.state=g.CDATA);continue;case g.PROC_INST:C==="?"?m.state=g.PROC_INST_ENDING:y(C)?m.state=g.PROC_INST_BODY:m.procInstName+=C;continue;case g.PROC_INST_BODY:if(!m.procInstBody&&y(C))continue;C==="?"?m.state=g.PROC_INST_ENDING:m.procInstBody+=C;continue;case g.PROC_INST_ENDING:C===">"?(U(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=g.TEXT):(m.procInstBody+="?"+C,m.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:b(E,C)?m.tagName+=C:(M(m),C===">"?G(m):C==="/"?m.state=g.OPEN_TAG_SLASH:(y(C)||$(m,"Invalid character in tag name"),m.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:C===">"?(G(m,!0),Q(m)):($(m,"Forward-slash in opening tag not followed by >"),m.state=g.ATTRIB);continue;case g.ATTRIB:if(y(C))continue;C===">"?G(m):C==="/"?m.state=g.OPEN_TAG_SLASH:b(w,C)?(m.attribName=C,m.attribValue="",m.state=g.ATTRIB_NAME):$(m,"Invalid attribute name");continue;case g.ATTRIB_NAME:C==="="?m.state=g.ATTRIB_VALUE:C===">"?($(m,"Attribute without value"),m.attribValue=m.attribName,W(m),G(m)):y(C)?m.state=g.ATTRIB_NAME_SAW_WHITE:b(E,C)?m.attribName+=C:$(m,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(C==="=")m.state=g.ATTRIB_VALUE;else{if(y(C))continue;$(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",U(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",C===">"?G(m):b(w,C)?(m.attribName=C,m.state=g.ATTRIB_NAME):($(m,"Invalid attribute name"),m.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(y(C))continue;I(C)?(m.q=C,m.state=g.ATTRIB_VALUE_QUOTED):($(m,"Unquoted attribute value"),m.state=g.ATTRIB_VALUE_UNQUOTED,m.attribValue=C);continue;case g.ATTRIB_VALUE_QUOTED:if(C!==m.q){C==="&"?m.state=g.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=C;continue}W(m),m.q="",m.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:y(C)?m.state=g.ATTRIB:C===">"?G(m):C==="/"?m.state=g.OPEN_TAG_SLASH:b(w,C)?($(m,"No whitespace between attributes"),m.attribName=C,m.attribValue="",m.state=g.ATTRIB_NAME):$(m,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!O(C)){C==="&"?m.state=g.ATTRIB_VALUE_ENTITY_U:m.attribValue+=C;continue}W(m),C===">"?G(m):m.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(m.tagName)C===">"?Q(m):b(E,C)?m.tagName+=C:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=g.SCRIPT):(y(C)||$(m,"Invalid tagname in closing tag"),m.state=g.CLOSE_TAG_SAW_WHITE);else{if(y(C))continue;N(w,C)?m.script?(m.script+="</"+C,m.state=g.SCRIPT):$(m,"Invalid tagname in closing tag."):m.tagName=C}continue;case g.CLOSE_TAG_SAW_WHITE:if(y(C))continue;C===">"?Q(m):$(m,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var oe,ve;switch(m.state){case g.TEXT_ENTITY:oe=g.TEXT,ve="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:oe=g.ATTRIB_VALUE_QUOTED,ve="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:oe=g.ATTRIB_VALUE_UNQUOTED,ve="attribValue";break}C===";"?(m[ve]+=ge(m),m.entity="",m.state=oe):b(m.entity.length?T:f,C)?m.entity+=C:($(m,"Invalid character in entity name"),m[ve]+="&"+m.entity+C,m.entity="",m.state=oe);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&r(m),m}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var v=String.fromCharCode,m=Math.floor,D=function(){var C=16384,X=[],te,oe,ve=-1,De=arguments.length;if(!De)return"";for(var ct="";++ve<De;){var ue=Number(arguments[ve]);if(!isFinite(ue)||ue<0||ue>1114111||m(ue)!==ue)throw RangeError("Invalid code point: "+ue);ue<=65535?X.push(ue):(ue-=65536,te=(ue>>10)+55296,oe=ue%1024+56320,X.push(te,oe)),(ve+1===De||X.length>C)&&(ct+=v.apply(null,X),X.length=0)}return ct};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D}()})(t)})(ql);var Is;function Pd(){if(Is)return It;Is=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseXml=It.XElement=void 0;const t=ql,e=pe();class i{constructor(l){if(this.name=l,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!l)throw e.newError("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!r(l))throw e.newError(`Invalid element name: ${l}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(l){const d=this.attributes===null?null:this.attributes[l];if(d==null)throw e.newError(`No attribute "${l}"`,"ERR_XML_MISSED_ATTRIBUTE");return d}removeAttribute(l){this.attributes!==null&&delete this.attributes[l]}element(l,d=!1,u=null){const p=this.elementOrNull(l,d);if(p===null)throw e.newError(u||`No element "${l}"`,"ERR_XML_MISSED_ELEMENT");return p}elementOrNull(l,d=!1){if(this.elements===null)return null;for(const u of this.elements)if(a(u,l,d))return u;return null}getElements(l,d=!1){return this.elements===null?[]:this.elements.filter(u=>a(u,l,d))}elementValueOrEmpty(l,d=!1){const u=this.elementOrNull(l,d);return u===null?"":u.value}}It.XElement=i;const n=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function r(o){return n.test(o)}function a(o,l,d){const u=o.name;return u===l||d===!0&&u.length===l.length&&u.toLowerCase()===l.toLowerCase()}function s(o){let l=null;const d=t.parser(!0,{}),u=[];return d.onopentag=p=>{const c=new i(p.name);if(c.attributes=p.attributes,l===null)l=c;else{const h=u[u.length-1];h.elements==null&&(h.elements=[]),h.elements.push(c)}u.push(c)},d.onclosetag=()=>{u.pop()},d.ontext=p=>{u.length>0&&(u[u.length-1].value=p)},d.oncdata=p=>{const c=u[u.length-1];c.value=p,c.isCData=!0},d.onerror=p=>{throw p},d.write(o),l}return It.parseXml=s,It}var Ns;function pe(){return Ns||(Ns=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.newError=t.asArray=t.CURRENT_APP_PACKAGE_FILE_NAME=t.CURRENT_APP_INSTALLER_FILE_NAME=t.XElement=t.parseXml=t.ProgressCallbackTransform=t.UUID=t.parseDn=t.githubUrl=t.getS3LikeProviderBaseUrl=t.configureRequestUrl=t.parseJson=t.safeStringifyJson=t.configureRequestOptionsFromUrl=t.configureRequestOptions=t.safeGetHeader=t.DigestTransform=t.HttpExecutor=t.createHttpError=t.HttpError=t.CancellationError=t.CancellationToken=void 0;var e=Ft;Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return e.CancellationToken}}),Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return e.CancellationError}});var i=Sd();Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return i.HttpError}}),Object.defineProperty(t,"createHttpError",{enumerable:!0,get:function(){return i.createHttpError}}),Object.defineProperty(t,"HttpExecutor",{enumerable:!0,get:function(){return i.HttpExecutor}}),Object.defineProperty(t,"DigestTransform",{enumerable:!0,get:function(){return i.DigestTransform}}),Object.defineProperty(t,"safeGetHeader",{enumerable:!0,get:function(){return i.safeGetHeader}}),Object.defineProperty(t,"configureRequestOptions",{enumerable:!0,get:function(){return i.configureRequestOptions}}),Object.defineProperty(t,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return i.configureRequestOptionsFromUrl}}),Object.defineProperty(t,"safeStringifyJson",{enumerable:!0,get:function(){return i.safeStringifyJson}}),Object.defineProperty(t,"parseJson",{enumerable:!0,get:function(){return i.parseJson}}),Object.defineProperty(t,"configureRequestUrl",{enumerable:!0,get:function(){return i.configureRequestUrl}});var n=ai;Object.defineProperty(t,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return n.getS3LikeProviderBaseUrl}}),Object.defineProperty(t,"githubUrl",{enumerable:!0,get:function(){return n.githubUrl}});var r=Gn;Object.defineProperty(t,"parseDn",{enumerable:!0,get:function(){return r.parseDn}});var a=$d();Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return a.UUID}});var s=Zi;Object.defineProperty(t,"ProgressCallbackTransform",{enumerable:!0,get:function(){return s.ProgressCallbackTransform}});var o=Pd();Object.defineProperty(t,"parseXml",{enumerable:!0,get:function(){return o.parseXml}}),Object.defineProperty(t,"XElement",{enumerable:!0,get:function(){return o.XElement}}),t.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",t.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function l(u){return u==null?[]:Array.isArray(u)?u:[u]}t.asArray=l;function d(u,p){const c=new Error(u);return c.code=p,c}t.newError=d}(Tr)),Tr}var Nt={},Mt={},Se={};Se.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((i,n)=>{t.call(this,...e,(r,a)=>r!=null?n(r):i(a))})},"name",{value:t.name})};Se.fromPromise=function(t){return Object.defineProperty(function(...e){const i=e[e.length-1];if(typeof i!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>i(null,n),i)},"name",{value:t.name})};var ht=hd,Dd=process.cwd,On=null,kd=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return On||(On=Dd.call(process)),On};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Os=process.chdir;process.chdir=function(t){On=null,Os.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Os)}var Fd=Ld;function Ld(t){ht.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||i(t),t.chown=a(t.chown),t.fchown=a(t.fchown),t.lchown=a(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=s(t.chownSync),t.fchownSync=s(t.fchownSync),t.lchownSync=s(t.lchownSync),t.chmodSync=r(t.chmodSync),t.fchmodSync=r(t.fchmodSync),t.lchmodSync=r(t.lchmodSync),t.stat=o(t.stat),t.fstat=o(t.fstat),t.lstat=o(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,p,c){c&&process.nextTick(c)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,p,c,h){h&&process.nextTick(h)},t.lchownSync=function(){}),kd==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(u){function p(c,h,_){var A=Date.now(),w=0;u(c,h,function E(f){if(f&&(f.code==="EACCES"||f.code==="EPERM"||f.code==="EBUSY")&&Date.now()-A<6e4){setTimeout(function(){t.stat(h,function(T,y){T&&T.code==="ENOENT"?u(c,h,E):_(f)})},w),w<100&&(w+=10);return}_&&_(f)})}return Object.setPrototypeOf&&Object.setPrototypeOf(p,u),p}(t.rename)),t.read=typeof t.read!="function"?t.read:function(u){function p(c,h,_,A,w,E){var f;if(E&&typeof E=="function"){var T=0;f=function(y,I,O){if(y&&y.code==="EAGAIN"&&T<10)return T++,u.call(t,c,h,_,A,w,f);E.apply(this,arguments)}}return u.call(t,c,h,_,A,w,f)}return Object.setPrototypeOf&&Object.setPrototypeOf(p,u),p}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(u){return function(p,c,h,_,A){for(var w=0;;)try{return u.call(t,p,c,h,_,A)}catch(E){if(E.code==="EAGAIN"&&w<10){w++;continue}throw E}}}(t.readSync);function e(u){u.lchmod=function(p,c,h){u.open(p,ht.O_WRONLY|ht.O_SYMLINK,c,function(_,A){if(_){h&&h(_);return}u.fchmod(A,c,function(w){u.close(A,function(E){h&&h(w||E)})})})},u.lchmodSync=function(p,c){var h=u.openSync(p,ht.O_WRONLY|ht.O_SYMLINK,c),_=!0,A;try{A=u.fchmodSync(h,c),_=!1}finally{if(_)try{u.closeSync(h)}catch{}else u.closeSync(h)}return A}}function i(u){ht.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(p,c,h,_){u.open(p,ht.O_SYMLINK,function(A,w){if(A){_&&_(A);return}u.futimes(w,c,h,function(E){u.close(w,function(f){_&&_(E||f)})})})},u.lutimesSync=function(p,c,h){var _=u.openSync(p,ht.O_SYMLINK),A,w=!0;try{A=u.futimesSync(_,c,h),w=!1}finally{if(w)try{u.closeSync(_)}catch{}else u.closeSync(_)}return A}):u.futimes&&(u.lutimes=function(p,c,h,_){_&&process.nextTick(_)},u.lutimesSync=function(){})}function n(u){return u&&function(p,c,h){return u.call(t,p,c,function(_){d(_)&&(_=null),h&&h.apply(this,arguments)})}}function r(u){return u&&function(p,c){try{return u.call(t,p,c)}catch(h){if(!d(h))throw h}}}function a(u){return u&&function(p,c,h,_){return u.call(t,p,c,h,function(A){d(A)&&(A=null),_&&_.apply(this,arguments)})}}function s(u){return u&&function(p,c,h){try{return u.call(t,p,c,h)}catch(_){if(!d(_))throw _}}}function o(u){return u&&function(p,c,h){typeof c=="function"&&(h=c,c=null);function _(A,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),h&&h.apply(this,arguments)}return c?u.call(t,p,c,_):u.call(t,p,_)}}function l(u){return u&&function(p,c){var h=c?u.call(t,p,c):u.call(t,p);return h&&(h.uid<0&&(h.uid+=4294967296),h.gid<0&&(h.gid+=4294967296)),h}}function d(u){if(!u||u.code==="ENOSYS")return!0;var p=!process.getuid||process.getuid()!==0;return!!(p&&(u.code==="EINVAL"||u.code==="EPERM"))}}var Rs=me.Stream,Ud=Md;function Md(t){return{ReadStream:e,WriteStream:i};function e(n,r){if(!(this instanceof e))return new e(n,r);Rs.call(this);var a=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var s=Object.keys(r),o=0,l=s.length;o<l;o++){var d=s[o];this[d]=r[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){a._read()});return}t.open(this.path,this.flags,this.mode,function(u,p){if(u){a.emit("error",u),a.readable=!1;return}a.fd=p,a.emit("open",p),a._read()})}function i(n,r){if(!(this instanceof i))return new i(n,r);Rs.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var a=Object.keys(r),s=0,o=a.length;s<o;s++){var l=a[s];this[l]=r[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var jd=Bd,Hd=Object.getPrototypeOf||function(t){return t.__proto__};function Bd(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:Hd(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}var re=Ge,qd=Fd,zd=Ud,Gd=jd,yn=Xi,we,kn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(we=Symbol.for("graceful-fs.queue"),kn=Symbol.for("graceful-fs.previous")):(we="___graceful-fs.queue",kn="___graceful-fs.previous");function Vd(){}function zl(t,e){Object.defineProperty(t,we,{get:function(){return e}})}var Dt=Vd;yn.debuglog?Dt=yn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Dt=function(){var t=yn.format.apply(yn,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!re[we]){var Wd=qe[we]||[];zl(re,Wd),re.close=function(t){function e(i,n){return t.call(re,i,function(r){r||$s(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,kn,{value:t}),e}(re.close),re.closeSync=function(t){function e(i){t.apply(re,arguments),$s()}return Object.defineProperty(e,kn,{value:t}),e}(re.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Dt(re[we]),Fl.equal(re[we].length,0)})}qe[we]||zl(qe,re[we]);var Ce=Sa(Gd(re));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!re.__patched&&(Ce=Sa(re),re.__patched=!0);function Sa(t){qd(t),t.gracefulify=Sa,t.createReadStream=I,t.createWriteStream=O;var e=t.readFile;t.readFile=i;function i(g,F,B){return typeof F=="function"&&(B=F,F=null),U(g,F,B);function U(P,R,L,H){return e(P,R,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?qt([U,[P,R,L],$,H||Date.now(),Date.now()]):typeof L=="function"&&L.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=r;function r(g,F,B,U){return typeof B=="function"&&(U=B,B=null),P(g,F,B,U);function P(R,L,H,$,M){return n(R,L,H,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?qt([P,[R,L,H,$],j,M||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var a=t.appendFile;a&&(t.appendFile=s);function s(g,F,B,U){return typeof B=="function"&&(U=B,B=null),P(g,F,B,U);function P(R,L,H,$,M){return a(R,L,H,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?qt([P,[R,L,H,$],j,M||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var o=t.copyFile;o&&(t.copyFile=l);function l(g,F,B,U){return typeof B=="function"&&(U=B,B=0),P(g,F,B,U);function P(R,L,H,$,M){return o(R,L,H,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?qt([P,[R,L,H,$],j,M||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var d=t.readdir;t.readdir=p;var u=/^v[0-5]\./;function p(g,F,B){typeof F=="function"&&(B=F,F=null);var U=u.test(process.version)?function(L,H,$,M){return d(L,P(L,H,$,M))}:function(L,H,$,M){return d(L,H,P(L,H,$,M))};return U(g,F,B);function P(R,L,H,$){return function(M,j){M&&(M.code==="EMFILE"||M.code==="ENFILE")?qt([U,[R,L,H],M,$||Date.now(),Date.now()]):(j&&j.sort&&j.sort(),typeof H=="function"&&H.call(this,M,j))}}}if(process.version.substr(0,4)==="v0.8"){var c=zd(t);E=c.ReadStream,T=c.WriteStream}var h=t.ReadStream;h&&(E.prototype=Object.create(h.prototype),E.prototype.open=f);var _=t.WriteStream;_&&(T.prototype=Object.create(_.prototype),T.prototype.open=y),Object.defineProperty(t,"ReadStream",{get:function(){return E},set:function(g){E=g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return T},set:function(g){T=g},enumerable:!0,configurable:!0});var A=E;Object.defineProperty(t,"FileReadStream",{get:function(){return A},set:function(g){A=g},enumerable:!0,configurable:!0});var w=T;Object.defineProperty(t,"FileWriteStream",{get:function(){return w},set:function(g){w=g},enumerable:!0,configurable:!0});function E(g,F){return this instanceof E?(h.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function f(){var g=this;N(g.path,g.flags,g.mode,function(F,B){F?(g.autoClose&&g.destroy(),g.emit("error",F)):(g.fd=B,g.emit("open",B),g.read())})}function T(g,F){return this instanceof T?(_.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function y(){var g=this;N(g.path,g.flags,g.mode,function(F,B){F?(g.destroy(),g.emit("error",F)):(g.fd=B,g.emit("open",B))})}function I(g,F){return new t.ReadStream(g,F)}function O(g,F){return new t.WriteStream(g,F)}var b=t.open;t.open=N;function N(g,F,B,U){return typeof B=="function"&&(U=B,B=null),P(g,F,B,U);function P(R,L,H,$,M){return b(R,L,H,function(j,W){j&&(j.code==="EMFILE"||j.code==="ENFILE")?qt([P,[R,L,H,$],j,M||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}return t}function qt(t){Dt("ENQUEUE",t[0].name,t[1]),re[we].push(t),Ca()}var En;function $s(){for(var t=Date.now(),e=0;e<re[we].length;++e)re[we][e].length>2&&(re[we][e][3]=t,re[we][e][4]=t);Ca()}function Ca(){if(clearTimeout(En),En=void 0,re[we].length!==0){var t=re[we].shift(),e=t[0],i=t[1],n=t[2],r=t[3],a=t[4];if(r===void 0)Dt("RETRY",e.name,i),e.apply(null,i);else if(Date.now()-r>=6e4){Dt("TIMEOUT",e.name,i);var s=i.pop();typeof s=="function"&&s.call(null,n)}else{var o=Date.now()-a,l=Math.max(a-r,1),d=Math.min(l*1.2,100);o>=d?(Dt("RETRY",e.name,i),e.apply(null,i.concat([r]))):re[we].push(t)}En===void 0&&(En=setTimeout(Ca,0))}}(function(t){const e=Se.fromCallback,i=Ce,n=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof i[r]=="function");Object.assign(t,i),n.forEach(r=>{t[r]=e(i[r])}),t.exists=function(r,a){return typeof a=="function"?i.exists(r,a):new Promise(s=>i.exists(r,s))},t.read=function(r,a,s,o,l,d){return typeof d=="function"?i.read(r,a,s,o,l,d):new Promise((u,p)=>{i.read(r,a,s,o,l,(c,h,_)=>{if(c)return p(c);u({bytesRead:h,buffer:_})})})},t.write=function(r,a,...s){return typeof s[s.length-1]=="function"?i.write(r,a,...s):new Promise((o,l)=>{i.write(r,a,...s,(d,u,p)=>{if(d)return l(d);o({bytesWritten:u,buffer:p})})})},typeof i.writev=="function"&&(t.writev=function(r,a,...s){return typeof s[s.length-1]=="function"?i.writev(r,a,...s):new Promise((o,l)=>{i.writev(r,a,...s,(d,u,p)=>{if(d)return l(d);o({bytesWritten:u,buffers:p})})})}),typeof i.realpath.native=="function"?t.realpath.native=e(i.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Mt);var Ia={},Gl={};const Yd=se;Gl.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Yd.parse(e).root,""))){const n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}};const Vl=Mt,{checkPath:Wl}=Gl,Yl=t=>{const e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Ia.makeDir=async(t,e)=>(Wl(t),Vl.mkdir(t,{mode:Yl(e),recursive:!0}));Ia.makeDirSync=(t,e)=>(Wl(t),Vl.mkdirSync(t,{mode:Yl(e),recursive:!0}));const Xd=Se.fromPromise,{makeDir:Kd,makeDirSync:Nr}=Ia,Or=Xd(Kd);var Ze={mkdirs:Or,mkdirsSync:Nr,mkdirp:Or,mkdirpSync:Nr,ensureDir:Or,ensureDirSync:Nr};const Qd=Se.fromPromise,Xl=Mt;function Jd(t){return Xl.access(t).then(()=>!0).catch(()=>!1)}var jt={pathExists:Qd(Jd),pathExistsSync:Xl.existsSync};const ni=Ce;function Zd(t,e,i,n){ni.open(t,"r+",(r,a)=>{if(r)return n(r);ni.futimes(a,e,i,s=>{ni.close(a,o=>{n&&n(s||o)})})})}function eh(t,e,i){const n=ni.openSync(t,"r+");return ni.futimesSync(n,e,i),ni.closeSync(n)}var Kl={utimesMillis:Zd,utimesMillisSync:eh};const si=Mt,fe=se,th=Xi;function ih(t,e,i){const n=i.dereference?r=>si.stat(r,{bigint:!0}):r=>si.lstat(r,{bigint:!0});return Promise.all([n(t),n(e).catch(r=>{if(r.code==="ENOENT")return null;throw r})]).then(([r,a])=>({srcStat:r,destStat:a}))}function nh(t,e,i){let n;const r=i.dereference?s=>si.statSync(s,{bigint:!0}):s=>si.lstatSync(s,{bigint:!0}),a=r(t);try{n=r(e)}catch(s){if(s.code==="ENOENT")return{srcStat:a,destStat:null};throw s}return{srcStat:a,destStat:n}}function rh(t,e,i,n,r){th.callbackify(ih)(t,e,n,(a,s)=>{if(a)return r(a);const{srcStat:o,destStat:l}=s;if(l){if(en(o,l)){const d=fe.basename(t),u=fe.basename(e);return i==="move"&&d!==u&&d.toLowerCase()===u.toLowerCase()?r(null,{srcStat:o,destStat:l,isChangingCase:!0}):r(new Error("Source and destination must not be the same."))}if(o.isDirectory()&&!l.isDirectory())return r(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!o.isDirectory()&&l.isDirectory())return r(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return o.isDirectory()&&Na(t,e)?r(new Error(Vn(t,e,i))):r(null,{srcStat:o,destStat:l})})}function ah(t,e,i,n){const{srcStat:r,destStat:a}=nh(t,e,n);if(a){if(en(r,a)){const s=fe.basename(t),o=fe.basename(e);if(i==="move"&&s!==o&&s.toLowerCase()===o.toLowerCase())return{srcStat:r,destStat:a,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!a.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!r.isDirectory()&&a.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(r.isDirectory()&&Na(t,e))throw new Error(Vn(t,e,i));return{srcStat:r,destStat:a}}function Ql(t,e,i,n,r){const a=fe.resolve(fe.dirname(t)),s=fe.resolve(fe.dirname(i));if(s===a||s===fe.parse(s).root)return r();si.stat(s,{bigint:!0},(o,l)=>o?o.code==="ENOENT"?r():r(o):en(e,l)?r(new Error(Vn(t,i,n))):Ql(t,e,s,n,r))}function Jl(t,e,i,n){const r=fe.resolve(fe.dirname(t)),a=fe.resolve(fe.dirname(i));if(a===r||a===fe.parse(a).root)return;let s;try{s=si.statSync(a,{bigint:!0})}catch(o){if(o.code==="ENOENT")return;throw o}if(en(e,s))throw new Error(Vn(t,i,n));return Jl(t,e,a,n)}function en(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Na(t,e){const i=fe.resolve(t).split(fe.sep).filter(r=>r),n=fe.resolve(e).split(fe.sep).filter(r=>r);return i.reduce((r,a,s)=>r&&n[s]===a,!0)}function Vn(t,e,i){return`Cannot ${i} '${t}' to a subdirectory of itself, '${e}'.`}var di={checkPaths:rh,checkPathsSync:ah,checkParentPaths:Ql,checkParentPathsSync:Jl,isSrcSubdir:Na,areIdentical:en};const Oe=Ce,ji=se,sh=Ze.mkdirs,oh=jt.pathExists,lh=Kl.utimesMillis,Hi=di;function ch(t,e,i,n){typeof i=="function"&&!n?(n=i,i={}):typeof i=="function"&&(i={filter:i}),n=n||function(){},i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Hi.checkPaths(t,e,"copy",i,(r,a)=>{if(r)return n(r);const{srcStat:s,destStat:o}=a;Hi.checkParentPaths(t,s,e,"copy",l=>l?n(l):i.filter?Zl(Ps,o,t,e,i,n):Ps(o,t,e,i,n))})}function Ps(t,e,i,n,r){const a=ji.dirname(i);oh(a,(s,o)=>{if(s)return r(s);if(o)return Fn(t,e,i,n,r);sh(a,l=>l?r(l):Fn(t,e,i,n,r))})}function Zl(t,e,i,n,r,a){Promise.resolve(r.filter(i,n)).then(s=>s?t(e,i,n,r,a):a(),s=>a(s))}function ph(t,e,i,n,r){return n.filter?Zl(Fn,t,e,i,n,r):Fn(t,e,i,n,r)}function Fn(t,e,i,n,r){(n.dereference?Oe.stat:Oe.lstat)(e,(s,o)=>s?r(s):o.isDirectory()?vh(o,t,e,i,n,r):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?uh(o,t,e,i,n,r):o.isSymbolicLink()?yh(t,e,i,n,r):o.isSocket()?r(new Error(`Cannot copy a socket file: ${e}`)):o.isFIFO()?r(new Error(`Cannot copy a FIFO pipe: ${e}`)):r(new Error(`Unknown file: ${e}`)))}function uh(t,e,i,n,r,a){return e?dh(t,i,n,r,a):ec(t,i,n,r,a)}function dh(t,e,i,n,r){if(n.overwrite)Oe.unlink(i,a=>a?r(a):ec(t,e,i,n,r));else return n.errorOnExist?r(new Error(`'${i}' already exists`)):r()}function ec(t,e,i,n,r){Oe.copyFile(e,i,a=>a?r(a):n.preserveTimestamps?hh(t.mode,e,i,r):Wn(i,t.mode,r))}function hh(t,e,i,n){return fh(t)?mh(i,t,r=>r?n(r):Ds(t,e,i,n)):Ds(t,e,i,n)}function fh(t){return(t&128)===0}function mh(t,e,i){return Wn(t,e|128,i)}function Ds(t,e,i,n){gh(e,i,r=>r?n(r):Wn(i,t,n))}function Wn(t,e,i){return Oe.chmod(t,e,i)}function gh(t,e,i){Oe.stat(t,(n,r)=>n?i(n):lh(e,r.atime,r.mtime,i))}function vh(t,e,i,n,r,a){return e?tc(i,n,r,a):xh(t.mode,i,n,r,a)}function xh(t,e,i,n,r){Oe.mkdir(i,a=>{if(a)return r(a);tc(e,i,n,s=>s?r(s):Wn(i,t,r))})}function tc(t,e,i,n){Oe.readdir(t,(r,a)=>r?n(r):ic(a,t,e,i,n))}function ic(t,e,i,n,r){const a=t.pop();return a?wh(t,a,e,i,n,r):r()}function wh(t,e,i,n,r,a){const s=ji.join(i,e),o=ji.join(n,e);Hi.checkPaths(s,o,"copy",r,(l,d)=>{if(l)return a(l);const{destStat:u}=d;ph(u,s,o,r,p=>p?a(p):ic(t,i,n,r,a))})}function yh(t,e,i,n,r){Oe.readlink(e,(a,s)=>{if(a)return r(a);if(n.dereference&&(s=ji.resolve(process.cwd(),s)),t)Oe.readlink(i,(o,l)=>o?o.code==="EINVAL"||o.code==="UNKNOWN"?Oe.symlink(s,i,r):r(o):(n.dereference&&(l=ji.resolve(process.cwd(),l)),Hi.isSrcSubdir(s,l)?r(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${l}'.`)):t.isDirectory()&&Hi.isSrcSubdir(l,s)?r(new Error(`Cannot overwrite '${l}' with '${s}'.`)):Eh(s,i,r)));else return Oe.symlink(s,i,r)})}function Eh(t,e,i){Oe.unlink(e,n=>n?i(n):Oe.symlink(t,e,i))}var _h=ch;const _e=Ce,Bi=se,bh=Ze.mkdirsSync,Th=Kl.utimesMillisSync,qi=di;function Ah(t,e,i){typeof i=="function"&&(i={filter:i}),i=i||{},i.clobber="clobber"in i?!!i.clobber:!0,i.overwrite="overwrite"in i?!!i.overwrite:i.clobber,i.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:n,destStat:r}=qi.checkPathsSync(t,e,"copy",i);return qi.checkParentPathsSync(t,n,e,"copy"),Sh(r,t,e,i)}function Sh(t,e,i,n){if(n.filter&&!n.filter(e,i))return;const r=Bi.dirname(i);return _e.existsSync(r)||bh(r),nc(t,e,i,n)}function Ch(t,e,i,n){if(!(n.filter&&!n.filter(e,i)))return nc(t,e,i,n)}function nc(t,e,i,n){const a=(n.dereference?_e.statSync:_e.lstatSync)(e);if(a.isDirectory())return Dh(a,t,e,i,n);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return Ih(a,t,e,i,n);if(a.isSymbolicLink())return Lh(t,e,i,n);throw a.isSocket()?new Error(`Cannot copy a socket file: ${e}`):a.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Ih(t,e,i,n,r){return e?Nh(t,i,n,r):rc(t,i,n,r)}function Nh(t,e,i,n){if(n.overwrite)return _e.unlinkSync(i),rc(t,e,i,n);if(n.errorOnExist)throw new Error(`'${i}' already exists`)}function rc(t,e,i,n){return _e.copyFileSync(e,i),n.preserveTimestamps&&Oh(t.mode,e,i),Oa(i,t.mode)}function Oh(t,e,i){return Rh(t)&&$h(i,t),Ph(e,i)}function Rh(t){return(t&128)===0}function $h(t,e){return Oa(t,e|128)}function Oa(t,e){return _e.chmodSync(t,e)}function Ph(t,e){const i=_e.statSync(t);return Th(e,i.atime,i.mtime)}function Dh(t,e,i,n,r){return e?ac(i,n,r):kh(t.mode,i,n,r)}function kh(t,e,i,n){return _e.mkdirSync(i),ac(e,i,n),Oa(i,t)}function ac(t,e,i){_e.readdirSync(t).forEach(n=>Fh(n,t,e,i))}function Fh(t,e,i,n){const r=Bi.join(e,t),a=Bi.join(i,t),{destStat:s}=qi.checkPathsSync(r,a,"copy",n);return Ch(s,r,a,n)}function Lh(t,e,i,n){let r=_e.readlinkSync(e);if(n.dereference&&(r=Bi.resolve(process.cwd(),r)),t){let a;try{a=_e.readlinkSync(i)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return _e.symlinkSync(r,i);throw s}if(n.dereference&&(a=Bi.resolve(process.cwd(),a)),qi.isSrcSubdir(r,a))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${a}'.`);if(_e.statSync(i).isDirectory()&&qi.isSrcSubdir(a,r))throw new Error(`Cannot overwrite '${a}' with '${r}'.`);return Uh(r,i)}else return _e.symlinkSync(r,i)}function Uh(t,e){return _e.unlinkSync(e),_e.symlinkSync(t,e)}var Mh=Ah;const jh=Se.fromCallback;var Ra={copy:jh(_h),copySync:Mh};const ks=Ce,sc=se,J=Fl,zi=process.platform==="win32";function oc(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(i=>{t[i]=t[i]||ks[i],i=i+"Sync",t[i]=t[i]||ks[i]}),t.maxBusyTries=t.maxBusyTries||3}function $a(t,e,i){let n=0;typeof e=="function"&&(i=e,e={}),J(t,"rimraf: missing path"),J.strictEqual(typeof t,"string","rimraf: path should be a string"),J.strictEqual(typeof i,"function","rimraf: callback function required"),J(e,"rimraf: invalid options argument provided"),J.strictEqual(typeof e,"object","rimraf: options should be object"),oc(e),Fs(t,e,function r(a){if(a){if((a.code==="EBUSY"||a.code==="ENOTEMPTY"||a.code==="EPERM")&&n<e.maxBusyTries){n++;const s=n*100;return setTimeout(()=>Fs(t,e,r),s)}a.code==="ENOENT"&&(a=null)}i(a)})}function Fs(t,e,i){J(t),J(e),J(typeof i=="function"),e.lstat(t,(n,r)=>{if(n&&n.code==="ENOENT")return i(null);if(n&&n.code==="EPERM"&&zi)return Ls(t,e,n,i);if(r&&r.isDirectory())return Rn(t,e,n,i);e.unlink(t,a=>{if(a){if(a.code==="ENOENT")return i(null);if(a.code==="EPERM")return zi?Ls(t,e,a,i):Rn(t,e,a,i);if(a.code==="EISDIR")return Rn(t,e,a,i)}return i(a)})})}function Ls(t,e,i,n){J(t),J(e),J(typeof n=="function"),e.chmod(t,438,r=>{r?n(r.code==="ENOENT"?null:i):e.stat(t,(a,s)=>{a?n(a.code==="ENOENT"?null:i):s.isDirectory()?Rn(t,e,i,n):e.unlink(t,n)})})}function Us(t,e,i){let n;J(t),J(e);try{e.chmodSync(t,438)}catch(r){if(r.code==="ENOENT")return;throw i}try{n=e.statSync(t)}catch(r){if(r.code==="ENOENT")return;throw i}n.isDirectory()?$n(t,e,i):e.unlinkSync(t)}function Rn(t,e,i,n){J(t),J(e),J(typeof n=="function"),e.rmdir(t,r=>{r&&(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")?Hh(t,e,n):r&&r.code==="ENOTDIR"?n(i):n(r)})}function Hh(t,e,i){J(t),J(e),J(typeof i=="function"),e.readdir(t,(n,r)=>{if(n)return i(n);let a=r.length,s;if(a===0)return e.rmdir(t,i);r.forEach(o=>{$a(sc.join(t,o),e,l=>{if(!s){if(l)return i(s=l);--a===0&&e.rmdir(t,i)}})})})}function lc(t,e){let i;e=e||{},oc(e),J(t,"rimraf: missing path"),J.strictEqual(typeof t,"string","rimraf: path should be a string"),J(e,"rimraf: missing options"),J.strictEqual(typeof e,"object","rimraf: options should be object");try{i=e.lstatSync(t)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&zi&&Us(t,e,n)}try{i&&i.isDirectory()?$n(t,e,null):e.unlinkSync(t)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return zi?Us(t,e,n):$n(t,e,n);if(n.code!=="EISDIR")throw n;$n(t,e,n)}}function $n(t,e,i){J(t),J(e);try{e.rmdirSync(t)}catch(n){if(n.code==="ENOTDIR")throw i;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Bh(t,e);else if(n.code!=="ENOENT")throw n}}function Bh(t,e){if(J(t),J(e),e.readdirSync(t).forEach(i=>lc(sc.join(t,i),e)),zi){const i=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-i<500)}else return e.rmdirSync(t,e)}var qh=$a;$a.sync=lc;const Ln=Ce,zh=Se.fromCallback,cc=qh;function Gh(t,e){if(Ln.rm)return Ln.rm(t,{recursive:!0,force:!0},e);cc(t,e)}function Vh(t){if(Ln.rmSync)return Ln.rmSync(t,{recursive:!0,force:!0});cc.sync(t)}var Yn={remove:zh(Gh),removeSync:Vh};const Wh=Se.fromPromise,pc=Mt,uc=se,dc=Ze,hc=Yn,Ms=Wh(async function(e){let i;try{i=await pc.readdir(e)}catch{return dc.mkdirs(e)}return Promise.all(i.map(n=>hc.remove(uc.join(e,n))))});function js(t){let e;try{e=pc.readdirSync(t)}catch{return dc.mkdirsSync(t)}e.forEach(i=>{i=uc.join(t,i),hc.removeSync(i)})}var Yh={emptyDirSync:js,emptydirSync:js,emptyDir:Ms,emptydir:Ms};const Xh=Se.fromCallback,fc=se,gt=Ce,mc=Ze;function Kh(t,e){function i(){gt.writeFile(t,"",n=>{if(n)return e(n);e()})}gt.stat(t,(n,r)=>{if(!n&&r.isFile())return e();const a=fc.dirname(t);gt.stat(a,(s,o)=>{if(s)return s.code==="ENOENT"?mc.mkdirs(a,l=>{if(l)return e(l);i()}):e(s);o.isDirectory()?i():gt.readdir(a,l=>{if(l)return e(l)})})})}function Qh(t){let e;try{e=gt.statSync(t)}catch{}if(e&&e.isFile())return;const i=fc.dirname(t);try{gt.statSync(i).isDirectory()||gt.readdirSync(i)}catch(n){if(n&&n.code==="ENOENT")mc.mkdirsSync(i);else throw n}gt.writeFileSync(t,"")}var Jh={createFile:Xh(Kh),createFileSync:Qh};const Zh=Se.fromCallback,gc=se,mt=Ce,vc=Ze,ef=jt.pathExists,{areIdentical:xc}=di;function tf(t,e,i){function n(r,a){mt.link(r,a,s=>{if(s)return i(s);i(null)})}mt.lstat(e,(r,a)=>{mt.lstat(t,(s,o)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),i(s);if(a&&xc(o,a))return i(null);const l=gc.dirname(e);ef(l,(d,u)=>{if(d)return i(d);if(u)return n(t,e);vc.mkdirs(l,p=>{if(p)return i(p);n(t,e)})})})})}function nf(t,e){let i;try{i=mt.lstatSync(e)}catch{}try{const a=mt.lstatSync(t);if(i&&xc(a,i))return}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}const n=gc.dirname(e);return mt.existsSync(n)||vc.mkdirsSync(n),mt.linkSync(t,e)}var rf={createLink:Zh(tf),createLinkSync:nf};const vt=se,ki=Ce,af=jt.pathExists;function sf(t,e,i){if(vt.isAbsolute(t))return ki.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),i(n)):i(null,{toCwd:t,toDst:t}));{const n=vt.dirname(e),r=vt.join(n,t);return af(r,(a,s)=>a?i(a):s?i(null,{toCwd:r,toDst:t}):ki.lstat(t,o=>o?(o.message=o.message.replace("lstat","ensureSymlink"),i(o)):i(null,{toCwd:t,toDst:vt.relative(n,t)})))}}function of(t,e){let i;if(vt.isAbsolute(t)){if(i=ki.existsSync(t),!i)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{const n=vt.dirname(e),r=vt.join(n,t);if(i=ki.existsSync(r),i)return{toCwd:r,toDst:t};if(i=ki.existsSync(t),!i)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:vt.relative(n,t)}}}var lf={symlinkPaths:sf,symlinkPathsSync:of};const wc=Ce;function cf(t,e,i){if(i=typeof e=="function"?e:i,e=typeof e=="function"?!1:e,e)return i(null,e);wc.lstat(t,(n,r)=>{if(n)return i(null,"file");e=r&&r.isDirectory()?"dir":"file",i(null,e)})}function pf(t,e){let i;if(e)return e;try{i=wc.lstatSync(t)}catch{return"file"}return i&&i.isDirectory()?"dir":"file"}var uf={symlinkType:cf,symlinkTypeSync:pf};const df=Se.fromCallback,yc=se,Be=Mt,Ec=Ze,hf=Ec.mkdirs,ff=Ec.mkdirsSync,_c=lf,mf=_c.symlinkPaths,gf=_c.symlinkPathsSync,bc=uf,vf=bc.symlinkType,xf=bc.symlinkTypeSync,wf=jt.pathExists,{areIdentical:Tc}=di;function yf(t,e,i,n){n=typeof i=="function"?i:n,i=typeof i=="function"?!1:i,Be.lstat(e,(r,a)=>{!r&&a.isSymbolicLink()?Promise.all([Be.stat(t),Be.stat(e)]).then(([s,o])=>{if(Tc(s,o))return n(null);Hs(t,e,i,n)}):Hs(t,e,i,n)})}function Hs(t,e,i,n){mf(t,e,(r,a)=>{if(r)return n(r);t=a.toDst,vf(a.toCwd,i,(s,o)=>{if(s)return n(s);const l=yc.dirname(e);wf(l,(d,u)=>{if(d)return n(d);if(u)return Be.symlink(t,e,o,n);hf(l,p=>{if(p)return n(p);Be.symlink(t,e,o,n)})})})})}function Ef(t,e,i){let n;try{n=Be.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){const o=Be.statSync(t),l=Be.statSync(e);if(Tc(o,l))return}const r=gf(t,e);t=r.toDst,i=xf(r.toCwd,i);const a=yc.dirname(e);return Be.existsSync(a)||ff(a),Be.symlinkSync(t,e,i)}var _f={createSymlink:df(yf),createSymlinkSync:Ef};const{createFile:Bs,createFileSync:qs}=Jh,{createLink:zs,createLinkSync:Gs}=rf,{createSymlink:Vs,createSymlinkSync:Ws}=_f;var bf={createFile:Bs,createFileSync:qs,ensureFile:Bs,ensureFileSync:qs,createLink:zs,createLinkSync:Gs,ensureLink:zs,ensureLinkSync:Gs,createSymlink:Vs,createSymlinkSync:Ws,ensureSymlink:Vs,ensureSymlinkSync:Ws};function Tf(t,{EOL:e=`
`,finalEOL:i=!0,replacer:n=null,spaces:r}={}){const a=i?e:"";return JSON.stringify(t,n,r).replace(/\n/g,e)+a}function Af(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}var Pa={stringify:Tf,stripBom:Af};let oi;try{oi=Ce}catch{oi=Ge}const Xn=Se,{stringify:Ac,stripBom:Sc}=Pa;async function Sf(t,e={}){typeof e=="string"&&(e={encoding:e});const i=e.fs||oi,n="throws"in e?e.throws:!0;let r=await Xn.fromCallback(i.readFile)(t,e);r=Sc(r);let a;try{a=JSON.parse(r,e?e.reviver:null)}catch(s){if(n)throw s.message=`${t}: ${s.message}`,s;return null}return a}const Cf=Xn.fromPromise(Sf);function If(t,e={}){typeof e=="string"&&(e={encoding:e});const i=e.fs||oi,n="throws"in e?e.throws:!0;try{let r=i.readFileSync(t,e);return r=Sc(r),JSON.parse(r,e.reviver)}catch(r){if(n)throw r.message=`${t}: ${r.message}`,r;return null}}async function Nf(t,e,i={}){const n=i.fs||oi,r=Ac(e,i);await Xn.fromCallback(n.writeFile)(t,r,i)}const Of=Xn.fromPromise(Nf);function Rf(t,e,i={}){const n=i.fs||oi,r=Ac(e,i);return n.writeFileSync(t,r,i)}const $f={readFile:Cf,readFileSync:If,writeFile:Of,writeFileSync:Rf};var Pf=$f;const _n=Pf;var Df={readJson:_n.readFile,readJsonSync:_n.readFileSync,writeJson:_n.writeFile,writeJsonSync:_n.writeFileSync};const kf=Se.fromCallback,Fi=Ce,Cc=se,Ic=Ze,Ff=jt.pathExists;function Lf(t,e,i,n){typeof i=="function"&&(n=i,i="utf8");const r=Cc.dirname(t);Ff(r,(a,s)=>{if(a)return n(a);if(s)return Fi.writeFile(t,e,i,n);Ic.mkdirs(r,o=>{if(o)return n(o);Fi.writeFile(t,e,i,n)})})}function Uf(t,...e){const i=Cc.dirname(t);if(Fi.existsSync(i))return Fi.writeFileSync(t,...e);Ic.mkdirsSync(i),Fi.writeFileSync(t,...e)}var Da={outputFile:kf(Lf),outputFileSync:Uf};const{stringify:Mf}=Pa,{outputFile:jf}=Da;async function Hf(t,e,i={}){const n=Mf(e,i);await jf(t,n,i)}var Bf=Hf;const{stringify:qf}=Pa,{outputFileSync:zf}=Da;function Gf(t,e,i){const n=qf(e,i);zf(t,n,i)}var Vf=Gf;const Wf=Se.fromPromise,Ae=Df;Ae.outputJson=Wf(Bf);Ae.outputJsonSync=Vf;Ae.outputJSON=Ae.outputJson;Ae.outputJSONSync=Ae.outputJsonSync;Ae.writeJSON=Ae.writeJson;Ae.writeJSONSync=Ae.writeJsonSync;Ae.readJSON=Ae.readJson;Ae.readJSONSync=Ae.readJsonSync;var Yf=Ae;const Xf=Ce,pa=se,Kf=Ra.copy,Nc=Yn.remove,Qf=Ze.mkdirp,Jf=jt.pathExists,Ys=di;function Zf(t,e,i,n){typeof i=="function"&&(n=i,i={}),i=i||{};const r=i.overwrite||i.clobber||!1;Ys.checkPaths(t,e,"move",i,(a,s)=>{if(a)return n(a);const{srcStat:o,isChangingCase:l=!1}=s;Ys.checkParentPaths(t,o,e,"move",d=>{if(d)return n(d);if(em(e))return Xs(t,e,r,l,n);Qf(pa.dirname(e),u=>u?n(u):Xs(t,e,r,l,n))})})}function em(t){const e=pa.dirname(t);return pa.parse(e).root===e}function Xs(t,e,i,n,r){if(n)return Rr(t,e,i,r);if(i)return Nc(e,a=>a?r(a):Rr(t,e,i,r));Jf(e,(a,s)=>a?r(a):s?r(new Error("dest already exists.")):Rr(t,e,i,r))}function Rr(t,e,i,n){Xf.rename(t,e,r=>r?r.code!=="EXDEV"?n(r):tm(t,e,i,n):n())}function tm(t,e,i,n){Kf(t,e,{overwrite:i,errorOnExist:!0},a=>a?n(a):Nc(t,n))}var im=Zf;const Oc=Ce,ua=se,nm=Ra.copySync,Rc=Yn.removeSync,rm=Ze.mkdirpSync,Ks=di;function am(t,e,i){i=i||{};const n=i.overwrite||i.clobber||!1,{srcStat:r,isChangingCase:a=!1}=Ks.checkPathsSync(t,e,"move",i);return Ks.checkParentPathsSync(t,r,e,"move"),sm(e)||rm(ua.dirname(e)),om(t,e,n,a)}function sm(t){const e=ua.dirname(t);return ua.parse(e).root===e}function om(t,e,i,n){if(n)return $r(t,e,i);if(i)return Rc(e),$r(t,e,i);if(Oc.existsSync(e))throw new Error("dest already exists.");return $r(t,e,i)}function $r(t,e,i){try{Oc.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return lm(t,e,i)}}function lm(t,e,i){return nm(t,e,{overwrite:i,errorOnExist:!0}),Rc(t)}var cm=am;const pm=Se.fromCallback;var um={move:pm(im),moveSync:cm},Ht={...Mt,...Ra,...Yh,...bf,...Yf,...Ze,...um,...Da,...jt,...Yn},ye={},ka={},We={};function $c(t){return typeof t>"u"||t===null}function dm(t){return typeof t=="object"&&t!==null}function hm(t){return Array.isArray(t)?t:$c(t)?[]:[t]}function fm(t,e){var i,n,r,a;if(e)for(a=Object.keys(e),i=0,n=a.length;i<n;i+=1)r=a[i],t[r]=e[r];return t}function mm(t,e){var i="",n;for(n=0;n<e;n+=1)i+=t;return i}function gm(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}We.isNothing=$c;We.isObject=dm;We.toArray=hm;We.repeat=mm;We.isNegativeZero=gm;We.extend=fm;function Pc(t,e){var i="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),n+" "+i):n}function Gi(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Pc(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Gi.prototype=Object.create(Error.prototype);Gi.prototype.constructor=Gi;Gi.prototype.toString=function(e){return this.name+": "+Pc(this,e)};var tn=Gi,Pi=We;function Pr(t,e,i,n,r){var a="",s="",o=Math.floor(r/2)-1;return n-e>o&&(a=" ... ",e=n-o+a.length),i-n>o&&(s=" ...",i=n+o-s.length),{str:a+t.slice(e,i).replace(/\t/g,"→")+s,pos:n-e+a.length}}function Dr(t,e){return Pi.repeat(" ",e-t.length)+t}function vm(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,n=[0],r=[],a,s=-1;a=i.exec(t.buffer);)r.push(a.index),n.push(a.index+a[0].length),t.position<=a.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o="",l,d,u=Math.min(t.line+e.linesAfter,r.length).toString().length,p=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(s-l<0);l++)d=Pr(t.buffer,n[s-l],r[s-l],t.position-(n[s]-n[s-l]),p),o=Pi.repeat(" ",e.indent)+Dr((t.line-l+1).toString(),u)+" | "+d.str+`
`+o;for(d=Pr(t.buffer,n[s],r[s],t.position,p),o+=Pi.repeat(" ",e.indent)+Dr((t.line+1).toString(),u)+" | "+d.str+`
`,o+=Pi.repeat("-",e.indent+u+3+d.pos)+`^
`,l=1;l<=e.linesAfter&&!(s+l>=r.length);l++)d=Pr(t.buffer,n[s+l],r[s+l],t.position-(n[s]-n[s+l]),p),o+=Pi.repeat(" ",e.indent)+Dr((t.line+l+1).toString(),u)+" | "+d.str+`
`;return o.replace(/\n$/,"")}var xm=vm,Qs=tn,wm=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ym=["scalar","sequence","mapping"];function Em(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(n){e[String(n)]=i})}),e}function _m(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(wm.indexOf(i)===-1)throw new Qs('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Em(e.styleAliases||null),ym.indexOf(this.kind)===-1)throw new Qs('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ie=_m,yi=tn,kr=Ie;function Js(t,e){var i=[];return t[e].forEach(function(n){var r=i.length;i.forEach(function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(r=s)}),i[r]=n}),i}function bm(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function n(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(n);return t}function da(t){return this.extend(t)}da.prototype.extend=function(e){var i=[],n=[];if(e instanceof kr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new yi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(a){if(!(a instanceof kr))throw new yi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new yi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new yi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(a){if(!(a instanceof kr))throw new yi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(da.prototype);return r.implicit=(this.implicit||[]).concat(i),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Js(r,"implicit"),r.compiledExplicit=Js(r,"explicit"),r.compiledTypeMap=bm(r.compiledImplicit,r.compiledExplicit),r};var Dc=da,Tm=Ie,kc=new Tm("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Am=Ie,Fc=new Am("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Sm=Ie,Lc=new Sm("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Cm=Dc,Uc=new Cm({explicit:[kc,Fc,Lc]}),Im=Ie;function Nm(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Om(){return null}function Rm(t){return t===null}var Mc=new Im("tag:yaml.org,2002:null",{kind:"scalar",resolve:Nm,construct:Om,predicate:Rm,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),$m=Ie;function Pm(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Dm(t){return t==="true"||t==="True"||t==="TRUE"}function km(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var jc=new $m("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Pm,construct:Dm,predicate:km,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"}),Fm=We,Lm=Ie;function Um(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Mm(t){return 48<=t&&t<=55}function jm(t){return 48<=t&&t<=57}function Hm(t){if(t===null)return!1;var e=t.length,i=0,n=!1,r;if(!e)return!1;if(r=t[i],(r==="-"||r==="+")&&(r=t[++i]),r==="0"){if(i+1===e)return!0;if(r=t[++i],r==="b"){for(i++;i<e;i++)if(r=t[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(i++;i<e;i++)if(r=t[i],r!=="_"){if(!Um(t.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}if(r==="o"){for(i++;i<e;i++)if(r=t[i],r!=="_"){if(!Mm(t.charCodeAt(i)))return!1;n=!0}return n&&r!=="_"}}if(r==="_")return!1;for(;i<e;i++)if(r=t[i],r!=="_"){if(!jm(t.charCodeAt(i)))return!1;n=!0}return!(!n||r==="_")}function Bm(t){var e=t,i=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(i=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function qm(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Fm.isNegativeZero(t)}var Hc=new Lm("tag:yaml.org,2002:int",{kind:"scalar",resolve:Hm,construct:Bm,predicate:qm,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Bc=We,zm=Ie,Gm=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Vm(t){return!(t===null||!Gm.test(t)||t[t.length-1]==="_")}function Wm(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var Ym=/^[-+]?[0-9]+e/;function Xm(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Bc.isNegativeZero(t))return"-0.0";return i=t.toString(10),Ym.test(i)?i.replace("e",".e"):i}function Km(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Bc.isNegativeZero(t))}var qc=new zm("tag:yaml.org,2002:float",{kind:"scalar",resolve:Vm,construct:Wm,predicate:Km,represent:Xm,defaultStyle:"lowercase"}),zc=Uc.extend({implicit:[Mc,jc,Hc,qc]}),Gc=zc,Qm=Ie,Vc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Wc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Jm(t){return t===null?!1:Vc.exec(t)!==null||Wc.exec(t)!==null}function Zm(t){var e,i,n,r,a,s,o,l=0,d=null,u,p,c;if(e=Vc.exec(t),e===null&&(e=Wc.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],n=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(i,n,r));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],p=+(e[11]||0),d=(u*60+p)*6e4,e[9]==="-"&&(d=-d)),c=new Date(Date.UTC(i,n,r,a,s,o,l)),d&&c.setTime(c.getTime()-d),c}function eg(t){return t.toISOString()}var Yc=new Qm("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Jm,construct:Zm,instanceOf:Date,represent:eg}),tg=Ie;function ig(t){return t==="<<"||t===null}var Xc=new tg("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ig}),ng=Ie,Fa=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function rg(t){if(t===null)return!1;var e,i,n=0,r=t.length,a=Fa;for(i=0;i<r;i++)if(e=a.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function ag(t){var e,i,n=t.replace(/[\r\n=]/g,""),r=n.length,a=Fa,s=0,o=[];for(e=0;e<r;e++)e%4===0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)),s=s<<6|a.indexOf(n.charAt(e));return i=r%4*6,i===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(s&255)):i===18?(o.push(s>>10&255),o.push(s>>2&255)):i===12&&o.push(s>>4&255),new Uint8Array(o)}function sg(t){var e="",i=0,n,r,a=t.length,s=Fa;for(n=0;n<a;n++)n%3===0&&n&&(e+=s[i>>18&63],e+=s[i>>12&63],e+=s[i>>6&63],e+=s[i&63]),i=(i<<8)+t[n];return r=a%3,r===0?(e+=s[i>>18&63],e+=s[i>>12&63],e+=s[i>>6&63],e+=s[i&63]):r===2?(e+=s[i>>10&63],e+=s[i>>4&63],e+=s[i<<2&63],e+=s[64]):r===1&&(e+=s[i>>2&63],e+=s[i<<4&63],e+=s[64],e+=s[64]),e}function og(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Kc=new ng("tag:yaml.org,2002:binary",{kind:"scalar",resolve:rg,construct:ag,predicate:og,represent:sg}),lg=Ie,cg=Object.prototype.hasOwnProperty,pg=Object.prototype.toString;function ug(t){if(t===null)return!0;var e=[],i,n,r,a,s,o=t;for(i=0,n=o.length;i<n;i+=1){if(r=o[i],s=!1,pg.call(r)!=="[object Object]")return!1;for(a in r)if(cg.call(r,a))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function dg(t){return t!==null?t:[]}var Qc=new lg("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ug,construct:dg}),hg=Ie,fg=Object.prototype.toString;function mg(t){if(t===null)return!0;var e,i,n,r,a,s=t;for(a=new Array(s.length),e=0,i=s.length;e<i;e+=1){if(n=s[e],fg.call(n)!=="[object Object]"||(r=Object.keys(n),r.length!==1))return!1;a[e]=[r[0],n[r[0]]]}return!0}function gg(t){if(t===null)return[];var e,i,n,r,a,s=t;for(a=new Array(s.length),e=0,i=s.length;e<i;e+=1)n=s[e],r=Object.keys(n),a[e]=[r[0],n[r[0]]];return a}var Jc=new hg("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:mg,construct:gg}),vg=Ie,xg=Object.prototype.hasOwnProperty;function wg(t){if(t===null)return!0;var e,i=t;for(e in i)if(xg.call(i,e)&&i[e]!==null)return!1;return!0}function yg(t){return t!==null?t:{}}var Zc=new vg("tag:yaml.org,2002:set",{kind:"mapping",resolve:wg,construct:yg}),La=Gc.extend({implicit:[Yc,Xc],explicit:[Kc,Qc,Jc,Zc]}),Rt=We,ep=tn,Eg=xm,_g=La,wt=Object.prototype.hasOwnProperty,Un=1,tp=2,ip=3,Mn=4,Fr=1,bg=2,Zs=3,Tg=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ag=/[\x85\u2028\u2029]/,Sg=/[,\[\]\{\}]/,np=/^(?:!|!!|![a-z\-]+!)$/i,rp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function eo(t){return Object.prototype.toString.call(t)}function Je(t){return t===10||t===13}function kt(t){return t===9||t===32}function Re(t){return t===9||t===32||t===10||t===13}function Zt(t){return t===44||t===91||t===93||t===123||t===125}function Cg(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Ig(t){return t===120?2:t===117?4:t===85?8:0}function Ng(t){return 48<=t&&t<=57?t-48:-1}function to(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function Og(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var ap=new Array(256),sp=new Array(256);for(var zt=0;zt<256;zt++)ap[zt]=to(zt)?1:0,sp[zt]=to(zt);function Rg(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||_g,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function op(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=Eg(i),new ep(e,i)}function z(t,e){throw op(t,e)}function jn(t,e){t.onWarning&&t.onWarning.call(null,op(t,e))}var io={YAML:function(e,i,n){var r,a,s;e.version!==null&&z(e,"duplication of %YAML directive"),n.length!==1&&z(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),r===null&&z(e,"ill-formed argument of the YAML directive"),a=parseInt(r[1],10),s=parseInt(r[2],10),a!==1&&z(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&jn(e,"unsupported YAML version of the document")},TAG:function(e,i,n){var r,a;n.length!==2&&z(e,"TAG directive accepts exactly two arguments"),r=n[0],a=n[1],np.test(r)||z(e,"ill-formed tag handle (first argument) of the TAG directive"),wt.call(e.tagMap,r)&&z(e,'there is a previously declared suffix for "'+r+'" tag handle'),rp.test(a)||z(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{z(e,"tag prefix is malformed: "+a)}e.tagMap[r]=a}};function xt(t,e,i,n){var r,a,s,o;if(e<i){if(o=t.input.slice(e,i),n)for(r=0,a=o.length;r<a;r+=1)s=o.charCodeAt(r),s===9||32<=s&&s<=1114111||z(t,"expected valid JSON character");else Tg.test(o)&&z(t,"the stream contains non-printable characters");t.result+=o}}function no(t,e,i,n){var r,a,s,o;for(Rt.isObject(i)||z(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(i),s=0,o=r.length;s<o;s+=1)a=r[s],wt.call(e,a)||(e[a]=i[a],n[a]=!0)}function ei(t,e,i,n,r,a,s,o,l){var d,u;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),d=0,u=r.length;d<u;d+=1)Array.isArray(r[d])&&z(t,"nested arrays are not supported inside keys"),typeof r=="object"&&eo(r[d])==="[object Object]"&&(r[d]="[object Object]");if(typeof r=="object"&&eo(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(d=0,u=a.length;d<u;d+=1)no(t,e,a[d],i);else no(t,e,a,i);else!t.json&&!wt.call(i,r)&&wt.call(e,r)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,z(t,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[r]=a,delete i[r];return e}function Ua(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):z(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function le(t,e,i){for(var n=0,r=t.input.charCodeAt(t.position);r!==0;){for(;kt(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(Je(r))for(Ua(t),r=t.input.charCodeAt(t.position),n++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return i!==-1&&n!==0&&t.lineIndent<i&&jn(t,"deficient indentation"),n}function Kn(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Re(i)))}function Ma(t,e){e===1?t.result+=" ":e>1&&(t.result+=Rt.repeat(`
`,e-1))}function $g(t,e,i){var n,r,a,s,o,l,d,u,p=t.kind,c=t.result,h;if(h=t.input.charCodeAt(t.position),Re(h)||Zt(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(r=t.input.charCodeAt(t.position+1),Re(r)||i&&Zt(r)))return!1;for(t.kind="scalar",t.result="",a=s=t.position,o=!1;h!==0;){if(h===58){if(r=t.input.charCodeAt(t.position+1),Re(r)||i&&Zt(r))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),Re(n))break}else{if(t.position===t.lineStart&&Kn(t)||i&&Zt(h))break;if(Je(h))if(l=t.line,d=t.lineStart,u=t.lineIndent,le(t,!1,-1),t.lineIndent>=e){o=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=d,t.lineIndent=u;break}}o&&(xt(t,a,s,!1),Ma(t,t.line-l),a=s=t.position,o=!1),kt(h)||(s=t.position+1),h=t.input.charCodeAt(++t.position)}return xt(t,a,s,!1),t.result?!0:(t.kind=p,t.result=c,!1)}function Pg(t,e){var i,n,r;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(xt(t,n,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)n=t.position,t.position++,r=t.position;else return!0;else Je(i)?(xt(t,n,r,!0),Ma(t,le(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Kn(t)?z(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);z(t,"unexpected end of the stream within a single quoted scalar")}function Dg(t,e){var i,n,r,a,s,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return xt(t,i,t.position,!0),t.position++,!0;if(o===92){if(xt(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),Je(o))le(t,!1,e);else if(o<256&&ap[o])t.result+=sp[o],t.position++;else if((s=Ig(o))>0){for(r=s,a=0;r>0;r--)o=t.input.charCodeAt(++t.position),(s=Cg(o))>=0?a=(a<<4)+s:z(t,"expected hexadecimal character");t.result+=Og(a),t.position++}else z(t,"unknown escape sequence");i=n=t.position}else Je(o)?(xt(t,i,n,!0),Ma(t,le(t,!1,e)),i=n=t.position):t.position===t.lineStart&&Kn(t)?z(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}z(t,"unexpected end of the stream within a double quoted scalar")}function kg(t,e){var i=!0,n,r,a,s=t.tag,o,l=t.anchor,d,u,p,c,h,_=Object.create(null),A,w,E,f;if(f=t.input.charCodeAt(t.position),f===91)u=93,h=!1,o=[];else if(f===123)u=125,h=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),f=t.input.charCodeAt(++t.position);f!==0;){if(le(t,!0,e),f=t.input.charCodeAt(t.position),f===u)return t.position++,t.tag=s,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=o,!0;i?f===44&&z(t,"expected the node content, but found ','"):z(t,"missed comma between flow collection entries"),w=A=E=null,p=c=!1,f===63&&(d=t.input.charCodeAt(t.position+1),Re(d)&&(p=c=!0,t.position++,le(t,!0,e))),n=t.line,r=t.lineStart,a=t.position,li(t,e,Un,!1,!0),w=t.tag,A=t.result,le(t,!0,e),f=t.input.charCodeAt(t.position),(c||t.line===n)&&f===58&&(p=!0,f=t.input.charCodeAt(++t.position),le(t,!0,e),li(t,e,Un,!1,!0),E=t.result),h?ei(t,o,_,w,A,E,n,r,a):p?o.push(ei(t,null,_,w,A,E,n,r,a)):o.push(A),le(t,!0,e),f=t.input.charCodeAt(t.position),f===44?(i=!0,f=t.input.charCodeAt(++t.position)):i=!1}z(t,"unexpected end of the stream within a flow collection")}function Fg(t,e){var i,n,r=Fr,a=!1,s=!1,o=e,l=0,d=!1,u,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Fr===r?r=p===43?Zs:bg:z(t,"repeat of a chomping mode identifier");else if((u=Ng(p))>=0)u===0?z(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?z(t,"repeat of an indentation width identifier"):(o=e+u-1,s=!0);else break;if(kt(p)){do p=t.input.charCodeAt(++t.position);while(kt(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!Je(p)&&p!==0)}for(;p!==0;){for(Ua(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!s||t.lineIndent<o)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>o&&(o=t.lineIndent),Je(p)){l++;continue}if(t.lineIndent<o){r===Zs?t.result+=Rt.repeat(`
`,a?1+l:l):r===Fr&&a&&(t.result+=`
`);break}for(n?kt(p)?(d=!0,t.result+=Rt.repeat(`
`,a?1+l:l)):d?(d=!1,t.result+=Rt.repeat(`
`,l+1)):l===0?a&&(t.result+=" "):t.result+=Rt.repeat(`
`,l):t.result+=Rt.repeat(`
`,a?1+l:l),a=!0,s=!0,l=0,i=t.position;!Je(p)&&p!==0;)p=t.input.charCodeAt(++t.position);xt(t,i,t.position,!1)}return!0}function ro(t,e){var i,n=t.tag,r=t.anchor,a=[],s,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,z(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!Re(s))));){if(o=!0,t.position++,le(t,!0,-1)&&t.lineIndent<=e){a.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,li(t,e,ip,!1,!0),a.push(t.result),le(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)z(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=r,t.kind="sequence",t.result=a,!0):!1}function Lg(t,e,i){var n,r,a,s,o,l,d=t.tag,u=t.anchor,p={},c=Object.create(null),h=null,_=null,A=null,w=!1,E=!1,f;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),f=t.input.charCodeAt(t.position);f!==0;){if(!w&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,z(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),a=t.line,(f===63||f===58)&&Re(n))f===63?(w&&(ei(t,p,c,h,_,null,s,o,l),h=_=A=null),E=!0,w=!0,r=!0):w?(w=!1,r=!0):z(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,f=n;else{if(s=t.line,o=t.lineStart,l=t.position,!li(t,i,tp,!1,!0))break;if(t.line===a){for(f=t.input.charCodeAt(t.position);kt(f);)f=t.input.charCodeAt(++t.position);if(f===58)f=t.input.charCodeAt(++t.position),Re(f)||z(t,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(ei(t,p,c,h,_,null,s,o,l),h=_=A=null),E=!0,w=!1,r=!1,h=t.tag,_=t.result;else if(E)z(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=d,t.anchor=u,!0}else if(E)z(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=d,t.anchor=u,!0}if((t.line===a||t.lineIndent>e)&&(w&&(s=t.line,o=t.lineStart,l=t.position),li(t,e,Mn,!0,r)&&(w?_=t.result:A=t.result),w||(ei(t,p,c,h,_,A,s,o,l),h=_=A=null),le(t,!0,-1),f=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&f!==0)z(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return w&&ei(t,p,c,h,_,null,s,o,l),E&&(t.tag=d,t.anchor=u,t.kind="mapping",t.result=p),E}function Ug(t){var e,i=!1,n=!1,r,a,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&z(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(i=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,r="!!",s=t.input.charCodeAt(++t.position)):r="!",e=t.position,i){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(a=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):z(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Re(s);)s===33&&(n?z(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),np.test(r)||z(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),Sg.test(a)&&z(t,"tag suffix cannot contain flow indicator characters")}a&&!rp.test(a)&&z(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{z(t,"tag name is malformed: "+a)}return i?t.tag=a:wt.call(t.tagMap,r)?t.tag=t.tagMap[r]+a:r==="!"?t.tag="!"+a:r==="!!"?t.tag="tag:yaml.org,2002:"+a:z(t,'undeclared tag handle "'+r+'"'),!0}function Mg(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&z(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Re(i)&&!Zt(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&z(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function jg(t){var e,i,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Re(n)&&!Zt(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&z(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),wt.call(t.anchorMap,i)||z(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],le(t,!0,-1),!0}function li(t,e,i,n,r){var a,s,o,l=1,d=!1,u=!1,p,c,h,_,A,w;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=Mn===i||ip===i,n&&le(t,!0,-1)&&(d=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Ug(t)||Mg(t);)le(t,!0,-1)?(d=!0,o=a,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=d||r),(l===1||Mn===i)&&(Un===i||tp===i?A=e:A=e+1,w=t.position-t.lineStart,l===1?o&&(ro(t,w)||Lg(t,w,A))||kg(t,A)?u=!0:(s&&Fg(t,A)||Pg(t,A)||Dg(t,A)?u=!0:jg(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&z(t,"alias node should not have any properties")):$g(t,A,Un===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&ro(t,w))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&z(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,c=t.implicitTypes.length;p<c;p+=1)if(_=t.implicitTypes[p],_.resolve(t.result)){t.result=_.construct(t.result),t.tag=_.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(wt.call(t.typeMap[t.kind||"fallback"],t.tag))_=t.typeMap[t.kind||"fallback"][t.tag];else for(_=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,c=h.length;p<c;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){_=h[p];break}_||z(t,"unknown tag !<"+t.tag+">"),t.result!==null&&_.kind!==t.kind&&z(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+_.kind+'", not "'+t.kind+'"'),_.resolve(t.result,t.tag)?(t.result=_.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):z(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Hg(t){var e=t.position,i,n,r,a=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(le(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(a=!0,s=t.input.charCodeAt(++t.position),i=t.position;s!==0&&!Re(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(i,t.position),r=[],n.length<1&&z(t,"directive name must not be less than one character in length");s!==0;){for(;kt(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Je(s));break}if(Je(s))break;for(i=t.position;s!==0&&!Re(s);)s=t.input.charCodeAt(++t.position);r.push(t.input.slice(i,t.position))}s!==0&&Ua(t),wt.call(io,n)?io[n](t,n,r):jn(t,'unknown document directive "'+n+'"')}if(le(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,le(t,!0,-1)):a&&z(t,"directives end mark is expected"),li(t,t.lineIndent-1,Mn,!1,!0),le(t,!0,-1),t.checkLineBreaks&&Ag.test(t.input.slice(e,t.position))&&jn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Kn(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,le(t,!0,-1));return}if(t.position<t.length-1)z(t,"end of the stream or a document separator is expected");else return}function lp(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new Rg(t,e),n=t.indexOf("\0");for(n!==-1&&(i.position=n,z(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Hg(i);return i.documents}function Bg(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var n=lp(t,i);if(typeof e!="function")return n;for(var r=0,a=n.length;r<a;r+=1)e(n[r])}function qg(t,e){var i=lp(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new ep("expected a single document in the stream, but found more")}}ka.loadAll=Bg;ka.load=qg;var cp={},Qn=We,nn=tn,zg=La,pp=Object.prototype.toString,up=Object.prototype.hasOwnProperty,ja=65279,Gg=9,Vi=10,Vg=13,Wg=32,Yg=33,Xg=34,ha=35,Kg=37,Qg=38,Jg=39,Zg=42,dp=44,ev=45,Hn=58,tv=61,iv=62,nv=63,rv=64,hp=91,fp=93,av=96,mp=123,sv=124,gp=125,Te={};Te[0]="\\0";Te[7]="\\a";Te[8]="\\b";Te[9]="\\t";Te[10]="\\n";Te[11]="\\v";Te[12]="\\f";Te[13]="\\r";Te[27]="\\e";Te[34]='\\"';Te[92]="\\\\";Te[133]="\\N";Te[160]="\\_";Te[8232]="\\L";Te[8233]="\\P";var ov=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],lv=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function cv(t,e){var i,n,r,a,s,o,l;if(e===null)return{};for(i={},n=Object.keys(e),r=0,a=n.length;r<a;r+=1)s=n[r],o=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&up.call(l.styleAliases,o)&&(o=l.styleAliases[o]),i[s]=o;return i}function pv(t){var e,i,n;if(e=t.toString(16).toUpperCase(),t<=255)i="x",n=2;else if(t<=65535)i="u",n=4;else if(t<=4294967295)i="U",n=8;else throw new nn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+Qn.repeat("0",n-e.length)+e}var uv=1,Wi=2;function dv(t){this.schema=t.schema||zg,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Qn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=cv(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Wi:uv,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ao(t,e){for(var i=Qn.repeat(" ",e),n=0,r=-1,a="",s,o=t.length;n<o;)r=t.indexOf(`
`,n),r===-1?(s=t.slice(n),n=o):(s=t.slice(n,r+1),n=r+1),s.length&&s!==`
`&&(a+=i),a+=s;return a}function fa(t,e){return`
`+Qn.repeat(" ",t.indent*e)}function hv(t,e){var i,n,r;for(i=0,n=t.implicitTypes.length;i<n;i+=1)if(r=t.implicitTypes[i],r.resolve(e))return!0;return!1}function Bn(t){return t===Wg||t===Gg}function Yi(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ja||65536<=t&&t<=1114111}function so(t){return Yi(t)&&t!==ja&&t!==Vg&&t!==Vi}function oo(t,e,i){var n=so(t),r=n&&!Bn(t);return(i?n:n&&t!==dp&&t!==hp&&t!==fp&&t!==mp&&t!==gp)&&t!==ha&&!(e===Hn&&!r)||so(e)&&!Bn(e)&&t===ha||e===Hn&&r}function fv(t){return Yi(t)&&t!==ja&&!Bn(t)&&t!==ev&&t!==nv&&t!==Hn&&t!==dp&&t!==hp&&t!==fp&&t!==mp&&t!==gp&&t!==ha&&t!==Qg&&t!==Zg&&t!==Yg&&t!==sv&&t!==tv&&t!==iv&&t!==Jg&&t!==Xg&&t!==Kg&&t!==rv&&t!==av}function mv(t){return!Bn(t)&&t!==Hn}function Di(t,e){var i=t.charCodeAt(e),n;return i>=55296&&i<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(i-55296)*1024+n-56320+65536:i}function vp(t){var e=/^\n* /;return e.test(t)}var xp=1,ma=2,wp=3,yp=4,Jt=5;function gv(t,e,i,n,r,a,s,o){var l,d=0,u=null,p=!1,c=!1,h=n!==-1,_=-1,A=fv(Di(t,0))&&mv(Di(t,t.length-1));if(e||s)for(l=0;l<t.length;d>=65536?l+=2:l++){if(d=Di(t,l),!Yi(d))return Jt;A=A&&oo(d,u,o),u=d}else{for(l=0;l<t.length;d>=65536?l+=2:l++){if(d=Di(t,l),d===Vi)p=!0,h&&(c=c||l-_-1>n&&t[_+1]!==" ",_=l);else if(!Yi(d))return Jt;A=A&&oo(d,u,o),u=d}c=c||h&&l-_-1>n&&t[_+1]!==" "}return!p&&!c?A&&!s&&!r(t)?xp:a===Wi?Jt:ma:i>9&&vp(t)?Jt:s?a===Wi?Jt:ma:c?yp:wp}function vv(t,e,i,n,r){t.dump=function(){if(e.length===0)return t.quotingType===Wi?'""':"''";if(!t.noCompatMode&&(ov.indexOf(e)!==-1||lv.test(e)))return t.quotingType===Wi?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,i),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=n||t.flowLevel>-1&&i>=t.flowLevel;function l(d){return hv(t,d)}switch(gv(e,o,t.indent,s,l,t.quotingType,t.forceQuotes&&!n,r)){case xp:return e;case ma:return"'"+e.replace(/'/g,"''")+"'";case wp:return"|"+lo(e,t.indent)+co(ao(e,a));case yp:return">"+lo(e,t.indent)+co(ao(xv(e,s),a));case Jt:return'"'+wv(e)+'"';default:throw new nn("impossible error: invalid scalar style")}}()}function lo(t,e){var i=vp(t)?String(e):"",n=t[t.length-1]===`
`,r=n&&(t[t.length-2]===`
`||t===`
`),a=r?"+":n?"":"-";return i+a+`
`}function co(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function xv(t,e){for(var i=/(\n+)([^\n]*)/g,n=function(){var d=t.indexOf(`
`);return d=d!==-1?d:t.length,i.lastIndex=d,po(t.slice(0,d),e)}(),r=t[0]===`
`||t[0]===" ",a,s;s=i.exec(t);){var o=s[1],l=s[2];a=l[0]===" ",n+=o+(!r&&!a&&l!==""?`
`:"")+po(l,e),r=a}return n}function po(t,e){if(t===""||t[0]===" ")return t;for(var i=/ [^ ]/g,n,r=0,a,s=0,o=0,l="";n=i.exec(t);)o=n.index,o-r>e&&(a=s>r?s:o,l+=`
`+t.slice(r,a),r=a+1),s=o;return l+=`
`,t.length-r>e&&s>r?l+=t.slice(r,s)+`
`+t.slice(s+1):l+=t.slice(r),l.slice(1)}function wv(t){for(var e="",i=0,n,r=0;r<t.length;i>=65536?r+=2:r++)i=Di(t,r),n=Te[i],!n&&Yi(i)?(e+=t[r],i>=65536&&(e+=t[r+1])):e+=n||pv(i);return e}function yv(t,e,i){var n="",r=t.tag,a,s,o;for(a=0,s=i.length;a<s;a+=1)o=i[a],t.replacer&&(o=t.replacer.call(i,String(a),o)),(ot(t,e,o,!1,!1)||typeof o>"u"&&ot(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=r,t.dump="["+n+"]"}function uo(t,e,i,n){var r="",a=t.tag,s,o,l;for(s=0,o=i.length;s<o;s+=1)l=i[s],t.replacer&&(l=t.replacer.call(i,String(s),l)),(ot(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&ot(t,e+1,null,!0,!0,!1,!0))&&((!n||r!=="")&&(r+=fa(t,e)),t.dump&&Vi===t.dump.charCodeAt(0)?r+="-":r+="- ",r+=t.dump);t.tag=a,t.dump=r||"[]"}function Ev(t,e,i){var n="",r=t.tag,a=Object.keys(i),s,o,l,d,u;for(s=0,o=a.length;s<o;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=a[s],d=i[l],t.replacer&&(d=t.replacer.call(i,l,d)),ot(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ot(t,e,d,!1,!1)&&(u+=t.dump,n+=u));t.tag=r,t.dump="{"+n+"}"}function _v(t,e,i,n){var r="",a=t.tag,s=Object.keys(i),o,l,d,u,p,c;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new nn("sortKeys must be a boolean or a function");for(o=0,l=s.length;o<l;o+=1)c="",(!n||r!=="")&&(c+=fa(t,e)),d=s[o],u=i[d],t.replacer&&(u=t.replacer.call(i,d,u)),ot(t,e+1,d,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&Vi===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,p&&(c+=fa(t,e)),ot(t,e+1,u,!0,p)&&(t.dump&&Vi===t.dump.charCodeAt(0)?c+=":":c+=": ",c+=t.dump,r+=c));t.tag=a,t.dump=r||"{}"}function ho(t,e,i){var n,r,a,s,o,l;for(r=i?t.explicitTypes:t.implicitTypes,a=0,s=r.length;a<s;a+=1)if(o=r[a],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(i?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(l=t.styleMap[o.tag]||o.defaultStyle,pp.call(o.represent)==="[object Function]")n=o.represent(e,l);else if(up.call(o.represent,l))n=o.represent[l](e,l);else throw new nn("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}function ot(t,e,i,n,r,a,s){t.tag=null,t.dump=i,ho(t,i,!1)||ho(t,i,!0);var o=pp.call(t.dump),l=n,d;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=o==="[object Object]"||o==="[object Array]",p,c;if(u&&(p=t.duplicates.indexOf(i),c=p!==-1),(t.tag!==null&&t.tag!=="?"||c||t.indent!==2&&e>0)&&(r=!1),c&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(u&&c&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?(_v(t,e,t.dump,r),c&&(t.dump="&ref_"+p+t.dump)):(Ev(t,e,t.dump),c&&(t.dump="&ref_"+p+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?uo(t,e-1,t.dump,r):uo(t,e,t.dump,r),c&&(t.dump="&ref_"+p+t.dump)):(yv(t,e,t.dump),c&&(t.dump="&ref_"+p+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&vv(t,t.dump,e,a,l);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new nn("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(d=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",t.dump=d+" "+t.dump)}return!0}function bv(t,e){var i=[],n=[],r,a;for(ga(t,i,n),r=0,a=n.length;r<a;r+=1)e.duplicates.push(i[n[r]]);e.usedDuplicates=new Array(a)}function ga(t,e,i){var n,r,a;if(t!==null&&typeof t=="object")if(r=e.indexOf(t),r!==-1)i.indexOf(r)===-1&&i.push(r);else if(e.push(t),Array.isArray(t))for(r=0,a=t.length;r<a;r+=1)ga(t[r],e,i);else for(n=Object.keys(t),r=0,a=n.length;r<a;r+=1)ga(t[n[r]],e,i)}function Tv(t,e){e=e||{};var i=new dv(e);i.noRefs||bv(t,i);var n=t;return i.replacer&&(n=i.replacer.call({"":n},"",n)),ot(i,0,n,!0,!0)?i.dump+`
`:""}cp.dump=Tv;var Ep=ka,Av=cp;function Ha(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}ye.Type=Ie;ye.Schema=Dc;ye.FAILSAFE_SCHEMA=Uc;ye.JSON_SCHEMA=zc;ye.CORE_SCHEMA=Gc;ye.DEFAULT_SCHEMA=La;ye.load=Ep.load;ye.loadAll=Ep.loadAll;ye.dump=Av.dump;ye.YAMLException=tn;ye.types={binary:Kc,float:qc,map:Lc,null:Mc,pairs:Jc,set:Zc,timestamp:Yc,bool:jc,int:Hc,merge:Xc,omap:Qc,seq:Fc,str:kc};ye.safeLoad=Ha("safeLoad","load");ye.safeLoadAll=Ha("safeLoadAll","loadAll");ye.safeDump=Ha("safeDump","dump");var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Lazy=void 0;class Sv{constructor(e){this._value=null,this.creator=e}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const e=this.creator();return this.value=e,e}set value(e){this._value=e,this.creator=null}}Jn.Lazy=Sv;var va={exports:{}};const Cv="2.0.0",Iv=256,Nv=Number.MAX_SAFE_INTEGER||9007199254740991,Ov=16,Rv=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Zn={MAX_LENGTH:Iv,MAX_SAFE_COMPONENT_LENGTH:Ov,MAX_SAFE_INTEGER:Nv,RELEASE_TYPES:Rv,SEMVER_SPEC_VERSION:Cv,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const $v=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var er=$v;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:i}=Zn,n=er;e=t.exports={};const r=e.re=[],a=e.src=[],s=e.t={};let o=0;const l=(d,u,p)=>{const c=o++;n(d,c,u),s[d]=c,a[c]=u,r[c]=new RegExp(u,p?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),l("FULL",`^${a[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),l("LOOSE",`^${a[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),l("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),l("COERCERTL",a[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",l("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",l("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(va,va.exports);var rn=va.exports;const Pv=Object.freeze({loose:!0}),Dv=Object.freeze({}),kv=t=>t?typeof t!="object"?Pv:t:Dv;var Ba=kv;const fo=/^[0-9]+$/,_p=(t,e)=>{const i=fo.test(t),n=fo.test(e);return i&&n&&(t=+t,e=+e),t===e?0:i&&!n?-1:n&&!i?1:t<e?-1:1},Fv=(t,e)=>_p(e,t);var bp={compareIdentifiers:_p,rcompareIdentifiers:Fv};const bn=er,{MAX_LENGTH:mo,MAX_SAFE_INTEGER:Tn}=Zn,{re:go,t:vo}=rn,Lv=Ba,{compareIdentifiers:Gt}=bp;let Uv=class Qe{constructor(e,i){if(i=Lv(i),e instanceof Qe){if(e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>mo)throw new TypeError(`version is longer than ${mo} characters`);bn("SemVer",e,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const n=e.trim().match(i.loose?go[vo.LOOSE]:go[vo.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Tn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Tn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Tn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const a=+r;if(a>=0&&a<Tn)return a}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(bn("SemVer.compare",this.version,this.options,e),!(e instanceof Qe)){if(typeof e=="string"&&e===this.version)return 0;e=new Qe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Qe||(e=new Qe(e,this.options)),Gt(this.major,e.major)||Gt(this.minor,e.minor)||Gt(this.patch,e.patch)}comparePre(e){if(e instanceof Qe||(e=new Qe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let i=0;do{const n=this.prerelease[i],r=e.prerelease[i];if(bn("prerelease compare",i,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Gt(n,r)}while(++i)}compareBuild(e){e instanceof Qe||(e=new Qe(e,this.options));let i=0;do{const n=this.build[i],r=e.build[i];if(bn("prerelease compare",i,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Gt(n,r)}while(++i)}inc(e,i,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,n),this.inc("pre",i,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,n),this.inc("pre",i,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(n)?1:0;if(!i&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(i===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(i){let a=[i,r];n===!1&&(a=[i]),Gt(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var Ne=Uv;const xo=Ne,Mv=(t,e,i=!1)=>{if(t instanceof xo)return t;try{return new xo(t,e)}catch(n){if(!i)return null;throw n}};var hi=Mv;const jv=hi,Hv=(t,e)=>{const i=jv(t,e);return i?i.version:null};var Bv=Hv;const qv=hi,zv=(t,e)=>{const i=qv(t.trim().replace(/^[=v]+/,""),e);return i?i.version:null};var Gv=zv;const wo=Ne,Vv=(t,e,i,n,r)=>{typeof i=="string"&&(r=n,n=i,i=void 0);try{return new wo(t instanceof wo?t.version:t,i).inc(e,n,r).version}catch{return null}};var Wv=Vv;const yo=hi,Yv=(t,e)=>{const i=yo(t,null,!0),n=yo(e,null,!0),r=i.compare(n);if(r===0)return null;const a=r>0,s=a?i:n,o=a?n:i,l=!!s.prerelease.length,d=l?"pre":"";return i.major!==n.major?d+"major":i.minor!==n.minor?d+"minor":i.patch!==n.patch?d+"patch":l?"prerelease":o.patch?"patch":o.minor?"minor":"major"};var Xv=Yv;const Kv=Ne,Qv=(t,e)=>new Kv(t,e).major;var Jv=Qv;const Zv=Ne,ex=(t,e)=>new Zv(t,e).minor;var tx=ex;const ix=Ne,nx=(t,e)=>new ix(t,e).patch;var rx=nx;const ax=hi,sx=(t,e)=>{const i=ax(t,e);return i&&i.prerelease.length?i.prerelease:null};var ox=sx;const Eo=Ne,lx=(t,e,i)=>new Eo(t,i).compare(new Eo(e,i));var Ye=lx;const cx=Ye,px=(t,e,i)=>cx(e,t,i);var ux=px;const dx=Ye,hx=(t,e)=>dx(t,e,!0);var fx=hx;const _o=Ne,mx=(t,e,i)=>{const n=new _o(t,i),r=new _o(e,i);return n.compare(r)||n.compareBuild(r)};var qa=mx;const gx=qa,vx=(t,e)=>t.sort((i,n)=>gx(i,n,e));var xx=vx;const wx=qa,yx=(t,e)=>t.sort((i,n)=>wx(n,i,e));var Ex=yx;const _x=Ye,bx=(t,e,i)=>_x(t,e,i)>0;var tr=bx;const Tx=Ye,Ax=(t,e,i)=>Tx(t,e,i)<0;var za=Ax;const Sx=Ye,Cx=(t,e,i)=>Sx(t,e,i)===0;var Tp=Cx;const Ix=Ye,Nx=(t,e,i)=>Ix(t,e,i)!==0;var Ap=Nx;const Ox=Ye,Rx=(t,e,i)=>Ox(t,e,i)>=0;var Ga=Rx;const $x=Ye,Px=(t,e,i)=>$x(t,e,i)<=0;var Va=Px;const Dx=Tp,kx=Ap,Fx=tr,Lx=Ga,Ux=za,Mx=Va,jx=(t,e,i,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t===i;case"!==":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t!==i;case"":case"=":case"==":return Dx(t,i,n);case"!=":return kx(t,i,n);case">":return Fx(t,i,n);case">=":return Lx(t,i,n);case"<":return Ux(t,i,n);case"<=":return Mx(t,i,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var Sp=jx;const Hx=Ne,Bx=hi,{re:An,t:Sn}=rn,qx=(t,e)=>{if(t instanceof Hx)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let i=null;if(!e.rtl)i=t.match(An[Sn.COERCE]);else{let n;for(;(n=An[Sn.COERCERTL].exec(t))&&(!i||i.index+i[0].length!==t.length);)(!i||n.index+n[0].length!==i.index+i[0].length)&&(i=n),An[Sn.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;An[Sn.COERCERTL].lastIndex=-1}return i===null?null:Bx(`${i[2]}.${i[3]||"0"}.${i[4]||"0"}`,e)};var zx=qx,Lr,bo;function Gx(){return bo||(bo=1,Lr=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Lr}var Vx=K;K.Node=Lt;K.create=K;function K(t){var e=this;if(e instanceof K||(e=new K),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(r){e.push(r)});else if(arguments.length>0)for(var i=0,n=arguments.length;i<n;i++)e.push(arguments[i]);return e}K.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e};K.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};K.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};K.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Yx(this,arguments[t]);return this.length};K.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Xx(this,arguments[t]);return this.length};K.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};K.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};K.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,n=0;i!==null;n++)t.call(e,i.value,n,this),i=i.next};K.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,n=this.length-1;i!==null;n--)t.call(e,i.value,n,this),i=i.prev};K.prototype.get=function(t){for(var e=0,i=this.head;i!==null&&e<t;e++)i=i.next;if(e===t&&i!==null)return i.value};K.prototype.getReverse=function(t){for(var e=0,i=this.tail;i!==null&&e<t;e++)i=i.prev;if(e===t&&i!==null)return i.value};K.prototype.map=function(t,e){e=e||this;for(var i=new K,n=this.head;n!==null;)i.push(t.call(e,n.value,this)),n=n.next;return i};K.prototype.mapReverse=function(t,e){e=e||this;for(var i=new K,n=this.tail;n!==null;)i.push(t.call(e,n.value,this)),n=n.prev;return i};K.prototype.reduce=function(t,e){var i,n=this.head;if(arguments.length>1)i=e;else if(this.head)n=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;n!==null;r++)i=t(i,n.value,r),n=n.next;return i};K.prototype.reduceReverse=function(t,e){var i,n=this.tail;if(arguments.length>1)i=e;else if(this.tail)n=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;n!==null;r--)i=t(i,n.value,r),n=n.prev;return i};K.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;i!==null;e++)t[e]=i.value,i=i.next;return t};K.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;i!==null;e++)t[e]=i.value,i=i.prev;return t};K.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new K;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,r=this.head;r!==null&&n<t;n++)r=r.next;for(;r!==null&&n<e;n++,r=r.next)i.push(r.value);return i};K.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new K;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,r=this.tail;r!==null&&n>e;n--)r=r.prev;for(;r!==null&&n>t;n--,r=r.prev)i.push(r.value);return i};K.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;r!==null&&n<t;n++)r=r.next;for(var a=[],n=0;r&&n<e;n++)a.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var n=0;n<i.length;n++)r=Wx(this,r,i[n]);return a};K.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;i!==null;i=i.prev){var n=i.prev;i.prev=i.next,i.next=n}return this.head=e,this.tail=t,this};function Wx(t,e,i){var n=e===t.head?new Lt(i,null,e,t):new Lt(i,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function Yx(t,e){t.tail=new Lt(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Xx(t,e){t.head=new Lt(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Lt(t,e,i,n){if(!(this instanceof Lt))return new Lt(t,e,i,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}try{Gx()(K)}catch{}const Kx=Vx,$t=Symbol("max"),at=Symbol("length"),Vt=Symbol("lengthCalculator"),Li=Symbol("allowStale"),Pt=Symbol("maxAge"),nt=Symbol("dispose"),To=Symbol("noDisposeOnSet"),he=Symbol("lruList"),He=Symbol("cache"),Cp=Symbol("updateAgeOnGet"),Ur=()=>1;class Qx{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[$t]=e.max||1/0;const i=e.length||Ur;if(this[Vt]=typeof i!="function"?Ur:i,this[Li]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Pt]=e.maxAge||0,this[nt]=e.dispose,this[To]=e.noDisposeOnSet||!1,this[Cp]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[$t]=e||1/0,Ei(this)}get max(){return this[$t]}set allowStale(e){this[Li]=!!e}get allowStale(){return this[Li]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Pt]=e,Ei(this)}get maxAge(){return this[Pt]}set lengthCalculator(e){typeof e!="function"&&(e=Ur),e!==this[Vt]&&(this[Vt]=e,this[at]=0,this[he].forEach(i=>{i.length=this[Vt](i.value,i.key),this[at]+=i.length})),Ei(this)}get lengthCalculator(){return this[Vt]}get length(){return this[at]}get itemCount(){return this[he].length}rforEach(e,i){i=i||this;for(let n=this[he].tail;n!==null;){const r=n.prev;Ao(this,e,n,i),n=r}}forEach(e,i){i=i||this;for(let n=this[he].head;n!==null;){const r=n.next;Ao(this,e,n,i),n=r}}keys(){return this[he].toArray().map(e=>e.key)}values(){return this[he].toArray().map(e=>e.value)}reset(){this[nt]&&this[he]&&this[he].length&&this[he].forEach(e=>this[nt](e.key,e.value)),this[He]=new Map,this[he]=new Kx,this[at]=0}dump(){return this[he].map(e=>qn(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[he]}set(e,i,n){if(n=n||this[Pt],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[Vt](i,e);if(this[He].has(e)){if(a>this[$t])return ri(this,this[He].get(e)),!1;const l=this[He].get(e).value;return this[nt]&&(this[To]||this[nt](e,l.value)),l.now=r,l.maxAge=n,l.value=i,this[at]+=a-l.length,l.length=a,this.get(e),Ei(this),!0}const s=new Jx(e,i,a,r,n);return s.length>this[$t]?(this[nt]&&this[nt](e,i),!1):(this[at]+=s.length,this[he].unshift(s),this[He].set(e,this[he].head),Ei(this),!0)}has(e){if(!this[He].has(e))return!1;const i=this[He].get(e).value;return!qn(this,i)}get(e){return Mr(this,e,!0)}peek(e){return Mr(this,e,!1)}pop(){const e=this[he].tail;return e?(ri(this,e),e.value):null}del(e){ri(this,this[He].get(e))}load(e){this.reset();const i=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],a=r.e||0;if(a===0)this.set(r.k,r.v);else{const s=a-i;s>0&&this.set(r.k,r.v,s)}}}prune(){this[He].forEach((e,i)=>Mr(this,i,!1))}}const Mr=(t,e,i)=>{const n=t[He].get(e);if(n){const r=n.value;if(qn(t,r)){if(ri(t,n),!t[Li])return}else i&&(t[Cp]&&(n.value.now=Date.now()),t[he].unshiftNode(n));return r.value}},qn=(t,e)=>{if(!e||!e.maxAge&&!t[Pt])return!1;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[Pt]&&i>t[Pt]},Ei=t=>{if(t[at]>t[$t])for(let e=t[he].tail;t[at]>t[$t]&&e!==null;){const i=e.prev;ri(t,e),e=i}},ri=(t,e)=>{if(e){const i=e.value;t[nt]&&t[nt](i.key,i.value),t[at]-=i.length,t[He].delete(i.key),t[he].removeNode(e)}};class Jx{constructor(e,i,n,r,a){this.key=e,this.value=i,this.length=n,this.now=r,this.maxAge=a||0}}const Ao=(t,e,i,n)=>{let r=i.value;qn(t,r)&&(ri(t,i),t[Li]||(r=void 0)),r&&e.call(n,r.value,r.key,t)};var Zx=Qx,jr,So;function Xe(){if(So)return jr;So=1;class t{constructor(R,L){if(L=n(L),R instanceof t)return R.loose===!!L.loose&&R.includePrerelease===!!L.includePrerelease?R:new t(R.raw,L);if(R instanceof r)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=R,this.set=R.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${R}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter($=>!_($[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&A($[0])){this.set=[$];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){R=R.trim();const H=((this.options.includePrerelease&&c)|(this.options.loose&&h))+":"+R,$=i.get(H);if($)return $;const M=this.options.loose,j=M?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];R=R.replace(j,B(this.options.includePrerelease)),a("hyphen replace",R),R=R.replace(o[l.COMPARATORTRIM],d),a("comparator trim",R),R=R.replace(o[l.TILDETRIM],u),R=R.replace(o[l.CARETTRIM],p),R=R.split(/\s+/).join(" ");let W=R.split(" ").map(Z=>E(Z,this.options)).join(" ").split(/\s+/).map(Z=>F(Z,this.options));M&&(W=W.filter(Z=>(a("loose invalid filter",Z,this.options),!!Z.match(o[l.COMPARATORLOOSE])))),a("range list",W);const G=new Map,Q=W.map(Z=>new r(Z,this.options));for(const Z of Q){if(_(Z))return[Z];G.set(Z.value,Z)}G.size>1&&G.has("")&&G.delete("");const ge=[...G.values()];return i.set(H,ge),ge}intersects(R,L){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(H=>w(H,L)&&R.set.some($=>w($,L)&&H.every(M=>$.every(j=>M.intersects(j,L)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(U(this.set[L],R,this.options))return!0;return!1}}jr=t;const e=Zx,i=new e({max:1e3}),n=Ba,r=ir(),a=er,s=Ne,{re:o,t:l,comparatorTrimReplace:d,tildeTrimReplace:u,caretTrimReplace:p}=rn,{FLAG_INCLUDE_PRERELEASE:c,FLAG_LOOSE:h}=Zn,_=P=>P.value==="<0.0.0-0",A=P=>P.value==="",w=(P,R)=>{let L=!0;const H=P.slice();let $=H.pop();for(;L&&H.length;)L=H.every(M=>$.intersects(M,R)),$=H.pop();return L},E=(P,R)=>(a("comp",P,R),P=I(P,R),a("caret",P),P=T(P,R),a("tildes",P),P=b(P,R),a("xrange",P),P=g(P,R),a("stars",P),P),f=P=>!P||P.toLowerCase()==="x"||P==="*",T=(P,R)=>P.trim().split(/\s+/).map(L=>y(L,R)).join(" "),y=(P,R)=>{const L=R.loose?o[l.TILDELOOSE]:o[l.TILDE];return P.replace(L,(H,$,M,j,W)=>{a("tilde",P,H,$,M,j,W);let G;return f($)?G="":f(M)?G=`>=${$}.0.0 <${+$+1}.0.0-0`:f(j)?G=`>=${$}.${M}.0 <${$}.${+M+1}.0-0`:W?(a("replaceTilde pr",W),G=`>=${$}.${M}.${j}-${W} <${$}.${+M+1}.0-0`):G=`>=${$}.${M}.${j} <${$}.${+M+1}.0-0`,a("tilde return",G),G})},I=(P,R)=>P.trim().split(/\s+/).map(L=>O(L,R)).join(" "),O=(P,R)=>{a("caret",P,R);const L=R.loose?o[l.CARETLOOSE]:o[l.CARET],H=R.includePrerelease?"-0":"";return P.replace(L,($,M,j,W,G)=>{a("caret",P,$,M,j,W,G);let Q;return f(M)?Q="":f(j)?Q=`>=${M}.0.0${H} <${+M+1}.0.0-0`:f(W)?M==="0"?Q=`>=${M}.${j}.0${H} <${M}.${+j+1}.0-0`:Q=`>=${M}.${j}.0${H} <${+M+1}.0.0-0`:G?(a("replaceCaret pr",G),M==="0"?j==="0"?Q=`>=${M}.${j}.${W}-${G} <${M}.${j}.${+W+1}-0`:Q=`>=${M}.${j}.${W}-${G} <${M}.${+j+1}.0-0`:Q=`>=${M}.${j}.${W}-${G} <${+M+1}.0.0-0`):(a("no pr"),M==="0"?j==="0"?Q=`>=${M}.${j}.${W}${H} <${M}.${j}.${+W+1}-0`:Q=`>=${M}.${j}.${W}${H} <${M}.${+j+1}.0-0`:Q=`>=${M}.${j}.${W} <${+M+1}.0.0-0`),a("caret return",Q),Q})},b=(P,R)=>(a("replaceXRanges",P,R),P.split(/\s+/).map(L=>N(L,R)).join(" ")),N=(P,R)=>{P=P.trim();const L=R.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return P.replace(L,(H,$,M,j,W,G)=>{a("xRange",P,H,$,M,j,W,G);const Q=f(M),ge=Q||f(j),Z=ge||f(W),Y=Z;return $==="="&&Y&&($=""),G=R.includePrerelease?"-0":"",Q?$===">"||$==="<"?H="<0.0.0-0":H="*":$&&Y?(ge&&(j=0),W=0,$===">"?($=">=",ge?(M=+M+1,j=0,W=0):(j=+j+1,W=0)):$==="<="&&($="<",ge?M=+M+1:j=+j+1),$==="<"&&(G="-0"),H=`${$+M}.${j}.${W}${G}`):ge?H=`>=${M}.0.0${G} <${+M+1}.0.0-0`:Z&&(H=`>=${M}.${j}.0${G} <${M}.${+j+1}.0-0`),a("xRange return",H),H})},g=(P,R)=>(a("replaceStars",P,R),P.trim().replace(o[l.STAR],"")),F=(P,R)=>(a("replaceGTE0",P,R),P.trim().replace(o[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),B=P=>(R,L,H,$,M,j,W,G,Q,ge,Z,Y,fi)=>(f(H)?L="":f($)?L=`>=${H}.0.0${P?"-0":""}`:f(M)?L=`>=${H}.${$}.0${P?"-0":""}`:j?L=`>=${L}`:L=`>=${L}${P?"-0":""}`,f(Q)?G="":f(ge)?G=`<${+Q+1}.0.0-0`:f(Z)?G=`<${Q}.${+ge+1}.0-0`:Y?G=`<=${Q}.${ge}.${Z}-${Y}`:P?G=`<${Q}.${ge}.${+Z+1}-0`:G=`<=${G}`,`${L} ${G}`.trim()),U=(P,R,L)=>{for(let H=0;H<P.length;H++)if(!P[H].test(R))return!1;if(R.prerelease.length&&!L.includePrerelease){for(let H=0;H<P.length;H++)if(a(P[H].semver),P[H].semver!==r.ANY&&P[H].semver.prerelease.length>0){const $=P[H].semver;if($.major===R.major&&$.minor===R.minor&&$.patch===R.patch)return!0}return!1}return!0};return jr}var Hr,Co;function ir(){if(Co)return Hr;Co=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,p){if(p=i(p),u instanceof e){if(u.loose===!!p.loose)return u;u=u.value}s("comparator",u,p),this.options=p,this.loose=!!p.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const p=this.options.loose?n[r.COMPARATORLOOSE]:n[r.COMPARATOR],c=u.match(p);if(!c)throw new TypeError(`Invalid comparator: ${u}`);this.operator=c[1]!==void 0?c[1]:"",this.operator==="="&&(this.operator=""),c[2]?this.semver=new o(c[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,p){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,p).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,p).test(u.semver):(p=i(p),p.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,p)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,p)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}Hr=e;const i=Ba,{re:n,t:r}=rn,a=Sp,s=er,o=Ne,l=Xe();return Hr}const e0=Xe(),t0=(t,e,i)=>{try{e=new e0(e,i)}catch{return!1}return e.test(t)};var nr=t0;const i0=Xe(),n0=(t,e)=>new i0(t,e).set.map(i=>i.map(n=>n.value).join(" ").trim().split(" "));var r0=n0;const a0=Ne,s0=Xe(),o0=(t,e,i)=>{let n=null,r=null,a=null;try{a=new s0(e,i)}catch{return null}return t.forEach(s=>{a.test(s)&&(!n||r.compare(s)===-1)&&(n=s,r=new a0(n,i))}),n};var l0=o0;const c0=Ne,p0=Xe(),u0=(t,e,i)=>{let n=null,r=null,a=null;try{a=new p0(e,i)}catch{return null}return t.forEach(s=>{a.test(s)&&(!n||r.compare(s)===1)&&(n=s,r=new c0(n,i))}),n};var d0=u0;const Br=Ne,h0=Xe(),Io=tr,f0=(t,e)=>{t=new h0(t,e);let i=new Br("0.0.0");if(t.test(i)||(i=new Br("0.0.0-0"),t.test(i)))return i;i=null;for(let n=0;n<t.set.length;++n){const r=t.set[n];let a=null;r.forEach(s=>{const o=new Br(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||Io(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),a&&(!i||Io(i,a))&&(i=a)}return i&&t.test(i)?i:null};var m0=f0;const g0=Xe(),v0=(t,e)=>{try{return new g0(t,e).range||"*"}catch{return null}};var x0=v0;const w0=Ne,Ip=ir(),{ANY:y0}=Ip,E0=Xe(),_0=nr,No=tr,Oo=za,b0=Va,T0=Ga,A0=(t,e,i,n)=>{t=new w0(t,n),e=new E0(e,n);let r,a,s,o,l;switch(i){case">":r=No,a=b0,s=Oo,o=">",l=">=";break;case"<":r=Oo,a=T0,s=No,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_0(t,e,n))return!1;for(let d=0;d<e.set.length;++d){const u=e.set[d];let p=null,c=null;if(u.forEach(h=>{h.semver===y0&&(h=new Ip(">=0.0.0")),p=p||h,c=c||h,r(h.semver,p.semver,n)?p=h:s(h.semver,c.semver,n)&&(c=h)}),p.operator===o||p.operator===l||(!c.operator||c.operator===o)&&a(t,c.semver))return!1;if(c.operator===l&&s(t,c.semver))return!1}return!0};var Wa=A0;const S0=Wa,C0=(t,e,i)=>S0(t,e,">",i);var I0=C0;const N0=Wa,O0=(t,e,i)=>N0(t,e,"<",i);var R0=O0;const Ro=Xe(),$0=(t,e,i)=>(t=new Ro(t,i),e=new Ro(e,i),t.intersects(e,i));var P0=$0;const D0=nr,k0=Ye;var F0=(t,e,i)=>{const n=[];let r=null,a=null;const s=t.sort((u,p)=>k0(u,p,i));for(const u of s)D0(u,e,i)?(a=u,r||(r=u)):(a&&n.push([r,a]),a=null,r=null);r&&n.push([r,null]);const o=[];for(const[u,p]of n)u===p?o.push(u):!p&&u===s[0]?o.push("*"):p?u===s[0]?o.push(`<=${p}`):o.push(`${u} - ${p}`):o.push(`>=${u}`);const l=o.join(" || "),d=typeof e.raw=="string"?e.raw:String(e);return l.length<d.length?l:e};const $o=Xe(),Ya=ir(),{ANY:qr}=Ya,_i=nr,Xa=Ye,L0=(t,e,i={})=>{if(t===e)return!0;t=new $o(t,i),e=new $o(e,i);let n=!1;e:for(const r of t.set){for(const a of e.set){const s=M0(r,a,i);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},U0=[new Ya(">=0.0.0-0")],Po=[new Ya(">=0.0.0")],M0=(t,e,i)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===qr){if(e.length===1&&e[0].semver===qr)return!0;i.includePrerelease?t=U0:t=Po}if(e.length===1&&e[0].semver===qr){if(i.includePrerelease)return!0;e=Po}const n=new Set;let r,a;for(const h of t)h.operator===">"||h.operator===">="?r=Do(r,h,i):h.operator==="<"||h.operator==="<="?a=ko(a,h,i):n.add(h.semver);if(n.size>1)return null;let s;if(r&&a){if(s=Xa(r.semver,a.semver,i),s>0)return null;if(s===0&&(r.operator!==">="||a.operator!=="<="))return null}for(const h of n){if(r&&!_i(h,String(r),i)||a&&!_i(h,String(a),i))return null;for(const _ of e)if(!_i(h,String(_),i))return!1;return!0}let o,l,d,u,p=a&&!i.includePrerelease&&a.semver.prerelease.length?a.semver:!1,c=r&&!i.includePrerelease&&r.semver.prerelease.length?r.semver:!1;p&&p.prerelease.length===1&&a.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const h of e){if(u=u||h.operator===">"||h.operator===">=",d=d||h.operator==="<"||h.operator==="<=",r){if(c&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===c.major&&h.semver.minor===c.minor&&h.semver.patch===c.patch&&(c=!1),h.operator===">"||h.operator===">="){if(o=Do(r,h,i),o===h&&o!==r)return!1}else if(r.operator===">="&&!_i(r.semver,String(h),i))return!1}if(a){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=ko(a,h,i),l===h&&l!==a)return!1}else if(a.operator==="<="&&!_i(a.semver,String(h),i))return!1}if(!h.operator&&(a||r)&&s!==0)return!1}return!(r&&d&&!a&&s!==0||a&&u&&!r&&s!==0||c||p)},Do=(t,e,i)=>{if(!t)return e;const n=Xa(t.semver,e.semver,i);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},ko=(t,e,i)=>{if(!t)return e;const n=Xa(t.semver,e.semver,i);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};var j0=L0;const zr=rn,Fo=Zn,H0=Ne,Lo=bp,B0=hi,q0=Bv,z0=Gv,G0=Wv,V0=Xv,W0=Jv,Y0=tx,X0=rx,K0=ox,Q0=Ye,J0=ux,Z0=fx,ew=qa,tw=xx,iw=Ex,nw=tr,rw=za,aw=Tp,sw=Ap,ow=Ga,lw=Va,cw=Sp,pw=zx,uw=ir(),dw=Xe(),hw=nr,fw=r0,mw=l0,gw=d0,vw=m0,xw=x0,ww=Wa,yw=I0,Ew=R0,_w=P0,bw=F0,Tw=j0;var Np={parse:B0,valid:q0,clean:z0,inc:G0,diff:V0,major:W0,minor:Y0,patch:X0,prerelease:K0,compare:Q0,rcompare:J0,compareLoose:Z0,compareBuild:ew,sort:tw,rsort:iw,gt:nw,lt:rw,eq:aw,neq:sw,gte:ow,lte:lw,cmp:cw,coerce:pw,Comparator:uw,Range:dw,satisfies:hw,toComparators:fw,maxSatisfying:mw,minSatisfying:gw,minVersion:vw,validRange:xw,outside:ww,gtr:yw,ltr:Ew,intersects:_w,simplifyRange:bw,subset:Tw,SemVer:H0,re:zr.re,src:zr.src,tokens:zr.t,SEMVER_SPEC_VERSION:Fo.SEMVER_SPEC_VERSION,RELEASE_TYPES:Fo.RELEASE_TYPES,compareIdentifiers:Lo.compareIdentifiers,rcompareIdentifiers:Lo.rcompareIdentifiers},ci={},zn={exports:{}};zn.exports;(function(t,e){var i=200,n="__lodash_hash_undefined__",r=1,a=2,s=9007199254740991,o="[object Arguments]",l="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",c="[object Error]",h="[object Function]",_="[object GeneratorFunction]",A="[object Map]",w="[object Number]",E="[object Null]",f="[object Object]",T="[object Promise]",y="[object Proxy]",I="[object RegExp]",O="[object Set]",b="[object String]",N="[object Symbol]",g="[object Undefined]",F="[object WeakMap]",B="[object ArrayBuffer]",U="[object DataView]",P="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",H="[object Int16Array]",$="[object Int32Array]",M="[object Uint8Array]",j="[object Uint8ClampedArray]",W="[object Uint16Array]",G="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,ge=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,Y={};Y[P]=Y[R]=Y[L]=Y[H]=Y[$]=Y[M]=Y[j]=Y[W]=Y[G]=!0,Y[o]=Y[l]=Y[B]=Y[u]=Y[U]=Y[p]=Y[c]=Y[h]=Y[A]=Y[w]=Y[f]=Y[I]=Y[O]=Y[b]=Y[F]=!1;var fi=typeof qe=="object"&&qe&&qe.Object===Object&&qe,v=typeof self=="object"&&self&&self.Object===Object&&self,m=fi||v||Function("return this")(),D=e&&!e.nodeType&&e,C=D&&!0&&t&&!t.nodeType&&t,X=C&&C.exports===D,te=X&&fi.process,oe=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),ve=oe&&oe.isTypedArray;function De(x,S){for(var k=-1,q=x==null?0:x.length,ee=0,V=[];++k<q;){var ae=x[k];S(ae,k,x)&&(V[ee++]=ae)}return V}function ct(x,S){for(var k=-1,q=S.length,ee=x.length;++k<q;)x[ee+k]=S[k];return x}function ue(x,S){for(var k=-1,q=x==null?0:x.length;++k<q;)if(S(x[k],k,x))return!0;return!1}function Ue(x,S){for(var k=-1,q=Array(x);++k<x;)q[k]=S(k);return q}function mr(x){return function(S){return x(S)}}function ln(x,S){return x.has(S)}function mi(x,S){return x==null?void 0:x[S]}function cn(x){var S=-1,k=Array(x.size);return x.forEach(function(q,ee){k[++S]=[ee,q]}),k}function cu(x,S){return function(k){return x(S(k))}}function pu(x){var S=-1,k=Array(x.size);return x.forEach(function(q){k[++S]=q}),k}var uu=Array.prototype,du=Function.prototype,pn=Object.prototype,gr=m["__core-js_shared__"],is=du.toString,Ke=pn.hasOwnProperty,ns=function(){var x=/[^.]+$/.exec(gr&&gr.keys&&gr.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),rs=pn.toString,hu=RegExp("^"+is.call(Ke).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),as=X?m.Buffer:void 0,un=m.Symbol,ss=m.Uint8Array,os=pn.propertyIsEnumerable,fu=uu.splice,_t=un?un.toStringTag:void 0,ls=Object.getOwnPropertySymbols,mu=as?as.isBuffer:void 0,gu=cu(Object.keys,Object),vr=Bt(m,"DataView"),gi=Bt(m,"Map"),xr=Bt(m,"Promise"),wr=Bt(m,"Set"),yr=Bt(m,"WeakMap"),vi=Bt(Object,"create"),vu=At(vr),xu=At(gi),wu=At(xr),yu=At(wr),Eu=At(yr),cs=un?un.prototype:void 0,Er=cs?cs.valueOf:void 0;function bt(x){var S=-1,k=x==null?0:x.length;for(this.clear();++S<k;){var q=x[S];this.set(q[0],q[1])}}function _u(){this.__data__=vi?vi(null):{},this.size=0}function bu(x){var S=this.has(x)&&delete this.__data__[x];return this.size-=S?1:0,S}function Tu(x){var S=this.__data__;if(vi){var k=S[x];return k===n?void 0:k}return Ke.call(S,x)?S[x]:void 0}function Au(x){var S=this.__data__;return vi?S[x]!==void 0:Ke.call(S,x)}function Su(x,S){var k=this.__data__;return this.size+=this.has(x)?0:1,k[x]=vi&&S===void 0?n:S,this}bt.prototype.clear=_u,bt.prototype.delete=bu,bt.prototype.get=Tu,bt.prototype.has=Au,bt.prototype.set=Su;function et(x){var S=-1,k=x==null?0:x.length;for(this.clear();++S<k;){var q=x[S];this.set(q[0],q[1])}}function Cu(){this.__data__=[],this.size=0}function Iu(x){var S=this.__data__,k=hn(S,x);if(k<0)return!1;var q=S.length-1;return k==q?S.pop():fu.call(S,k,1),--this.size,!0}function Nu(x){var S=this.__data__,k=hn(S,x);return k<0?void 0:S[k][1]}function Ou(x){return hn(this.__data__,x)>-1}function Ru(x,S){var k=this.__data__,q=hn(k,x);return q<0?(++this.size,k.push([x,S])):k[q][1]=S,this}et.prototype.clear=Cu,et.prototype.delete=Iu,et.prototype.get=Nu,et.prototype.has=Ou,et.prototype.set=Ru;function Tt(x){var S=-1,k=x==null?0:x.length;for(this.clear();++S<k;){var q=x[S];this.set(q[0],q[1])}}function $u(){this.size=0,this.__data__={hash:new bt,map:new(gi||et),string:new bt}}function Pu(x){var S=fn(this,x).delete(x);return this.size-=S?1:0,S}function Du(x){return fn(this,x).get(x)}function ku(x){return fn(this,x).has(x)}function Fu(x,S){var k=fn(this,x),q=k.size;return k.set(x,S),this.size+=k.size==q?0:1,this}Tt.prototype.clear=$u,Tt.prototype.delete=Pu,Tt.prototype.get=Du,Tt.prototype.has=ku,Tt.prototype.set=Fu;function dn(x){var S=-1,k=x==null?0:x.length;for(this.__data__=new Tt;++S<k;)this.add(x[S])}function Lu(x){return this.__data__.set(x,n),this}function Uu(x){return this.__data__.has(x)}dn.prototype.add=dn.prototype.push=Lu,dn.prototype.has=Uu;function pt(x){var S=this.__data__=new et(x);this.size=S.size}function Mu(){this.__data__=new et,this.size=0}function ju(x){var S=this.__data__,k=S.delete(x);return this.size=S.size,k}function Hu(x){return this.__data__.get(x)}function Bu(x){return this.__data__.has(x)}function qu(x,S){var k=this.__data__;if(k instanceof et){var q=k.__data__;if(!gi||q.length<i-1)return q.push([x,S]),this.size=++k.size,this;k=this.__data__=new Tt(q)}return k.set(x,S),this.size=k.size,this}pt.prototype.clear=Mu,pt.prototype.delete=ju,pt.prototype.get=Hu,pt.prototype.has=Bu,pt.prototype.set=qu;function zu(x,S){var k=mn(x),q=!k&&ad(x),ee=!k&&!q&&_r(x),V=!k&&!q&&!ee&&xs(x),ae=k||q||ee||V,de=ae?Ue(x.length,String):[],xe=de.length;for(var ie in x)(S||Ke.call(x,ie))&&!(ae&&(ie=="length"||ee&&(ie=="offset"||ie=="parent")||V&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||ed(ie,xe)))&&de.push(ie);return de}function hn(x,S){for(var k=x.length;k--;)if(fs(x[k][0],S))return k;return-1}function Gu(x,S,k){var q=S(x);return mn(x)?q:ct(q,k(x))}function xi(x){return x==null?x===void 0?g:E:_t&&_t in Object(x)?Ju(x):rd(x)}function ps(x){return wi(x)&&xi(x)==o}function us(x,S,k,q,ee){return x===S?!0:x==null||S==null||!wi(x)&&!wi(S)?x!==x&&S!==S:Vu(x,S,k,q,us,ee)}function Vu(x,S,k,q,ee,V){var ae=mn(x),de=mn(S),xe=ae?l:ut(x),ie=de?l:ut(S);xe=xe==o?f:xe,ie=ie==o?f:ie;var $e=xe==f,Me=ie==f,Ee=xe==ie;if(Ee&&_r(x)){if(!_r(S))return!1;ae=!0,$e=!1}if(Ee&&!$e)return V||(V=new pt),ae||xs(x)?ds(x,S,k,q,ee,V):Ku(x,S,xe,k,q,ee,V);if(!(k&r)){var ke=$e&&Ke.call(x,"__wrapped__"),Fe=Me&&Ke.call(S,"__wrapped__");if(ke||Fe){var dt=ke?x.value():x,tt=Fe?S.value():S;return V||(V=new pt),ee(dt,tt,k,q,V)}}return Ee?(V||(V=new pt),Qu(x,S,k,q,ee,V)):!1}function Wu(x){if(!vs(x)||id(x))return!1;var S=ms(x)?hu:ge;return S.test(At(x))}function Yu(x){return wi(x)&&gs(x.length)&&!!Y[xi(x)]}function Xu(x){if(!nd(x))return gu(x);var S=[];for(var k in Object(x))Ke.call(x,k)&&k!="constructor"&&S.push(k);return S}function ds(x,S,k,q,ee,V){var ae=k&r,de=x.length,xe=S.length;if(de!=xe&&!(ae&&xe>de))return!1;var ie=V.get(x);if(ie&&V.get(S))return ie==S;var $e=-1,Me=!0,Ee=k&a?new dn:void 0;for(V.set(x,S),V.set(S,x);++$e<de;){var ke=x[$e],Fe=S[$e];if(q)var dt=ae?q(Fe,ke,$e,S,x,V):q(ke,Fe,$e,x,S,V);if(dt!==void 0){if(dt)continue;Me=!1;break}if(Ee){if(!ue(S,function(tt,St){if(!ln(Ee,St)&&(ke===tt||ee(ke,tt,k,q,V)))return Ee.push(St)})){Me=!1;break}}else if(!(ke===Fe||ee(ke,Fe,k,q,V))){Me=!1;break}}return V.delete(x),V.delete(S),Me}function Ku(x,S,k,q,ee,V,ae){switch(k){case U:if(x.byteLength!=S.byteLength||x.byteOffset!=S.byteOffset)return!1;x=x.buffer,S=S.buffer;case B:return!(x.byteLength!=S.byteLength||!V(new ss(x),new ss(S)));case u:case p:case w:return fs(+x,+S);case c:return x.name==S.name&&x.message==S.message;case I:case b:return x==S+"";case A:var de=cn;case O:var xe=q&r;if(de||(de=pu),x.size!=S.size&&!xe)return!1;var ie=ae.get(x);if(ie)return ie==S;q|=a,ae.set(x,S);var $e=ds(de(x),de(S),q,ee,V,ae);return ae.delete(x),$e;case N:if(Er)return Er.call(x)==Er.call(S)}return!1}function Qu(x,S,k,q,ee,V){var ae=k&r,de=hs(x),xe=de.length,ie=hs(S),$e=ie.length;if(xe!=$e&&!ae)return!1;for(var Me=xe;Me--;){var Ee=de[Me];if(!(ae?Ee in S:Ke.call(S,Ee)))return!1}var ke=V.get(x);if(ke&&V.get(S))return ke==S;var Fe=!0;V.set(x,S),V.set(S,x);for(var dt=ae;++Me<xe;){Ee=de[Me];var tt=x[Ee],St=S[Ee];if(q)var ws=ae?q(St,tt,Ee,S,x,V):q(tt,St,Ee,x,S,V);if(!(ws===void 0?tt===St||ee(tt,St,k,q,V):ws)){Fe=!1;break}dt||(dt=Ee=="constructor")}if(Fe&&!dt){var gn=x.constructor,vn=S.constructor;gn!=vn&&"constructor"in x&&"constructor"in S&&!(typeof gn=="function"&&gn instanceof gn&&typeof vn=="function"&&vn instanceof vn)&&(Fe=!1)}return V.delete(x),V.delete(S),Fe}function hs(x){return Gu(x,ld,Zu)}function fn(x,S){var k=x.__data__;return td(S)?k[typeof S=="string"?"string":"hash"]:k.map}function Bt(x,S){var k=mi(x,S);return Wu(k)?k:void 0}function Ju(x){var S=Ke.call(x,_t),k=x[_t];try{x[_t]=void 0;var q=!0}catch{}var ee=rs.call(x);return q&&(S?x[_t]=k:delete x[_t]),ee}var Zu=ls?function(x){return x==null?[]:(x=Object(x),De(ls(x),function(S){return os.call(x,S)}))}:cd,ut=xi;(vr&&ut(new vr(new ArrayBuffer(1)))!=U||gi&&ut(new gi)!=A||xr&&ut(xr.resolve())!=T||wr&&ut(new wr)!=O||yr&&ut(new yr)!=F)&&(ut=function(x){var S=xi(x),k=S==f?x.constructor:void 0,q=k?At(k):"";if(q)switch(q){case vu:return U;case xu:return A;case wu:return T;case yu:return O;case Eu:return F}return S});function ed(x,S){return S=S??s,!!S&&(typeof x=="number"||Z.test(x))&&x>-1&&x%1==0&&x<S}function td(x){var S=typeof x;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?x!=="__proto__":x===null}function id(x){return!!ns&&ns in x}function nd(x){var S=x&&x.constructor,k=typeof S=="function"&&S.prototype||pn;return x===k}function rd(x){return rs.call(x)}function At(x){if(x!=null){try{return is.call(x)}catch{}try{return x+""}catch{}}return""}function fs(x,S){return x===S||x!==x&&S!==S}var ad=ps(function(){return arguments}())?ps:function(x){return wi(x)&&Ke.call(x,"callee")&&!os.call(x,"callee")},mn=Array.isArray;function sd(x){return x!=null&&gs(x.length)&&!ms(x)}var _r=mu||pd;function od(x,S){return us(x,S)}function ms(x){if(!vs(x))return!1;var S=xi(x);return S==h||S==_||S==d||S==y}function gs(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=s}function vs(x){var S=typeof x;return x!=null&&(S=="object"||S=="function")}function wi(x){return x!=null&&typeof x=="object"}var xs=ve?mr(ve):Yu;function ld(x){return sd(x)?zu(x):Xu(x)}function cd(){return[]}function pd(){return!1}t.exports=od})(zn,zn.exports);var Aw=zn.exports;Object.defineProperty(ci,"__esModule",{value:!0});ci.createTempUpdateFile=ci.DownloadedUpdateHelper=void 0;const Sw=Le,Cw=Ge,Uo=Aw,Ot=Ht,Ui=se;class Iw{constructor(e){this.cacheDir=e,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return Ui.join(this.cacheDir,"pending")}async validateDownloadedPath(e,i,n,r){if(this.versionInfo!=null&&this.file===e&&this.fileInfo!=null)return Uo(this.versionInfo,i)&&Uo(this.fileInfo.info,n.info)&&await Ot.pathExists(e)?e:null;const a=await this.getValidCachedUpdateFile(n,r);return a===null?null:(r.info(`Update has already been downloaded to ${e}).`),this._file=a,a)}async setDownloadedFile(e,i,n,r,a,s){this._file=e,this._packageFile=i,this.versionInfo=n,this.fileInfo=r,this._downloadedFileInfo={fileName:a,sha512:r.info.sha512,isAdminRightsRequired:r.info.isAdminRightsRequired===!0},s&&await Ot.outputJson(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await Ot.emptyDir(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(e,i){var n;const r=this.getUpdateInfoFile();if(!await Ot.pathExists(r))return null;let s;try{s=await Ot.readJson(r)}catch(u){let p="No cached update info available";return u.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),p+=` (error on read: ${u.message})`),i.info(p),null}if(!((n=(s==null?void 0:s.fileName)!==null)!==null&&n!==void 0?n:!1))return i.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(e.info.sha512!==s.sha512)return i.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${s.sha512}, expected: ${e.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const l=Ui.join(this.cacheDirForPendingUpdate,s.fileName);if(!await Ot.pathExists(l))return i.info("Cached update file doesn't exist"),null;const d=await Nw(l);return e.info.sha512!==d?(i.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${d}, expected: ${e.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=s,l)}getUpdateInfoFile(){return Ui.join(this.cacheDirForPendingUpdate,"update-info.json")}}ci.DownloadedUpdateHelper=Iw;function Nw(t,e="sha512",i="base64",n){return new Promise((r,a)=>{const s=Sw.createHash(e);s.on("error",a).setEncoding(i),Cw.createReadStream(t,{...n,highWaterMark:1024*1024}).on("error",a).on("end",()=>{s.end(),r(s.read())}).pipe(s,{end:!1})})}async function Ow(t,e,i){let n=0,r=Ui.join(e,t);for(let a=0;a<3;a++)try{return await Ot.unlink(r),r}catch(s){if(s.code==="ENOENT")return r;i.warn(`Error on remove temp update file: ${s}`),r=Ui.join(e,`${n++}-${t}`)}return r}ci.createTempUpdateFile=Ow;var rr={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.getAppCacheDir=void 0;const Gr=se,Rw=Ki;function $w(){const t=Rw.homedir();let e;return process.platform==="win32"?e=process.env.LOCALAPPDATA||Gr.join(t,"AppData","Local"):process.platform==="darwin"?e=Gr.join(t,"Library","Application Support","Caches"):e=process.env.XDG_CACHE_HOME||Gr.join(t,".cache"),e}ar.getAppCacheDir=$w;Object.defineProperty(rr,"__esModule",{value:!0});rr.ElectronAppAdapter=void 0;const Mo=se,Pw=ar;class Dw{constructor(e=ze.app){this.app=e}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?Mo.join(process.resourcesPath,"app-update.yml"):Mo.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return Pw.getAppCacheDir()}quit(){this.app.quit()}onQuit(e){this.app.once("quit",(i,n)=>e(n))}}rr.ElectronAppAdapter=Dw;var Op={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronHttpExecutor=t.getNetSession=t.NET_SESSION_NAME=void 0;const e=pe();t.NET_SESSION_NAME="electron-updater";function i(){return ze.session.fromPartition(t.NET_SESSION_NAME,{cache:!1})}t.getNetSession=i;class n extends e.HttpExecutor{constructor(a){super(),this.proxyLoginCallback=a,this.cachedSession=null}async download(a,s,o){return await o.cancellationToken.createPromise((l,d,u)=>{const p={headers:o.headers||void 0,redirect:"manual"};e.configureRequestUrl(a,p),e.configureRequestOptions(p),this.doDownload(p,{destination:s,options:o,onCancel:u,callback:c=>{c==null?l(s):d(c)},responseHandler:null},0)})}createRequest(a,s){a.headers&&a.headers.Host&&(a.host=a.headers.Host,delete a.headers.Host),this.cachedSession==null&&(this.cachedSession=i());const o=ze.net.request({...a,session:this.cachedSession});return o.on("response",s),this.proxyLoginCallback!=null&&o.on("login",this.proxyLoginCallback),o}addRedirectHandlers(a,s,o,l,d){a.on("redirect",(u,p,c)=>{a.abort(),l>this.maxRedirects?o(this.createMaxRedirectError()):d(e.HttpExecutor.prepareRedirectUrlOptions(c,s))})}}t.ElectronHttpExecutor=n})(Op);var an={},be={},kw=1/0,Fw="[object Symbol]",Rp=/[\\^$.*+?()[\]{}|]/g,Lw=RegExp(Rp.source),Uw=typeof qe=="object"&&qe&&qe.Object===Object&&qe,Mw=typeof self=="object"&&self&&self.Object===Object&&self,jw=Uw||Mw||Function("return this")(),Hw=Object.prototype,Bw=Hw.toString,jo=jw.Symbol,Ho=jo?jo.prototype:void 0,Bo=Ho?Ho.toString:void 0;function qw(t){if(typeof t=="string")return t;if(Gw(t))return Bo?Bo.call(t):"";var e=t+"";return e=="0"&&1/t==-kw?"-0":e}function zw(t){return!!t&&typeof t=="object"}function Gw(t){return typeof t=="symbol"||zw(t)&&Bw.call(t)==Fw}function Vw(t){return t==null?"":qw(t)}function Ww(t){return t=Vw(t),t&&Lw.test(t)?t.replace(Rp,"\\$&"):t}var Yw=Ww;Object.defineProperty(be,"__esModule",{value:!0});be.blockmapFiles=be.getChannelFilename=be.newUrlFromBase=be.newBaseUrl=void 0;const $p=Ve,Xw=Yw;function Kw(t){const e=new $p.URL(t);return e.pathname.endsWith("/")||(e.pathname+="/"),e}be.newBaseUrl=Kw;function xa(t,e,i=!1){const n=new $p.URL(t,e),r=e.search;return r!=null&&r.length!==0?n.search=r:i&&(n.search=`noCache=${Date.now().toString(32)}`),n}be.newUrlFromBase=xa;function Qw(t){return`${t}.yml`}be.getChannelFilename=Qw;function Jw(t,e,i){const n=xa(`${t.pathname}.blockmap`,t);return[xa(`${t.pathname.replace(new RegExp(Xw(i),"g"),e)}.blockmap`,t),n]}be.blockmapFiles=Jw;var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.resolveFiles=ce.getFileList=ce.parseUpdateInfo=ce.findFile=ce.Provider=void 0;const yt=pe(),Zw=ye,qo=be;class ey{constructor(e){this.runtimeOptions=e,this.requestHeaders=null,this.executor=e.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const e=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(e==="x64"?"":`-${e}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(e){return`${e}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(e){this.requestHeaders=e}httpRequest(e,i,n){return this.executor.request(this.createRequestOptions(e,i),n)}createRequestOptions(e,i){const n={};return this.requestHeaders==null?i!=null&&(n.headers=i):n.headers=i==null?this.requestHeaders:{...this.requestHeaders,...i},yt.configureRequestUrl(e,n),n}}ce.Provider=ey;function ty(t,e,i){if(t.length===0)throw yt.newError("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const n=t.find(r=>r.url.pathname.toLowerCase().endsWith(`.${e}`));return n??(i==null?t[0]:t.find(r=>!i.some(a=>r.url.pathname.toLowerCase().endsWith(`.${a}`))))}ce.findFile=ty;function iy(t,e,i){if(t==null)throw yt.newError(`Cannot parse update info from ${e} in the latest release artifacts (${i}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let n;try{n=Zw.load(t)}catch(r){throw yt.newError(`Cannot parse update info from ${e} in the latest release artifacts (${i}): ${r.stack||r.message}, rawData: ${t}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return n}ce.parseUpdateInfo=iy;function Pp(t){const e=t.files;if(e!=null&&e.length>0)return e;if(t.path!=null)return[{url:t.path,sha2:t.sha2,sha512:t.sha512}];throw yt.newError(`No files provided: ${yt.safeStringifyJson(t)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}ce.getFileList=Pp;function ny(t,e,i=n=>n){const r=Pp(t).map(o=>{if(o.sha2==null&&o.sha512==null)throw yt.newError(`Update info doesn't contain nor sha256 neither sha512 checksum: ${yt.safeStringifyJson(o)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:qo.newUrlFromBase(i(o.url),e),info:o}}),a=t.packages,s=a==null?null:a[process.arch]||a.ia32;return s!=null&&(r[0].packageInfo={...s,path:qo.newUrlFromBase(i(s.path),e).href}),r}ce.resolveFiles=ny;Object.defineProperty(an,"__esModule",{value:!0});an.GenericProvider=void 0;const zo=pe(),Vr=be,Wr=ce;class ry extends Wr.Provider{constructor(e,i,n){super(n),this.configuration=e,this.updater=i,this.baseUrl=Vr.newBaseUrl(this.configuration.url)}get channel(){const e=this.updater.channel||this.configuration.channel;return e==null?this.getDefaultChannelName():this.getCustomChannelName(e)}async getLatestVersion(){const e=Vr.getChannelFilename(this.channel),i=Vr.newUrlFromBase(e,this.baseUrl,this.updater.isAddNoCacheQuery);for(let n=0;;n++)try{return Wr.parseUpdateInfo(await this.httpRequest(i),e,i)}catch(r){if(r instanceof zo.HttpError&&r.statusCode===404)throw zo.newError(`Cannot find channel "${e}" update info: ${r.stack||r.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(r.code==="ECONNREFUSED"&&n<3){await new Promise((a,s)=>{try{setTimeout(a,1e3*n)}catch(o){s(o)}});continue}throw r}}resolveFiles(e){return Wr.resolveFiles(e,this.baseUrl)}}an.GenericProvider=ry;var pi={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.BitbucketProvider=void 0;const Go=pe(),Yr=be,Xr=ce;class ay extends Xr.Provider{constructor(e,i,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=i;const{owner:r,slug:a}=e;this.baseUrl=Yr.newBaseUrl(`https://api.bitbucket.org/2.0/repositories/${r}/${a}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const e=new Go.CancellationToken,i=Yr.getChannelFilename(this.getCustomChannelName(this.channel)),n=Yr.newUrlFromBase(i,this.baseUrl,this.updater.isAddNoCacheQuery);try{const r=await this.httpRequest(n,void 0,e);return Xr.parseUpdateInfo(r,i,n)}catch(r){throw Go.newError(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${r.stack||r.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return Xr.resolveFiles(e,this.baseUrl)}toString(){const{owner:e,slug:i}=this.configuration;return`Bitbucket (owner: ${e}, slug: ${i}, channel: ${this.channel})`}}sr.BitbucketProvider=ay;var st={};Object.defineProperty(st,"__esModule",{value:!0});st.computeReleaseNotes=st.GitHubProvider=st.BaseGitHubProvider=void 0;const rt=pe(),Mi=Np,sy=Ve,ti=be,wa=ce,Kr=/\/tag\/([^/]+)$/;class Dp extends wa.Provider{constructor(e,i,n){super({...n,isUseMultipleRangeRequest:!1}),this.options=e,this.baseUrl=ti.newBaseUrl(rt.githubUrl(e,i));const r=i==="github.com"?"api.github.com":i;this.baseApiUrl=ti.newBaseUrl(rt.githubUrl(e,r))}computeGithubBasePath(e){const i=this.options.host;return i&&!["github.com","api.github.com"].includes(i)?`/api/v3${e}`:e}}st.BaseGitHubProvider=Dp;class oy extends Dp{constructor(e,i,n){super(e,"github.com",n),this.options=e,this.updater=i}async getLatestVersion(){var e,i,n,r;const a=new rt.CancellationToken,s=await this.httpRequest(ti.newUrlFromBase(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},a),o=rt.parseXml(s);let l=o.element("entry",!1,"No published versions on GitHub"),d=null;try{if(this.updater.allowPrerelease){const A=((e=this.updater)===null||e===void 0?void 0:e.channel)||((i=Mi.prerelease(this.updater.currentVersion))===null||i===void 0?void 0:i[0])||null;if(A===null)d=Kr.exec(l.element("link").attribute("href"))[1];else for(const w of o.getElements("entry")){const E=Kr.exec(w.element("link").attribute("href"));if(E===null)continue;const f=E[1],T=((n=Mi.prerelease(f))===null||n===void 0?void 0:n[0])||null,y=!A||["alpha","beta"].includes(A),I=!["alpha","beta"].includes(String(T));if(y&&!I&&!(A==="beta"&&T==="alpha")){d=f;break}if(T&&T===A){d=f;break}}}else{d=await this.getLatestTagName(a);for(const A of o.getElements("entry"))if(Kr.exec(A.element("link").attribute("href"))[1]===d){l=A;break}}}catch(A){throw rt.newError(`Cannot parse releases feed: ${A.stack||A.message},
XML:
${s}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(d==null)throw rt.newError("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let u,p="",c="";const h=async A=>{p=ti.getChannelFilename(A),c=ti.newUrlFromBase(this.getBaseDownloadPath(String(d),p),this.baseUrl);const w=this.createRequestOptions(c);try{return await this.executor.request(w,a)}catch(E){throw E instanceof rt.HttpError&&E.statusCode===404?rt.newError(`Cannot find ${p} in the latest release artifacts (${c}): ${E.stack||E.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):E}};try{const A=this.updater.allowPrerelease?this.getCustomChannelName(String(((r=Mi.prerelease(d))===null||r===void 0?void 0:r[0])||"latest")):this.getDefaultChannelName();u=await h(A)}catch(A){if(this.updater.allowPrerelease)u=await h(this.getDefaultChannelName());else throw A}const _=wa.parseUpdateInfo(u,p,c);return _.releaseName==null&&(_.releaseName=l.elementValueOrEmpty("title")),_.releaseNotes==null&&(_.releaseNotes=kp(this.updater.currentVersion,this.updater.fullChangelog,o,l)),{tag:d,..._}}async getLatestTagName(e){const i=this.options,n=i.host==null||i.host==="github.com"?ti.newUrlFromBase(`${this.basePath}/latest`,this.baseUrl):new sy.URL(`${this.computeGithubBasePath(`/repos/${i.owner}/${i.repo}/releases`)}/latest`,this.baseApiUrl);try{const r=await this.httpRequest(n,{Accept:"application/json"},e);return r==null?null:JSON.parse(r).tag_name}catch(r){throw rt.newError(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${r.stack||r.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(e){return wa.resolveFiles(e,this.baseUrl,i=>this.getBaseDownloadPath(e.tag,i.replace(/ /g,"-")))}getBaseDownloadPath(e,i){return`${this.basePath}/download/${e}/${i}`}}st.GitHubProvider=oy;function Vo(t){const e=t.elementValueOrEmpty("content");return e==="No content."?"":e}function kp(t,e,i,n){if(!e)return Vo(n);const r=[];for(const a of i.getElements("entry")){const s=/\/tag\/v?([^/]+)$/.exec(a.element("link").attribute("href"))[1];Mi.lt(t,s)&&r.push({version:s,note:Vo(a)})}return r.sort((a,s)=>Mi.rcompare(a.version,s.version))}st.computeReleaseNotes=kp;var or={};Object.defineProperty(or,"__esModule",{value:!0});or.KeygenProvider=void 0;const Wo=pe(),Qr=be,Jr=ce;class ly extends Jr.Provider{constructor(e,i,n){super({...n,isUseMultipleRangeRequest:!1}),this.configuration=e,this.updater=i,this.baseUrl=Qr.newBaseUrl(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const e=new Wo.CancellationToken,i=Qr.getChannelFilename(this.getCustomChannelName(this.channel)),n=Qr.newUrlFromBase(i,this.baseUrl,this.updater.isAddNoCacheQuery);try{const r=await this.httpRequest(n,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},e);return Jr.parseUpdateInfo(r,i,n)}catch(r){throw Wo.newError(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${r.stack||r.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(e){return Jr.resolveFiles(e,this.baseUrl)}toString(){const{account:e,product:i,platform:n}=this.configuration;return`Keygen (account: ${e}, product: ${i}, platform: ${n}, channel: ${this.channel})`}}or.KeygenProvider=ly;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.PrivateGitHubProvider=void 0;const Wt=pe(),cy=ye,py=se,Yo=Ve,Xo=be,uy=st,dy=ce;class hy extends uy.BaseGitHubProvider{constructor(e,i,n,r){super(e,"api.github.com",r),this.updater=i,this.token=n}createRequestOptions(e,i){const n=super.createRequestOptions(e,i);return n.redirect="manual",n}async getLatestVersion(){const e=new Wt.CancellationToken,i=Xo.getChannelFilename(this.getDefaultChannelName()),n=await this.getLatestVersionInfo(e),r=n.assets.find(o=>o.name===i);if(r==null)throw Wt.newError(`Cannot find ${i} in the release ${n.html_url||n.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const a=new Yo.URL(r.url);let s;try{s=cy.load(await this.httpRequest(a,this.configureHeaders("application/octet-stream"),e))}catch(o){throw o instanceof Wt.HttpError&&o.statusCode===404?Wt.newError(`Cannot find ${i} in the latest release artifacts (${a}): ${o.stack||o.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):o}return s.assets=n.assets,s}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(e){return{accept:e,authorization:`token ${this.token}`}}async getLatestVersionInfo(e){const i=this.updater.allowPrerelease;let n=this.basePath;i||(n=`${n}/latest`);const r=Xo.newUrlFromBase(n,this.baseUrl);try{const a=JSON.parse(await this.httpRequest(r,this.configureHeaders("application/vnd.github.v3+json"),e));return i?a.find(s=>s.prerelease)||a[0]:a}catch(a){throw Wt.newError(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(e){return dy.getFileList(e).map(i=>{const n=py.posix.basename(i.url).replace(/ /g,"-"),r=e.assets.find(a=>a!=null&&a.name===n);if(r==null)throw Wt.newError(`Cannot find asset "${n}" in: ${JSON.stringify(e.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new Yo.URL(r.url),info:i}})}}lr.PrivateGitHubProvider=hy;Object.defineProperty(pi,"__esModule",{value:!0});pi.createClient=pi.isUrlProbablySupportMultiRangeRequests=void 0;const Cn=pe(),fy=sr,Ko=an,my=st,gy=or,vy=lr;function Fp(t){return!t.includes("s3.amazonaws.com")}pi.isUrlProbablySupportMultiRangeRequests=Fp;function xy(t,e,i){if(typeof t=="string")throw Cn.newError("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=t.provider;switch(n){case"github":{const r=t,a=(r.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||r.token;return a==null?new my.GitHubProvider(r,e,i):new vy.PrivateGitHubProvider(r,e,a,i)}case"bitbucket":return new fy.BitbucketProvider(t,e,i);case"keygen":return new gy.KeygenProvider(t,e,i);case"s3":case"spaces":return new Ko.GenericProvider({provider:"generic",url:Cn.getS3LikeProviderBaseUrl(t),channel:t.channel||null},e,{...i,isUseMultipleRangeRequest:!1});case"generic":{const r=t;return new Ko.GenericProvider(r,e,{...i,isUseMultipleRangeRequest:r.useMultipleRangeRequest!==!1&&Fp(r.url)})}case"custom":{const r=t,a=r.updateProvider;if(!a)throw Cn.newError("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new a(r,e,i)}default:throw Cn.newError(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}pi.createClient=xy;var Qo;function Ka(){if(Qo)return Nt;Qo=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.NoOpLogger=Nt.AppUpdater=void 0;const t=pe(),e=Le,i=Et,n=Ht,r=ye,a=Jn,s=se,o=Np,l=ci,d=rr,u=Op,p=an,c=hr(),h=pi;let _=class Lp extends i.EventEmitter{constructor(f,T){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new c.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new a.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",O=>{this._logger.error(`Error: ${O.stack||O.message}`)}),T==null?(this.app=new d.ElectronAppAdapter,this.httpExecutor=new u.ElectronHttpExecutor((O,b)=>this.emit("login",O,b))):(this.app=T,this.httpExecutor=null);const y=this.app.version,I=o.parse(y);if(I==null)throw t.newError(`App version is not a valid semver version: "${y}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=I,this.allowPrerelease=A(I),f!=null&&(this.setFeedURL(f),typeof f!="string"&&f.requestHeaders&&(this.requestHeaders=f.requestHeaders))}get channel(){return this._channel}set channel(f){if(this._channel!=null){if(typeof f!="string")throw t.newError(`Channel must be a string, but got: ${f}`,"ERR_UPDATER_INVALID_CHANNEL");if(f.length===0)throw t.newError("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=f,this.allowDowngrade=!0}addAuthHeader(f){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:f})}get netSession(){return u.getNetSession()}get logger(){return this._logger}set logger(f){this._logger=f??new w}set updateConfigPath(f){this.clientPromise=null,this._appUpdateConfigPath=f,this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig())}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(f){const T=this.createProviderRuntimeOptions();let y;typeof f=="string"?y=new p.GenericProvider({provider:"generic",url:f},this,{...T,isUseMultipleRangeRequest:h.isUrlProbablySupportMultiRangeRequests(f)}):y=h.createClient(f,this,T),this.clientPromise=Promise.resolve(y)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let f=this.checkForUpdatesPromise;if(f!=null)return this._logger.info("Checking for update (already in progress)"),f;const T=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),f=this.doCheckForUpdates().then(y=>(T(),y)).catch(y=>{throw T(),this.emit("error",y,`Cannot check for updates: ${(y.stack||y).toString()}`),y}),this.checkForUpdatesPromise=f,f}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(f){return this.checkForUpdates().then(T=>T!=null&&T.downloadPromise?(T.downloadPromise.then(()=>{const y=Lp.formatDownloadNotification(T.updateInfo.version,this.app.name,f);new ze.Notification(y).show()}),T):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),T))}static formatDownloadNotification(f,T,y){return y==null&&(y={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),y={title:y.title.replace("{appName}",T).replace("{version}",f),body:y.body.replace("{appName}",T).replace("{version}",f)},y}async isStagingMatch(f){const T=f.stagingPercentage;let y=T;if(y==null)return!0;if(y=parseInt(y,10),isNaN(y))return this._logger.warn(`Staging percentage is NaN: ${T}`),!0;y=y/100;const I=await this.stagingUserIdPromise.value,b=t.UUID.parse(I).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${y}, percentage: ${b}, user id: ${I}`),b<y}computeFinalHeaders(f){return this.requestHeaders!=null&&Object.assign(f,this.requestHeaders),f}async isUpdateAvailable(f){const T=o.parse(f.version);if(T==null)throw t.newError(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${f.version}"`,"ERR_UPDATER_INVALID_VERSION");const y=this.currentVersion;if(o.eq(T,y)||!await this.isStagingMatch(f))return!1;const O=o.gt(T,y),b=o.lt(T,y);return O?!0:this.allowDowngrade&&b}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(y=>h.createClient(y,this,this.createProviderRuntimeOptions())));const f=await this.clientPromise,T=await this.stagingUserIdPromise.value;return f.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":T})),{info:await f.getLatestVersion(),provider:f}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const f=await this.getUpdateInfoAndProvider(),T=f.info;if(!await this.isUpdateAvailable(T))return this._logger.info(`Update for version ${this.currentVersion} is not available (latest version: ${T.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",T),{versionInfo:T,updateInfo:T};this.updateInfoAndProvider=f,this.onUpdateAvailable(T);const y=new t.CancellationToken;return{versionInfo:T,updateInfo:T,cancellationToken:y,downloadPromise:this.autoDownload?this.downloadUpdate(y):null}}onUpdateAvailable(f){this._logger.info(`Found version ${f.version} (url: ${t.asArray(f.files).map(T=>T.url).join(", ")})`),this.emit("update-available",f)}downloadUpdate(f=new t.CancellationToken){const T=this.updateInfoAndProvider;if(T==null){const I=new Error("Please check update first");return this.dispatchError(I),Promise.reject(I)}this._logger.info(`Downloading update from ${t.asArray(T.info.files).map(I=>I.url).join(", ")}`);const y=I=>{if(!(I instanceof t.CancellationError))try{this.dispatchError(I)}catch(O){this._logger.warn(`Cannot dispatch error event: ${O.stack||O}`)}return I};try{return this.doDownloadUpdate({updateInfoAndProvider:T,requestHeaders:this.computeRequestHeaders(T.provider),cancellationToken:f,disableWebInstaller:this.disableWebInstaller}).catch(I=>{throw y(I)})}catch(I){return Promise.reject(y(I))}}dispatchError(f){this.emit("error",f,(f.stack||f).toString())}dispatchUpdateDownloaded(f){this.emit(c.UPDATE_DOWNLOADED,f)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),r.load(await n.readFile(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(f){const T=f.fileExtraDownloadHeaders;if(T!=null){const y=this.requestHeaders;return y==null?T:{...T,...y}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const f=s.join(this.app.userDataPath,".updaterId");try{const y=await n.readFile(f,"utf-8");if(t.UUID.check(y))return y;this._logger.warn(`Staging user id file exists, but content was invalid: ${y}`)}catch(y){y.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${y}`)}const T=t.UUID.v5(e.randomBytes(4096),t.UUID.OID);this._logger.info(`Generated new staging user ID: ${T}`);try{await n.outputFile(f,T)}catch(y){this._logger.warn(`Couldn't write out staging user ID: ${y}`)}return T}get isAddNoCacheQuery(){const f=this.requestHeaders;if(f==null)return!0;for(const T of Object.keys(f)){const y=T.toLowerCase();if(y==="authorization"||y==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let f=this.downloadedUpdateHelper;if(f==null){const T=(await this.configOnDisk.value).updaterCacheDirName,y=this._logger;T==null&&y.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const I=s.join(this.app.baseCachePath,T||this.app.name);y.debug!=null&&y.debug(`updater cache dir: ${I}`),f=new l.DownloadedUpdateHelper(I),this.downloadedUpdateHelper=f}return f}async executeDownload(f){const T=f.fileInfo,y={headers:f.downloadUpdateOptions.requestHeaders,cancellationToken:f.downloadUpdateOptions.cancellationToken,sha2:T.info.sha2,sha512:T.info.sha512};this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(y.onProgress=j=>this.emit(c.DOWNLOAD_PROGRESS,j));const I=f.downloadUpdateOptions.updateInfoAndProvider.info,O=I.version,b=T.packageInfo;function N(){const j=decodeURIComponent(f.fileInfo.url.pathname);return j.endsWith(`.${f.fileExtension}`)?s.basename(j):`update.${f.fileExtension}`}const g=await this.getOrCreateDownloadHelper(),F=g.cacheDirForPendingUpdate;await n.mkdir(F,{recursive:!0});const B=N();let U=s.join(F,B);const P=b==null?null:s.join(F,`package-${O}${s.extname(b.path)||".7z"}`),R=async j=>(await g.setDownloadedFile(U,P,I,T,B,j),await f.done({...I,downloadedFile:U}),P==null?[U]:[U,P]),L=this._logger,H=await g.validateDownloadedPath(U,I,T,L);if(H!=null)return U=H,await R(!1);const $=async()=>(await g.clear().catch(()=>{}),await n.unlink(U).catch(()=>{})),M=await l.createTempUpdateFile(`temp-${B}`,F,L);try{await f.task(M,y,P,$),await n.rename(M,U)}catch(j){throw await $(),j instanceof t.CancellationError&&(L.info("cancelled"),this.emit("update-cancelled",I)),j}return L.info(`New version ${O} has been downloaded to ${U}`),await R(!0)}};Nt.AppUpdater=_;function A(E){const f=o.prerelease(E);return f!=null&&f.length>0}class w{info(f){}warn(f){}error(f){}}return Nt.NoOpLogger=w,Nt}var bi={},Ti={},Jo;function Up(){if(Jo)return Ti;Jo=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.BaseUpdater=void 0;const t=Ka();let e=class extends t.AppUpdater{constructor(n,r){super(n,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(n=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(n,n?r:this.autoRunAppAfterInstall)?setImmediate(()=>{ze.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(n){return super.executeDownload({...n,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}install(n,r){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const a=this.downloadedUpdateHelper,s=a==null?null:a.file,o=a==null?null:a.downloadedFileInfo;if(s==null||o==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${n}, isForceRunAfter: ${r}`),this.doInstall({installerPath:s,isSilent:n,isForceRunAfter:r,isAdminRightsRequired:o.isAdminRightsRequired})}catch(l){return this.dispatchError(l),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(n=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(n!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${n}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}};return Ti.BaseUpdater=e,Ti}var sn={},on={},Ut={},cr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.computeOperations=t.OperationKind=void 0;var e;(function(o){o[o.COPY=0]="COPY",o[o.DOWNLOAD=1]="DOWNLOAD"})(e=t.OperationKind||(t.OperationKind={}));function i(o,l,d){const u=s(o.files),p=s(l.files);let c=null;const h=l.files[0],_=[],A=h.name,w=u.get(A);if(w==null)throw new Error(`no file ${A} in old blockmap`);const E=p.get(A);let f=0;const{checksumToOffset:T,checksumToOldSize:y}=a(u.get(A),w.offset,d);let I=h.offset;for(let O=0;O<E.checksums.length;I+=E.sizes[O],O++){const b=E.sizes[O],N=E.checksums[O];let g=T.get(N);g!=null&&y.get(N)!==b&&(d.warn(`Checksum ("${N}") matches, but size differs (old: ${y.get(N)}, new: ${b})`),g=void 0),g===void 0?(f++,c!=null&&c.kind===e.DOWNLOAD&&c.end===I?c.end+=b:(c={kind:e.DOWNLOAD,start:I,end:I+b},r(c,_,N,O))):c!=null&&c.kind===e.COPY&&c.end===g?c.end+=b:(c={kind:e.COPY,start:g,end:g+b},r(c,_,N,O))}return f>0&&d.info(`File${h.name==="file"?"":" "+h.name} has ${f} changed blocks`),_}t.computeOperations=i;const n=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function r(o,l,d,u){if(n&&l.length!==0){const p=l[l.length-1];if(p.kind===o.kind&&o.start<p.end&&o.start>p.start){const c=[p.start,p.end,o.start,o.end].reduce((h,_)=>h<_?h:_);throw new Error(`operation (block index: ${u}, checksum: ${d}, kind: ${e[o.kind]}) overlaps previous operation (checksum: ${d}):
abs: ${p.start} until ${p.end} and ${o.start} until ${o.end}
rel: ${p.start-c} until ${p.end-c} and ${o.start-c} until ${o.end-c}`)}}l.push(o)}function a(o,l,d){const u=new Map,p=new Map;let c=l;for(let h=0;h<o.checksums.length;h++){const _=o.checksums[h],A=o.sizes[h],w=p.get(_);if(w===void 0)u.set(_,c),p.set(_,A);else if(d.debug!=null){const E=w===A?"(same size)":`(size: ${w}, this size: ${A})`;d.debug(`${_} duplicated in blockmap ${E}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}c+=A}return{checksumToOffset:u,checksumToOldSize:p}}function s(o){const l=new Map;for(const d of o)l.set(d.name,d);return l}})(cr);Object.defineProperty(Ut,"__esModule",{value:!0});Ut.DataSplitter=Ut.copyData=void 0;const In=pe(),wy=Ge,yy=me,Ey=cr,Zo=Buffer.from(`\r
\r
`);var ft;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(ft||(ft={}));function Mp(t,e,i,n,r){const a=wy.createReadStream("",{fd:i,autoClose:!1,start:t.start,end:t.end-1});a.on("error",n),a.once("end",r),a.pipe(e,{end:!1})}Ut.copyData=Mp;class _y extends yy.Writable{constructor(e,i,n,r,a,s){super(),this.out=e,this.options=i,this.partIndexToTaskIndex=n,this.partIndexToLength=a,this.finishHandler=s,this.partIndex=-1,this.headerListBuffer=null,this.readState=ft.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=r.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(e,i,n){if(this.isFinished){console.error(`Trailing ignored data: ${e.length} bytes`);return}this.handleData(e).then(n).catch(n)}async handleData(e){let i=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw In.newError("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const n=Math.min(this.ignoreByteCount,e.length);this.ignoreByteCount-=n,i=n}else if(this.remainingPartDataCount>0){const n=Math.min(this.remainingPartDataCount,e.length);this.remainingPartDataCount-=n,await this.processPartData(e,0,n),i=n}if(i!==e.length){if(this.readState===ft.HEADER){const n=this.searchHeaderListEnd(e,i);if(n===-1)return;i=n,this.readState=ft.BODY,this.headerListBuffer=null}for(;;){if(this.readState===ft.BODY)this.readState=ft.INIT;else{this.partIndex++;let s=this.partIndexToTaskIndex.get(this.partIndex);if(s==null)if(this.isFinished)s=this.options.end;else throw In.newError("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const o=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(o<s)await this.copyExistingData(o,s);else if(o>s)throw In.newError("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(i=this.searchHeaderListEnd(e,i),i===-1){this.readState=ft.HEADER;return}}const n=this.partIndexToLength[this.partIndex],r=i+n,a=Math.min(r,e.length);if(await this.processPartStarted(e,i,a),this.remainingPartDataCount=n-(a-i),this.remainingPartDataCount>0)return;if(i=r+this.boundaryLength,i>=e.length){this.ignoreByteCount=this.boundaryLength-(e.length-r);return}}}}copyExistingData(e,i){return new Promise((n,r)=>{const a=()=>{if(e===i){n();return}const s=this.options.tasks[e];if(s.kind!==Ey.OperationKind.COPY){r(new Error("Task kind must be COPY"));return}Mp(s,this.out,this.options.oldFileFd,r,()=>{e++,a()})};a()})}searchHeaderListEnd(e,i){const n=e.indexOf(Zo,i);if(n!==-1)return n+Zo.length;const r=i===0?e:e.slice(i);return this.headerListBuffer==null?this.headerListBuffer=r:this.headerListBuffer=Buffer.concat([this.headerListBuffer,r]),-1}onPartEnd(){const e=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==e)throw In.newError(`Expected length: ${e} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(e,i,n){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(e,i,n)}processPartData(e,i,n){this.actualPartLength+=n-i;const r=this.out;return r.write(i===0&&e.length===n?e:e.slice(i,n))?Promise.resolve():new Promise((a,s)=>{r.on("error",s),r.once("drain",()=>{r.removeListener("error",s),a()})})}}Ut.DataSplitter=_y;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.checkIsRangesSupported=ui.executeTasksUsingMultipleRangeRequests=void 0;const ya=pe(),el=Ut,tl=cr;function by(t,e,i,n,r){const a=s=>{if(s>=e.length){t.fileMetadataBuffer!=null&&i.write(t.fileMetadataBuffer),i.end();return}const o=s+1e3;Ty(t,{tasks:e,start:s,end:Math.min(e.length,o),oldFileFd:n},i,()=>a(o),r)};return a}ui.executeTasksUsingMultipleRangeRequests=by;function Ty(t,e,i,n,r){let a="bytes=",s=0;const o=new Map,l=[];for(let p=e.start;p<e.end;p++){const c=e.tasks[p];c.kind===tl.OperationKind.DOWNLOAD&&(a+=`${c.start}-${c.end-1}, `,o.set(s,p),s++,l.push(c.end-c.start))}if(s<=1){const p=c=>{if(c>=e.end){n();return}const h=e.tasks[c++];if(h.kind===tl.OperationKind.COPY)el.copyData(h,i,e.oldFileFd,r,()=>p(c));else{const _=t.createRequestOptions();_.headers.Range=`bytes=${h.start}-${h.end-1}`;const A=t.httpExecutor.createRequest(_,w=>{Ea(w,r)&&(w.pipe(i,{end:!1}),w.once("end",()=>p(c)))});t.httpExecutor.addErrorAndTimeoutHandlers(A,r),A.end()}};p(e.start);return}const d=t.createRequestOptions();d.headers.Range=a.substring(0,a.length-2);const u=t.httpExecutor.createRequest(d,p=>{if(!Ea(p,r))return;const c=ya.safeGetHeader(p,"content-type"),h=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(c);if(h==null){r(new Error(`Content-Type "multipart/byteranges" is expected, but got "${c}"`));return}const _=new el.DataSplitter(i,e,o,h[1]||h[2],l,n);_.on("error",r),p.pipe(_),p.on("end",()=>{setTimeout(()=>{u.abort(),r(new Error("Response ends without calling any handlers"))},1e4)})});t.httpExecutor.addErrorAndTimeoutHandlers(u,r),u.end()}function Ea(t,e){if(t.statusCode>=400)return e(ya.createHttpError(t)),!1;if(t.statusCode!==206){const i=ya.safeGetHeader(t,"accept-ranges");if(i==null||i==="none")return e(new Error(`Server doesn't support Accept-Ranges (response code ${t.statusCode})`)),!1}return!0}ui.checkIsRangesSupported=Ea;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.ProgressDifferentialDownloadCallbackTransform=void 0;const Ay=me;var ii;(function(t){t[t.COPY=0]="COPY",t[t.DOWNLOAD=1]="DOWNLOAD"})(ii||(ii={}));class Sy extends Ay.Transform{constructor(e,i,n){super(),this.progressDifferentialDownloadInfo=e,this.cancellationToken=i,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=ii.COPY,this.nextUpdate=this.start+1e3}_transform(e,i,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}if(this.operationType==ii.COPY){n(null,e);return}this.transferred+=e.length,this.delta+=e.length;const r=Date.now();r>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=r+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((r-this.start)/1e3))}),this.delta=0),n(null,e)}beginFileCopy(){this.operationType=ii.COPY}beginRangeDownload(){this.operationType=ii.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(e){if(this.cancellationToken.cancelled){e(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,e(null)}}pr.ProgressDifferentialDownloadCallbackTransform=Sy;Object.defineProperty(on,"__esModule",{value:!0});on.DifferentialDownloader=void 0;const Ai=pe(),Zr=Ht,Cy=Ge,Iy=Ut,Ny=Ve,Nn=cr,il=ui,Oy=pr;class Ry{constructor(e,i,n){this.blockAwareFileInfo=e,this.httpExecutor=i,this.options=n,this.fileMetadataBuffer=null,this.logger=n.logger}createRequestOptions(){const e={headers:{...this.options.requestHeaders,accept:"*/*"}};return Ai.configureRequestUrl(this.options.newUrl,e),Ai.configureRequestOptions(e),e}doDownload(e,i){if(e.version!==i.version)throw new Error(`version is different (${e.version} - ${i.version}), full download is required`);const n=this.logger,r=Nn.computeOperations(e,i,n);n.debug!=null&&n.debug(JSON.stringify(r,null,2));let a=0,s=0;for(const l of r){const d=l.end-l.start;l.kind===Nn.OperationKind.DOWNLOAD?a+=d:s+=d}const o=this.blockAwareFileInfo.size;if(a+s+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==o)throw new Error(`Internal error, size mismatch: downloadSize: ${a}, copySize: ${s}, newSize: ${o}`);return n.info(`Full: ${nl(o)}, To download: ${nl(a)} (${Math.round(a/(o/100))}%)`),this.downloadFile(r)}downloadFile(e){const i=[],n=()=>Promise.all(i.map(r=>Zr.close(r.descriptor).catch(a=>{this.logger.error(`cannot close file "${r.path}": ${a}`)})));return this.doDownloadFile(e,i).then(n).catch(r=>n().catch(a=>{try{this.logger.error(`cannot close files: ${a}`)}catch(s){try{console.error(s)}catch{}}throw r}).then(()=>{throw r}))}async doDownloadFile(e,i){const n=await Zr.open(this.options.oldFile,"r");i.push({descriptor:n,path:this.options.oldFile});const r=await Zr.open(this.options.newFile,"w");i.push({descriptor:r,path:this.options.newFile});const a=Cy.createWriteStream(this.options.newFile,{fd:r});await new Promise((s,o)=>{const l=[];let d;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const E=[];let f=0;for(const y of e)y.kind===Nn.OperationKind.DOWNLOAD&&(E.push(y.end-y.start),f+=y.end-y.start);const T={expectedByteCounts:E,grandTotal:f};d=new Oy.ProgressDifferentialDownloadCallbackTransform(T,this.options.cancellationToken,this.options.onProgress),l.push(d)}const u=new Ai.DigestTransform(this.blockAwareFileInfo.sha512);u.isValidateOnEnd=!1,l.push(u),a.on("finish",()=>{a.close(()=>{i.splice(1,1);try{u.validate()}catch(E){o(E);return}s(void 0)})}),l.push(a);let p=null;for(const E of l)E.on("error",o),p==null?p=E:p=p.pipe(E);const c=l[0];let h;if(this.options.isUseMultipleRangeRequest){h=il.executeTasksUsingMultipleRangeRequests(this,e,c,n,o),h(0);return}let _=0,A=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const w=this.createRequestOptions();w.redirect="manual",h=E=>{var f,T;if(E>=e.length){this.fileMetadataBuffer!=null&&c.write(this.fileMetadataBuffer),c.end();return}const y=e[E++];if(y.kind===Nn.OperationKind.COPY){d&&d.beginFileCopy(),Iy.copyData(y,c,n,o,()=>h(E));return}const I=`bytes=${y.start}-${y.end-1}`;w.headers.range=I,(T=(f=this.logger)===null||f===void 0?void 0:f.debug)===null||T===void 0||T.call(f,`download range: ${I}`),d&&d.beginRangeDownload();const O=this.httpExecutor.createRequest(w,b=>{b.statusCode>=400&&o(Ai.createHttpError(b)),b.pipe(c,{end:!1}),b.once("end",()=>{d&&d.endRangeDownload(),++_===100?(_=0,setTimeout(()=>h(E),1e3)):h(E)})});O.on("redirect",(b,N,g)=>{this.logger.info(`Redirect to ${$y(g)}`),A=g,Ai.configureRequestUrl(new Ny.URL(A),w),O.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(O,o),O.end()},h(0)})}async readRemoteBytes(e,i){const n=Buffer.allocUnsafe(i+1-e),r=this.createRequestOptions();r.headers.range=`bytes=${e}-${i}`;let a=0;if(await this.request(r,s=>{s.copy(n,a),a+=s.length}),a!==n.length)throw new Error(`Received data length ${a} is not equal to expected ${n.length}`);return n}request(e,i){return new Promise((n,r)=>{const a=this.httpExecutor.createRequest(e,s=>{il.checkIsRangesSupported(s,r)&&(s.on("data",i),s.on("end",()=>n()))});this.httpExecutor.addErrorAndTimeoutHandlers(a,r),a.end()})}}on.DifferentialDownloader=Ry;function nl(t,e=" KB"){return new Intl.NumberFormat("en").format((t/1024).toFixed(2))+e}function $y(t){const e=t.indexOf("?");return e<0?t:t.substring(0,e)}Object.defineProperty(sn,"__esModule",{value:!0});sn.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const Yt=Ht,Py=on,Dy=Aa;class ky extends Py.DifferentialDownloader{async download(){const e=this.blockAwareFileInfo,i=e.size,n=i-(e.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(n,i-1);const r=jp(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await Fy(this.options.oldFile),r)}}sn.FileWithEmbeddedBlockMapDifferentialDownloader=ky;function jp(t){return JSON.parse(Dy.inflateRawSync(t).toString())}async function Fy(t){const e=await Yt.open(t,"r");try{const i=(await Yt.fstat(e)).size,n=Buffer.allocUnsafe(4);await Yt.read(e,n,0,n.length,i-n.length);const r=Buffer.allocUnsafe(n.readUInt32BE(0));return await Yt.read(e,r,0,r.length,i-n.length-r.length),await Yt.close(e),jp(r)}catch(i){throw await Yt.close(e),i}}var rl;function al(){if(rl)return bi;rl=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.AppImageUpdater=void 0;const t=pe(),e=Qi,i=Ht,n=Ge,r=se,a=Up(),s=sn,o=hr(),l=ce;let d=class extends a.BaseUpdater{constructor(p,c){super(p,c)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(p){const c=p.updateInfoAndProvider.provider,h=l.findFile(c.resolveFiles(p.updateInfoAndProvider.info),"AppImage");return this.executeDownload({fileExtension:"AppImage",fileInfo:h,downloadUpdateOptions:p,task:async(_,A)=>{const w=process.env.APPIMAGE;if(w==null)throw t.newError("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let E=!1;try{const f={newUrl:h.url,oldFile:w,logger:this._logger,newFile:_,isUseMultipleRangeRequest:c.isUseMultipleRangeRequest,requestHeaders:p.requestHeaders,cancellationToken:p.cancellationToken};this.listenerCount(o.DOWNLOAD_PROGRESS)>0&&(f.onProgress=T=>this.emit(o.DOWNLOAD_PROGRESS,T)),await new s.FileWithEmbeddedBlockMapDifferentialDownloader(h.info,this.httpExecutor,f).download()}catch(f){this._logger.error(`Cannot download differentially, fallback to full download: ${f.stack||f}`),E=process.platform==="linux"}E&&await this.httpExecutor.download(h.url,_,A),await i.chmod(_,493)}})}doInstall(p){const c=process.env.APPIMAGE;if(c==null)throw t.newError("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");n.unlinkSync(c);let h;const _=r.basename(c);r.basename(p.installerPath)===_||!/\d+\.\d+\.\d+/.test(_)?h=c:h=r.join(r.dirname(c),r.basename(p.installerPath)),e.execFileSync("mv",["-f",p.installerPath,h]),h!==c&&this.emit("appimage-filename-updated",h);const A={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return p.isForceRunAfter?e.spawn(h,[],{detached:!0,stdio:"ignore",env:A}).unref():(A.APPIMAGE_EXIT_AFTER_INSTALL="true",e.execFileSync(h,[],{env:A})),!0}};return bi.AppImageUpdater=d,bi}var Si={},sl;function ol(){if(sl)return Si;sl=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.MacUpdater=void 0;const t=pe(),e=Ht,i=Ge,n=Ll,r=Ka(),a=ce,s=Qi,o=Le;let l=class extends r.AppUpdater{constructor(u,p){super(u,p),this.nativeUpdater=ze.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",c=>{this._logger.warn(c),this.emit("error",c)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0})}debug(u){this._logger.debug!=null&&this._logger.debug(u)}async doDownloadUpdate(u){let p=u.updateInfoAndProvider.provider.resolveFiles(u.updateInfoAndProvider.info);const c=this._logger,h="sysctl.proc_translated";let _=!1;try{this.debug("Checking for macOS Rosetta environment"),_=s.execFileSync("sysctl",[h],{encoding:"utf8"}).includes(`${h}: 1`),c.info(`Checked for macOS Rosetta environment (isRosetta=${_})`)}catch(f){c.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${f}`)}let A=!1;try{this.debug("Checking for arm64 in uname");const T=s.execFileSync("uname",["-a"],{encoding:"utf8"}).includes("ARM");c.info(`Checked 'uname -a': arm64=${T}`),A=A||T}catch(f){c.warn(`uname shell command to check for arm64 failed: ${f}`)}A=A||process.arch==="arm64"||_;const w=f=>{var T;return f.url.pathname.includes("arm64")||((T=f.info.url)===null||T===void 0?void 0:T.includes("arm64"))};A&&p.some(w)?p=p.filter(f=>A===w(f)):p=p.filter(f=>!w(f));const E=a.findFile(p,"zip",["pkg","dmg"]);if(E==null)throw t.newError(`ZIP file not provided: ${t.safeStringifyJson(p)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");return this.executeDownload({fileExtension:"zip",fileInfo:E,downloadUpdateOptions:u,task:(f,T)=>this.httpExecutor.download(E.url,f,T),done:f=>this.updateDownloaded(E,f)})}async updateDownloaded(u,p){var c,h;const _=p.downloadedFile,A=(c=u.info.size)!==null&&c!==void 0?c:(await e.stat(_)).size,w=this._logger,E=`fileToProxy=${u.url.href}`;this.debug(`Creating proxy server for native Squirrel.Mac (${E})`),(h=this.server)===null||h===void 0||h.close(),this.server=n.createServer(),this.debug(`Proxy server for native Squirrel.Mac is created (${E})`),this.server.on("close",()=>{w.info(`Proxy server for native Squirrel.Mac is closed (${E})`)});const f=T=>{const y=T.address();return typeof y=="string"?y:`http://127.0.0.1:${y==null?void 0:y.port}`};return await new Promise((T,y)=>{const I=o.randomBytes(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),O=Buffer.from(`autoupdater:${I}`,"ascii"),b=`/${o.randomBytes(64).toString("hex")}.zip`;this.server.on("request",(N,g)=>{const F=N.url;if(w.info(`${F} requested`),F==="/"){if(!N.headers.authorization||N.headers.authorization.indexOf("Basic ")===-1){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),w.warn("No authenthication info");return}const P=N.headers.authorization.split(" ")[1],R=Buffer.from(P,"base64").toString("ascii"),[L,H]=R.split(":");if(L!=="autoupdater"||H!==I){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),w.warn("Invalid authenthication credentials");return}const $=Buffer.from(`{ "url": "${f(this.server)}${b}" }`);g.writeHead(200,{"Content-Type":"application/json","Content-Length":$.length}),g.end($);return}if(!F.startsWith(b)){w.warn(`${F} requested, but not supported`),g.writeHead(404),g.end();return}w.info(`${b} requested by Squirrel.Mac, pipe ${_}`);let B=!1;g.on("finish",()=>{B||(this.nativeUpdater.removeListener("error",y),T([]))});const U=i.createReadStream(_);U.on("error",P=>{try{g.end()}catch(R){w.warn(`cannot end response: ${R}`)}B=!0,this.nativeUpdater.removeListener("error",y),y(new Error(`Cannot pipe "${_}": ${P}`))}),g.writeHead(200,{"Content-Type":"application/zip","Content-Length":A}),U.pipe(g)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${E})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${f(this.server)}, ${E})`),this.nativeUpdater.setFeedURL({url:f(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${O.toString("base64")}`}}),this.dispatchUpdateDownloaded(p),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",y),this.nativeUpdater.checkForUpdates()):T([])})})}quitAndInstall(){var u;this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),(u=this.server)===null||u===void 0||u.close()):(this.nativeUpdater.on("update-downloaded",()=>{var p;this.nativeUpdater.quitAndInstall(),(p=this.server)===null||p===void 0||p.close()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return Si.MacUpdater=l,Si}var Ci={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.GenericDifferentialDownloader=void 0;const Ly=on;class Uy extends Ly.DifferentialDownloader{download(e,i){return this.doDownload(e,i)}}ur.GenericDifferentialDownloader=Uy;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.verifySignature=void 0;const ll=pe(),Hp=Qi,My=Ki;function jy(t,e,i){return new Promise(n=>{const r=e.replace(/'/g,"''");Hp.execFile("powershell.exe",["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`Get-AuthenticodeSignature -LiteralPath '${r}' | ConvertTo-Json -Compress | ForEach-Object { [Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($_)) }`],{timeout:20*1e3},(a,s,o)=>{try{if(a!=null||o){cl(i,a,o),n(null);return}const l=Hy(Buffer.from(s,"base64").toString("utf-8"));if(l.Status===0){const u=ll.parseDn(l.SignerCertificate.Subject);let p=!1;for(const c of t){const h=ll.parseDn(c);if(h.size?p=Array.from(h.keys()).every(A=>h.get(A)===u.get(A)):c===u.get("CN")&&(i.warn(`Signature validated using only CN ${c}. Please add your full Distinguished Name (DN) to publisherNames configuration`),p=!0),p){n(null);return}}}const d=`publisherNames: ${t.join(" | ")}, raw info: `+JSON.stringify(l,(u,p)=>u==="RawData"?void 0:p,2);i.warn(`Sign verification failed, installer signed with incorrect certificate: ${d}`),n(d)}catch(l){cl(i,l,null),n(null);return}})})}dr.verifySignature=jy;function Hy(t){const e=JSON.parse(t);delete e.PrivateKey,delete e.IsOSBinary,delete e.SignatureType;const i=e.SignerCertificate;return i!=null&&(delete i.Archived,delete i.Extensions,delete i.Handle,delete i.HasPrivateKey,delete i.SubjectName),delete e.Path,e}function cl(t,e,i){if(By()){t.warn(`Cannot execute Get-AuthenticodeSignature: ${e||i}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{Hp.execFileSync("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(n){t.warn(`Cannot execute ConvertTo-Json: ${n.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}if(e!=null)throw e;if(i)throw new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${i}. Failing signature validation due to unknown stderr.`)}function By(){const t=My.release();return t.startsWith("6.")&&!t.startsWith("6.3")}var pl;function ul(){if(pl)return Ci;pl=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.NsisUpdater=void 0;const t=pe(),e=Qi,i=se,n=Up(),r=sn,a=ur,s=hr(),o=be,l=ce,d=Ht,u=dr,p=Ve,c=Aa;let h=class extends n.BaseUpdater{constructor(w,E){super(w,E)}doDownloadUpdate(w){const E=w.updateInfoAndProvider.provider,f=l.findFile(E.resolveFiles(w.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:w,fileInfo:f,task:async(T,y,I,O)=>{const b=f.packageInfo,N=b!=null&&I!=null;if(N&&w.disableWebInstaller)throw t.newError(`Unable to download new version ${w.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!N&&!w.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(N||await this.differentialDownloadInstaller(f,w,T,E))&&await this.httpExecutor.download(f.url,T,y);const g=await this.verifySignature(T);if(g!=null)throw await O(),t.newError(`New version ${w.updateInfoAndProvider.info.version} is not signed by the application owner: ${g}`,"ERR_UPDATER_INVALID_SIGNATURE");if(N&&await this.differentialDownloadWebPackage(w,b,I,E))try{await this.httpExecutor.download(new p.URL(b.path),I,{headers:w.requestHeaders,cancellationToken:w.cancellationToken,sha512:b.sha512})}catch(F){try{await d.unlink(I)}catch{}throw F}}})}async verifySignature(w){let E;try{if(E=(await this.configOnDisk.value).publisherName,E==null)return null}catch(f){if(f.code==="ENOENT")return null;throw f}return await u.verifySignature(Array.isArray(E)?E:[E],w,this._logger)}doInstall(w){const E=["--updated"];w.isSilent&&E.push("/S"),w.isForceRunAfter&&E.push("--force-run"),this.installDirectory&&E.push(`/D=${this.installDirectory}`);const f=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;f!=null&&E.push(`--package-file=${f}`);const T=()=>{_(i.join(process.resourcesPath,"elevate.exe"),[w.installerPath].concat(E)).catch(y=>this.dispatchError(y))};return w.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),T(),!0):(_(w.installerPath,E).catch(y=>{const I=y.code;this._logger.info(`Cannot run installer: error code: ${I}, error message: "${y.message}", will be executed again using elevate if EACCES"`),I==="UNKNOWN"||I==="EACCES"?T():this.dispatchError(y)}),!0)}async differentialDownloadInstaller(w,E,f,T){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const y=o.blockmapFiles(w.url,this.app.version,E.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${y[0]}", new: ${y[1]})`);const I=async N=>{const g=await this.httpExecutor.downloadToBuffer(N,{headers:E.requestHeaders,cancellationToken:E.cancellationToken});if(g==null||g.length===0)throw new Error(`Blockmap "${N.href}" is empty`);try{return JSON.parse(c.gunzipSync(g).toString())}catch(F){throw new Error(`Cannot parse blockmap "${N.href}", error: ${F}`)}},O={newUrl:w.url,oldFile:i.join(this.downloadedUpdateHelper.cacheDir,t.CURRENT_APP_INSTALLER_FILE_NAME),logger:this._logger,newFile:f,isUseMultipleRangeRequest:T.isUseMultipleRangeRequest,requestHeaders:E.requestHeaders,cancellationToken:E.cancellationToken};this.listenerCount(s.DOWNLOAD_PROGRESS)>0&&(O.onProgress=N=>this.emit(s.DOWNLOAD_PROGRESS,N));const b=await Promise.all(y.map(N=>I(N)));return await new a.GenericDifferentialDownloader(w.info,this.httpExecutor,O).download(b[0],b[1]),!1}catch(y){if(this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),this._testOnlyOptions!=null)throw y;return!0}}async differentialDownloadWebPackage(w,E,f,T){if(E.blockMapSize==null)return!0;try{const y={newUrl:new p.URL(E.path),oldFile:i.join(this.downloadedUpdateHelper.cacheDir,t.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:f,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:T.isUseMultipleRangeRequest,cancellationToken:w.cancellationToken};this.listenerCount(s.DOWNLOAD_PROGRESS)>0&&(y.onProgress=I=>this.emit(s.DOWNLOAD_PROGRESS,I)),await new r.FileWithEmbeddedBlockMapDifferentialDownloader(E,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};Ci.NsisUpdater=h;async function _(A,w){return new Promise((E,f)=>{try{const T=e.spawn(A,w,{detached:!0,stdio:"ignore"});T.on("error",y=>{f(y)}),T.unref(),T.pid!==void 0&&E(!0)}catch(T){f(T)}})}return Ci}var dl;function hr(){return dl||(dl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdaterSignal=t.UPDATE_DOWNLOADED=t.DOWNLOAD_PROGRESS=t.NsisUpdater=t.MacUpdater=t.AppImageUpdater=t.Provider=t.CancellationToken=t.NoOpLogger=t.AppUpdater=void 0;const e=pe();Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return e.CancellationToken}});var i=Ka();Object.defineProperty(t,"AppUpdater",{enumerable:!0,get:function(){return i.AppUpdater}}),Object.defineProperty(t,"NoOpLogger",{enumerable:!0,get:function(){return i.NoOpLogger}});var n=ce;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return n.Provider}});var r=al();Object.defineProperty(t,"AppImageUpdater",{enumerable:!0,get:function(){return r.AppImageUpdater}});var a=ol();Object.defineProperty(t,"MacUpdater",{enumerable:!0,get:function(){return a.MacUpdater}});var s=ul();Object.defineProperty(t,"NsisUpdater",{enumerable:!0,get:function(){return s.NsisUpdater}});let o;function l(){return process.platform==="win32"?o=new(ul()).NsisUpdater:process.platform==="darwin"?o=new(ol()).MacUpdater:o=new(al()).AppImageUpdater,o}Object.defineProperty(t,"autoUpdater",{enumerable:!0,get:()=>o||l()}),t.DOWNLOAD_PROGRESS="download-progress",t.UPDATE_DOWNLOADED="update-downloaded";class d{constructor(c){this.emitter=c}login(c){u(this.emitter,"login",c)}progress(c){u(this.emitter,t.DOWNLOAD_PROGRESS,c)}updateDownloaded(c){u(this.emitter,t.UPDATE_DOWNLOADED,c)}updateCancelled(c){u(this.emitter,"update-cancelled",c)}}t.UpdaterSignal=d;function u(p,c,h){p.on(c,h)}}(br)),br}var Ii=hr();function qy(t,e){var i=t;e.slice(0,-1).forEach(function(r){i=i[r]||{}});var n=e[e.length-1];return n in i}function hl(t){return typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function fl(t,e){return e==="constructor"&&typeof t[e]=="function"||e==="__proto__"}var zy=function(t,e){e||(e={});var i={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(i.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?i.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(y){i.bools[y]=!0});var n={};function r(y){return n[y].some(function(I){return i.bools[I]})}Object.keys(e.alias||{}).forEach(function(y){n[y]=[].concat(e.alias[y]),n[y].forEach(function(I){n[I]=[y].concat(n[y].filter(function(O){return I!==O}))})}),[].concat(e.string).filter(Boolean).forEach(function(y){i.strings[y]=!0,n[y]&&[].concat(n[y]).forEach(function(I){i.strings[I]=!0})});var a=e.default||{},s={_:[]};function o(y,I){return i.allBools&&/^--[^=]+$/.test(I)||i.strings[y]||i.bools[y]||n[y]}function l(y,I,O){for(var b=y,N=0;N<I.length-1;N++){var g=I[N];if(fl(b,g))return;b[g]===void 0&&(b[g]={}),(b[g]===Object.prototype||b[g]===Number.prototype||b[g]===String.prototype)&&(b[g]={}),b[g]===Array.prototype&&(b[g]=[]),b=b[g]}var F=I[I.length-1];fl(b,F)||((b===Object.prototype||b===Number.prototype||b===String.prototype)&&(b={}),b===Array.prototype&&(b=[]),b[F]===void 0||i.bools[F]||typeof b[F]=="boolean"?b[F]=O:Array.isArray(b[F])?b[F].push(O):b[F]=[b[F],O])}function d(y,I,O){if(!(O&&i.unknownFn&&!o(y,O)&&i.unknownFn(O)===!1)){var b=!i.strings[y]&&hl(I)?Number(I):I;l(s,y.split("."),b),(n[y]||[]).forEach(function(N){l(s,N.split("."),b)})}}Object.keys(i.bools).forEach(function(y){d(y,a[y]===void 0?!1:a[y])});var u=[];t.indexOf("--")!==-1&&(u=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var p=0;p<t.length;p++){var c=t[p],h,_;if(/^--.+=/.test(c)){var A=c.match(/^--([^=]+)=([\s\S]*)$/);h=A[1];var w=A[2];i.bools[h]&&(w=w!=="false"),d(h,w,c)}else if(/^--no-.+/.test(c))h=c.match(/^--no-(.+)/)[1],d(h,!1,c);else if(/^--.+/.test(c))h=c.match(/^--(.+)/)[1],_=t[p+1],_!==void 0&&!/^(-|--)[^-]/.test(_)&&!i.bools[h]&&!i.allBools&&(!n[h]||!r(h))?(d(h,_,c),p+=1):/^(true|false)$/.test(_)?(d(h,_==="true",c),p+=1):d(h,i.strings[h]?"":!0,c);else if(/^-[^-]+/.test(c)){for(var E=c.slice(1,-1).split(""),f=!1,T=0;T<E.length;T++){if(_=c.slice(T+2),_==="-"){d(E[T],_,c);continue}if(/[A-Za-z]/.test(E[T])&&_[0]==="="){d(E[T],_.slice(1),c),f=!0;break}if(/[A-Za-z]/.test(E[T])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(_)){d(E[T],_,c),f=!0;break}if(E[T+1]&&E[T+1].match(/\W/)){d(E[T],c.slice(T+2),c),f=!0;break}else d(E[T],i.strings[E[T]]?"":!0,c)}h=c.slice(-1)[0],!f&&h!=="-"&&(t[p+1]&&!/^(-|--)[^-]/.test(t[p+1])&&!i.bools[h]&&(!n[h]||!r(h))?(d(h,t[p+1],c),p+=1):t[p+1]&&/^(true|false)$/.test(t[p+1])?(d(h,t[p+1]==="true",c),p+=1):d(h,i.strings[h]?"":!0,c))}else if((!i.unknownFn||i.unknownFn(c)!==!1)&&s._.push(i.strings._||!hl(c)?c:Number(c)),e.stopEarly){s._.push.apply(s._,t.slice(p+1));break}}return Object.keys(a).forEach(function(y){qy(s,y.split("."))||(l(s,y.split("."),a[y]),(n[y]||[]).forEach(function(I){l(s,I.split("."),a[y])}))}),e["--"]?s["--"]=u.slice():u.forEach(function(y){s._.push(y)}),s};const Gy=md(zy);var Bp={exports:{}},Qa={exports:{}};const ml=Ve,gl=1800;let Vy=class{constructor(e){this.options=e||{},this.cookies=[]}set(e,i){let n=ml.parse(i||""),r=this.parse(e),a;return r.domain?(a=r.domain.replace(/^\./,""),(n.hostname.length<a.length||("."+n.hostname).substr(-a.length+1)!=="."+a)&&(r.domain=n.hostname)):r.domain=n.hostname,r.path||(r.path=this.getPath(n.pathname)),r.expires||(r.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||gl)||gl)*1e3)),this.add(r)}get(e){return this.list(e).map(i=>i.name+"="+i.value).join("; ")}list(e){let i=[],n,r;for(n=this.cookies.length-1;n>=0;n--){if(r=this.cookies[n],this.isExpired(r)){this.cookies.splice(n,n);continue}this.match(r,e)&&i.unshift(r)}return i}parse(e){let i={};return(e||"").toString().split(";").forEach(n=>{let r=n.split("="),a=r.shift().trim().toLowerCase(),s=r.join("=").trim(),o;if(a)switch(a){case"expires":s=new Date(s),s.toString()!=="Invalid Date"&&(i.expires=s);break;case"path":i.path=s;break;case"domain":o=s.toLowerCase(),o.length&&o.charAt(0)!=="."&&(o="."+o),i.domain=o;break;case"max-age":i.expires=new Date(Date.now()+(Number(s)||0)*1e3);break;case"secure":i.secure=!0;break;case"httponly":i.httponly=!0;break;default:i.name||(i.name=a,i.value=s)}}),i}match(e,i){let n=ml.parse(i||"");return!(n.hostname!==e.domain&&(e.domain.charAt(0)!=="."||("."+n.hostname).substr(-e.domain.length)!==e.domain)||this.getPath(n.pathname).substr(0,e.path.length)!==e.path||e.secure&&n.protocol!=="https:")}add(e){let i,n;if(!e||!e.name)return!1;for(i=0,n=this.cookies.length;i<n;i++)if(this.compare(this.cookies[i],e))return this.isExpired(e)?(this.cookies.splice(i,1),!1):(this.cookies[i]=e,!0);return this.isExpired(e)||this.cookies.push(e),!0}compare(e,i){return e.name===i.name&&e.path===i.path&&e.domain===i.domain&&e.secure===i.secure&&e.httponly===e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let i=(e||"/").split("/");return i.pop(),i=i.join("/").trim(),i.charAt(0)!=="/"&&(i="/"+i),i.substr(-1)!=="/"&&(i+="/"),i}};var Wy=Vy;const Yy="nodemailer",Xy="6.9.3",Ky="Easy as cake e-mail sending from your Node.js applications",Qy="lib/nodemailer.js",Jy={test:"grunt --trace-warnings"},Zy={type:"git",url:"https://github.com/nodemailer/nodemailer.git"},eE=["Nodemailer"],tE="Andris Reinman",iE="MIT-0",nE={url:"https://github.com/nodemailer/nodemailer/issues"},rE="https://nodemailer.com/",aE={"@aws-sdk/client-ses":"3.341.0","aws-sdk":"2.1386.0",bunyan:"1.8.15",chai:"4.3.7","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"8.8.0",grunt:"1.6.1","grunt-cli":"1.4.3","grunt-eslint":"24.1.0","grunt-mocha-test":"0.13.3",libbase64:"1.2.1",libmime:"5.2.1",libqp:"2.0.1",mocha:"10.2.0","nodemailer-ntlm-auth":"1.0.3",proxy:"1.0.2","proxy-test-server":"1.0.0",sinon:"15.1.0","smtp-server":"3.12.0"},sE={node:">=6.0.0"},lt={name:Yy,version:Xy,description:Ky,main:Qy,scripts:Jy,repository:Zy,keywords:eE,author:tE,license:iE,bugs:nE,homepage:rE,devDependencies:aE,engines:sE},oE=Ll,lE=fd,vl=Ve,cE=Aa,pE=me.PassThrough,qp=Wy,uE=lt,dE=Ji,hE=5;Qa.exports=function(t,e){return zp(t,e)};Qa.exports.Cookies=qp;function zp(t,e){e=e||{},e.fetchRes=e.fetchRes||new pE,e.cookies=e.cookies||new qp,e.redirects=e.redirects||0,e.maxRedirects=isNaN(e.maxRedirects)?hE:e.maxRedirects,e.cookie&&([].concat(e.cookie||[]).forEach(c=>{e.cookies.set(c,t)}),e.cookie=!1);let i=e.fetchRes,n=vl.parse(t),r=(e.method||"").toString().trim().toUpperCase()||"GET",a=!1,s,o,l=n.protocol==="https:"?lE:oE,d={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+uE.version};if(Object.keys(e.headers||{}).forEach(c=>{d[c.toLowerCase().trim()]=e.headers[c]}),e.userAgent&&(d["user-agent"]=e.userAgent),n.auth&&(d.Authorization="Basic "+Buffer.from(n.auth).toString("base64")),(s=e.cookies.get(t))&&(d.cookie=s),e.body){if(e.contentType!==!1&&(d["Content-Type"]=e.contentType||"application/x-www-form-urlencoded"),typeof e.body.pipe=="function")d["Transfer-Encoding"]="chunked",o=e.body,o.on("error",c=>{a||(a=!0,c.type="FETCH",c.sourceUrl=t,i.emit("error",c))});else{if(e.body instanceof Buffer)o=e.body;else if(typeof e.body=="object")try{o=Buffer.from(Object.keys(e.body).map(c=>{let h=e.body[c].toString().trim();return encodeURIComponent(c)+"="+encodeURIComponent(h)}).join("&"))}catch(c){if(a)return;a=!0,c.type="FETCH",c.sourceUrl=t,i.emit("error",c);return}else o=Buffer.from(e.body.toString().trim());d["Content-Type"]=e.contentType||"application/x-www-form-urlencoded",d["Content-Length"]=o.length}r=(e.method||"").toString().trim().toUpperCase()||"POST"}let u,p={method:r,host:n.hostname,path:n.path,port:n.port?n.port:n.protocol==="https:"?443:80,headers:d,rejectUnauthorized:!1,agent:!1};e.tls&&Object.keys(e.tls).forEach(c=>{p[c]=e.tls[c]}),n.protocol==="https:"&&n.hostname&&n.hostname!==p.host&&!dE.isIP(n.hostname)&&!p.servername&&(p.servername=n.hostname);try{u=l.request(p)}catch(c){return a=!0,setImmediate(()=>{c.type="FETCH",c.sourceUrl=t,i.emit("error",c)}),i}return e.timeout&&u.setTimeout(e.timeout,()=>{if(a)return;a=!0,u.abort();let c=new Error("Request Timeout");c.type="FETCH",c.sourceUrl=t,i.emit("error",c)}),u.on("error",c=>{a||(a=!0,c.type="FETCH",c.sourceUrl=t,i.emit("error",c))}),u.on("response",c=>{let h;if(!a){switch(c.headers["content-encoding"]){case"gzip":case"deflate":h=cE.createUnzip();break}if(c.headers["set-cookie"]&&[].concat(c.headers["set-cookie"]||[]).forEach(_=>{e.cookies.set(_,t)}),[301,302,303,307,308].includes(c.statusCode)&&c.headers.location){if(e.redirects++,e.redirects>e.maxRedirects){a=!0;let _=new Error("Maximum redirect count exceeded");_.type="FETCH",_.sourceUrl=t,i.emit("error",_),u.abort();return}return e.method="GET",e.body=!1,zp(vl.resolve(t,c.headers.location),e)}if(i.statusCode=c.statusCode,i.headers=c.headers,c.statusCode>=300&&!e.allowErrorResponse){a=!0;let _=new Error("Invalid status code "+c.statusCode);_.type="FETCH",_.sourceUrl=t,i.emit("error",_),u.abort();return}c.on("error",_=>{a||(a=!0,_.type="FETCH",_.sourceUrl=t,i.emit("error",_),u.abort())}),h?(c.pipe(h).pipe(i),h.on("error",_=>{a||(a=!0,_.type="FETCH",_.sourceUrl=t,i.emit("error",_),u.abort())})):c.pipe(i)}}),setImmediate(()=>{if(o)try{if(typeof o.pipe=="function")return o.pipe(u);u.write(o)}catch(c){a=!0,c.type="FETCH",c.sourceUrl=t,i.emit("error",c);return}u.end()}),i}var Ja=Qa.exports;(function(t){const e=Ve,i=Xi,n=Ge,r=Ja,a=Ul,s=Ji,o=Ki,l=5*60*1e3;let d;try{d=o.networkInterfaces()}catch{}t.exports.networkInterfaces=d;const u=(w,E)=>{let f=t.exports.networkInterfaces;return f?Object.keys(f).map(y=>f[y]).reduce((y,I)=>y.concat(I),[]).filter(y=>!y.internal||E).filter(y=>y.family==="IPv"+w||y.family===w).length>0:!0},p=(w,E,f,T)=>{if(f=f||{},!u(w,f.allowInternalNetworkInterfaces))return T(null,[]);(a.Resolver?new a.Resolver(f):a)["resolve"+w](E,(O,b)=>{if(O){switch(O.code){case a.NODATA:case a.NOTFOUND:case a.NOTIMP:case a.SERVFAIL:case a.CONNREFUSED:case a.REFUSED:case"EAI_AGAIN":return T(null,[])}return T(O)}return T(null,Array.isArray(b)?b:[].concat(b||[]))})},c=t.exports.dnsCache=new Map,h=(w,E)=>w?Object.assign({servername:w.servername,host:!w.addresses||!w.addresses.length?null:w.addresses.length===1?w.addresses[0]:w.addresses[Math.floor(Math.random()*w.addresses.length)]},E||{}):Object.assign({},E||{});t.exports.resolveHostname=(w,E)=>{if(w=w||{},!w.host&&w.servername&&(w.host=w.servername),!w.host||s.isIP(w.host)){let T={addresses:[w.host],servername:w.servername||!1};return E(null,h(T,{cached:!1}))}let f;if(c.has(w.host)&&(f=c.get(w.host),!f.expires||f.expires>=Date.now()))return E(null,h(f.value,{cached:!0}));p(4,w.host,w,(T,y)=>{if(T)return f?E(null,h(f.value,{cached:!0,error:T})):E(T);if(y&&y.length){let I={addresses:y,servername:w.servername||w.host};return c.set(w.host,{value:I,expires:Date.now()+(w.dnsTtl||l)}),E(null,h(I,{cached:!1}))}p(6,w.host,w,(I,O)=>{if(I)return f?E(null,h(f.value,{cached:!0,error:I})):E(I);if(O&&O.length){let b={addresses:O,servername:w.servername||w.host};return c.set(w.host,{value:b,expires:Date.now()+(w.dnsTtl||l)}),E(null,h(b,{cached:!1}))}try{a.lookup(w.host,{all:!0},(b,N)=>{if(b)return f?E(null,h(f.value,{cached:!0,error:b})):E(b);let g=N?N.filter(B=>u(B.family)).map(B=>B.address).shift():!1;if(N&&N.length&&!g&&console.warn(`Failed to resolve IPv${N[0].family} addresses with current network`),!g&&f)return E(null,h(f.value,{cached:!0}));let F={addresses:g?[g]:[w.host],servername:w.servername||w.host};return c.set(w.host,{value:F,expires:Date.now()+(w.dnsTtl||l)}),E(null,h(F,{cached:!1}))})}catch(b){return f?E(null,h(f.value,{cached:!0,error:b})):E(b)}})})},t.exports.parseConnectionUrl=w=>{w=w||"";let E={};return[e.parse(w,!0)].forEach(f=>{let T;switch(f.protocol){case"smtp:":E.secure=!1;break;case"smtps:":E.secure=!0;break;case"direct:":E.direct=!0;break}!isNaN(f.port)&&Number(f.port)&&(E.port=Number(f.port)),f.hostname&&(E.host=f.hostname),f.auth&&(T=f.auth.split(":"),E.auth||(E.auth={}),E.auth.user=T.shift(),E.auth.pass=T.join(":")),Object.keys(f.query||{}).forEach(y=>{let I=E,O=y,b=f.query[y];switch(isNaN(b)||(b=Number(b)),b){case"true":b=!0;break;case"false":b=!1;break}if(y.indexOf("tls.")===0)O=y.substr(4),E.tls||(E.tls={}),I=E.tls;else if(y.indexOf(".")>=0)return;O in I||(I[O]=b)})}),E},t.exports._logFunc=(w,E,f,T,y,...I)=>{let O={};Object.keys(f||{}).forEach(b=>{b!=="level"&&(O[b]=f[b])}),Object.keys(T||{}).forEach(b=>{b!=="level"&&(O[b]=T[b])}),w[E](O,y,...I)},t.exports.getLogger=(w,E)=>{w=w||{};let f={},T=["trace","debug","info","warn","error","fatal"];if(!w.logger)return T.forEach(I=>{f[I]=()=>!1}),f;let y=w.logger;return w.logger===!0&&(y=A(T)),T.forEach(I=>{f[I]=(O,b,...N)=>{t.exports._logFunc(y,I,E,O,b,...N)}}),f},t.exports.callbackPromise=(w,E)=>function(){let f=Array.from(arguments),T=f.shift();T?E(T):w(...f)},t.exports.resolveContent=(w,E,f)=>{let T;f||(T=new Promise((b,N)=>{f=t.exports.callbackPromise(b,N)}));let y=w&&w[E]&&w[E].content||w[E],I,O=(typeof w[E]=="object"&&w[E].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!y)return f(null,y);if(typeof y=="object"){if(typeof y.pipe=="function")return _(y,(b,N)=>{if(b)return f(b);w[E].content?w[E].content=N:w[E]=N,f(null,N)});if(/^https?:\/\//i.test(y.path||y.href))return I=r(y.path||y.href),_(I,f);if(/^data:/i.test(y.path||y.href)){let b=(y.path||y.href).match(/^data:((?:[^;]*;)*(?:[^,]*)),(.*)$/i);return b?f(null,/\bbase64$/i.test(b[1])?Buffer.from(b[2],"base64"):Buffer.from(decodeURIComponent(b[2]))):f(null,Buffer.from(0))}else if(y.path)return _(n.createReadStream(y.path),f)}return typeof w[E].content=="string"&&!["utf8","usascii","ascii"].includes(O)&&(y=Buffer.from(w[E].content,O)),setImmediate(()=>f(null,y)),T},t.exports.assign=function(){let w=Array.from(arguments),E=w.shift()||{};return w.forEach(f=>{Object.keys(f||{}).forEach(T=>{["tls","auth"].includes(T)&&f[T]&&typeof f[T]=="object"?(E[T]||(E[T]={}),Object.keys(f[T]).forEach(y=>{E[T][y]=f[T][y]})):E[T]=f[T]})}),E},t.exports.encodeXText=w=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(w))return w;let E=Buffer.from(w),f="";for(let T=0,y=E.length;T<y;T++){let I=E[T];I<33||I>126||I===43||I===61?f+="+"+(I<16?"0":"")+I.toString(16).toUpperCase():f+=String.fromCharCode(I)}return f};function _(w,E){let f=!1,T=[],y=0;w.on("error",I=>{f||(f=!0,E(I))}),w.on("readable",()=>{let I;for(;(I=w.read())!==null;)T.push(I),y+=I.length}),w.on("end",()=>{if(f)return;f=!0;let I;try{I=Buffer.concat(T,y)}catch(O){return E(O)}E(null,I)})}function A(w){let E=0,f=new Map;w.forEach(I=>{I.length>E&&(E=I.length)}),w.forEach(I=>{let O=I.toUpperCase();O.length<E&&(O+=" ".repeat(E-O.length)),f.set(I,O)});let T=(I,O,b,...N)=>{let g="";O&&(O.tnx==="server"?g="S: ":O.tnx==="client"&&(g="C: "),O.sid&&(g="["+O.sid+"] "+g),O.cid&&(g="[#"+O.cid+"] "+g)),b=i.format(b,...N),b.split(/\r?\n/).forEach(F=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),f.get(I),g+F)})},y={};return w.forEach(I=>{y[I]=T.bind(null,I)}),y}})(Bp);var Pe=Bp.exports;const fE=se,xl="application/octet-stream",mE="bin",wl=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),yl=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);var Gp={detectMimeType(t){if(!t)return xl;let e=fE.parse(t),i=(e.ext.substr(1)||e.name||"").split("?").shift().trim().toLowerCase(),n=xl;return yl.has(i)&&(n=yl.get(i)),Array.isArray(n)?n[0]:n},detectExtension(t){if(!t)return mE;let e=(t||"").toLowerCase().trim().split("/"),i=e.shift().trim(),n=e.join("/").trim();if(wl.has(i+"/"+n)){let r=wl.get(i+"/"+n);return Array.isArray(r)?r[0]:r}switch(i){case"text":return"txt";default:return"bin"}}};const gE=me.Transform;function _a(t){return typeof t=="string"&&(t=Buffer.from(t,"utf-8")),t.toString("base64")}function ba(t,e){if(t=(t||"").toString(),e=e||76,t.length<=e)return t;let i=[],n=0,r=e*1024;for(;n<t.length;){let a=t.substr(n,r).replace(new RegExp(".{"+e+"}","g"),`$&\r
`).trim();i.push(a),n+=r}return i.join(`\r
`).trim()}let vE=class extends gE{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,i,n){if(i!=="buffer"&&(e=Buffer.from(e,i)),!e||!e.length)return setImmediate(n);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let r=this._curLine+_a(e);if(this.options.lineLength){r=ba(r,this.options.lineLength);let a=r.lastIndexOf(`
`);a<0?(this._curLine=r,r=""):a===r.length-1?this._curLine="":(this._curLine=r.substr(a+1),r=r.substr(0,a+1))}r&&(this.outputBytes+=r.length,this.push(Buffer.from(r,"ascii"))),setImmediate(n)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=_a(this._remainingBytes)),this._curLine&&(this._curLine=ba(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}};var Vp={encode:_a,wrap:ba,Encoder:vE};const xE=me.Transform;function Ta(t){typeof t=="string"&&(t=Buffer.from(t,"utf-8"));let e=[[9],[10],[13],[32,60],[62,126]],i="",n;for(let r=0,a=t.length;r<a;r++){if(n=t[r],wE(n,e)&&!((n===32||n===9)&&(r===a-1||t[r+1]===10||t[r+1]===13))){i+=String.fromCharCode(n);continue}i+="="+(n<16?"0":"")+n.toString(16).toUpperCase()}return i}function Wp(t,e){if(t=(t||"").toString(),e=e||76,t.length<=e)return t;let i=0,n=t.length,r,a,s,o=Math.floor(e/3),l="";for(;i<n;){if(s=t.substr(i,e),r=s.match(/\r\n/)){s=s.substr(0,r.index+r[0].length),l+=s,i+=s.length;continue}if(s.substr(-1)===`
`){l+=s,i+=s.length;continue}else if(r=s.substr(-o).match(/\n.*?$/)){s=s.substr(0,s.length-(r[0].length-1)),l+=s,i+=s.length;continue}else if(s.length>e-o&&(r=s.substr(-o).match(/[ \t.,!?][^ \t.,!?]*$/)))s=s.substr(0,s.length-(r[0].length-1));else if(s.match(/[=][\da-f]{0,2}$/i))for((r=s.match(/[=][\da-f]{0,1}$/i))&&(s=s.substr(0,s.length-r[0].length));s.length>3&&s.length<n-i&&!s.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(r=s.match(/[=][\da-f]{2}$/gi))&&(a=parseInt(r[0].substr(1,2),16),!(a<128||(s=s.substr(0,s.length-3),a>=192))););i+s.length<n&&s.substr(-1)!==`
`?(s.length===e&&s.match(/[=][\da-f]{2}$/i)?s=s.substr(0,s.length-3):s.length===e&&(s=s.substr(0,s.length-1)),i+=s.length,s+=`=\r
`):i+=s.length,l+=s}return l}function wE(t,e){for(let i=e.length-1;i>=0;i--)if(e[i].length&&(e[i].length===1&&t===e[i][0]||e[i].length===2&&t>=e[i][0]&&t<=e[i][1]))return!0;return!1}class yE extends xE{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,i,n){let r;if(i!=="buffer"&&(e=Buffer.from(e,i)),!e||!e.length)return n();this.inputBytes+=e.length,this.options.lineLength?(r=this._curLine+Ta(e),r=Wp(r,this.options.lineLength),r=r.replace(/(^|\n)([^\n]*)$/,(a,s,o)=>(this._curLine=o,s)),r&&(this.outputBytes+=r.length,this.push(r))):(r=Ta(e),this.outputBytes+=r.length,this.push(r,"ascii")),n()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}}var Yp={encode:Ta,wrap:Wp,Encoder:yE};const Ni=Vp,EE=Yp,El=Gp;var fr={isPlainText(t,e){return!(typeof t!="string"||(e?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(t))},hasLongerLines(t,e){return t.length>128*1024?!0:new RegExp("^.{"+(e+1)+",}","m").test(t)},encodeWord(t,e,i){e=(e||"Q").toString().toUpperCase().trim().charAt(0),i=i||0;let n,r="UTF-8";if(i&&i>7+r.length&&(i-=7+r.length),e==="Q"?n=EE.encode(t).replace(/[^a-z0-9!*+\-/=]/gi,a=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return a===" "?"_":"="+(s.length===1?"0"+s:s)}):e==="B"&&(n=typeof t=="string"?t:Ni.encode(t),i=i?Math.max(3,(i-i%4)/4*3):0),i&&(e!=="B"?n:Ni.encode(t)).length>i)if(e==="Q")n=this.splitMimeEncodedString(n,i).join("?= =?"+r+"?"+e+"?");else{let a=[],s="";for(let o=0,l=n.length;o<l;o++){let d=n.charAt(o);/[\ud83c\ud83d\ud83e]/.test(d)&&o<l-1&&(d+=n.charAt(++o)),Buffer.byteLength(s+d)<=i||o===0?s+=d:(a.push(Ni.encode(s)),s=d)}s&&a.push(Ni.encode(s)),a.length>1?n=a.join("?= =?"+r+"?"+e+"?"):n=a.join("")}else e==="B"&&(n=Ni.encode(t));return"=?"+r+"?"+e+"?"+n+(n.substr(-2)==="?="?"":"?=")},encodeWords(t,e,i,n){i=i||0;let r,a=t.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!a)return t;if(n)return this.encodeWord(t,e,i);let s=t.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!s)return t;let o=a.index+(a[0].match(/[^\s]/)||{index:0}).index,l=s.index+(s[1]||"").length;return r=(o?t.substr(0,o):"")+this.encodeWord(t.substring(o,l),e||"Q",i)+(l<t.length?t.substr(l):""),r},buildHeaderValue(t){let e=[];return Object.keys(t.params||{}).forEach(i=>{let n=t.params[i];!this.isPlainText(n,!0)||n.length>=75?this.buildHeaderParam(i,n,50).forEach(r=>{!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(r.value)||r.key.substr(-1)==="*"?e.push(r.key+"="+r.value):e.push(r.key+"="+JSON.stringify(r.value))}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(n)?e.push(i+"="+JSON.stringify(n)):e.push(i+"="+n)}),t.value+(e.length?"; "+e.join("; "):"")},buildHeaderParam(t,e,i){let n=[],r=typeof e=="string"?e:(e||"").toString(),a,s,o,l,d=0,u,p;if(i=i||50,this.isPlainText(e,!0)){if(r.length<=i)return[{key:t,value:r}];r=r.replace(new RegExp(".{"+i+"}","g"),c=>(n.push({line:c}),"")),r&&n.push({line:r})}else{if(/[\uD800-\uDBFF]/.test(r)){for(a=[],u=0,p=r.length;u<p;u++)s=r.charAt(u),o=s.charCodeAt(0),o>=55296&&o<=56319&&u<p-1?(s+=r.charAt(u+1),a.push(s),u++):a.push(s);r=a}l="utf-8''";let c=!0;for(d=0,u=0,p=r.length;u<p;u++){if(s=r[u],c)s=this.safeEncodeURIComponent(s);else if(s=s===" "?s:this.safeEncodeURIComponent(s),s!==r[u])if((this.safeEncodeURIComponent(l)+s).length>=i)n.push({line:l,encoded:c}),l="",d=u-1;else{c=!0,u=d,l="";continue}(l+s).length>=i?(n.push({line:l,encoded:c}),l=s=r[u]===" "?" ":this.safeEncodeURIComponent(r[u]),s===r[u]?(c=!1,d=u-1):c=!0):l+=s}l&&n.push({line:l,encoded:c})}return n.map((c,h)=>({key:t+"*"+h+(c.encoded?"*":""),value:c.line}))},parseHeaderValue(t){let e={value:!1,params:{}},i=!1,n="",r="value",a=!1,s=!1,o;for(let l=0,d=t.length;l<d;l++)if(o=t.charAt(l),r==="key"){if(o==="="){i=n.trim().toLowerCase(),r="value",n="";continue}n+=o}else{if(s)n+=o;else if(o==="\\"){s=!0;continue}else a&&o===a?a=!1:!a&&o==='"'?a=o:!a&&o===";"?(i===!1?e.value=n.trim():e.params[i]=n.trim(),r="key",n=""):n+=o;s=!1}return r==="value"?i===!1?e.value=n.trim():e.params[i]=n.trim():n.trim()&&(e.params[n.trim().toLowerCase()]=""),Object.keys(e.params).forEach(l=>{let d,u,p,c;(p=l.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(d=l.substr(0,p.index),u=Number(p[2]||p[3])||0,(!e.params[d]||typeof e.params[d]!="object")&&(e.params[d]={charset:!1,values:[]}),c=e.params[l],u===0&&p[0].substr(-1)==="*"&&(p=c.match(/^([^']*)'[^']*'(.*)$/))&&(e.params[d].charset=p[1]||"iso-8859-1",c=p[2]),e.params[d].values[u]=c,delete e.params[l])}),Object.keys(e.params).forEach(l=>{let d;e.params[l]&&Array.isArray(e.params[l].values)&&(d=e.params[l].values.map(u=>u||"").join(""),e.params[l].charset?e.params[l]="=?"+e.params[l].charset+"?Q?"+d.replace(/[=?_\s]/g,u=>{let p=u.charCodeAt(0).toString(16);return u===" "?"_":"%"+(p.length<2?"0":"")+p}).replace(/%/g,"=")+"?=":e.params[l]=d)}),e},detectExtension:t=>El.detectExtension(t),detectMimeType:t=>El.detectMimeType(t),foldLines(t,e,i){t=(t||"").toString(),e=e||76;let n=0,r=t.length,a="",s,o;for(;n<r;){if(s=t.substr(n,e),s.length<e){a+=s;break}if(o=s.match(/^[^\n\r]*(\r?\n|\r)/)){s=o[0],a+=s,n+=s.length;continue}else(o=s.match(/(\s+)[^\s]*$/))&&o[0].length-(i?(o[1]||"").length:0)<s.length?s=s.substr(0,s.length-(o[0].length-(i?(o[1]||"").length:0))):(o=t.substr(n+s.length).match(/^[^\s]+(\s*)/))&&(s=s+o[0].substr(0,o[0].length-(i?0:(o[1]||"").length)));a+=s,n+=s.length,n<r&&(a+=`\r
`)}return a},splitMimeEncodedString:(t,e)=>{let i,n,r,a,s=[];for(e=Math.max(e||0,12);t.length;){for(i=t.substr(0,e),(n=i.match(/[=][0-9A-F]?$/i))&&(i=i.substr(0,n.index)),a=!1;!a;)a=!0,(n=t.substr(i.length).match(/^[=]([0-9A-F]{2})/i))&&(r=parseInt(n[1],16),r<194&&r>127&&(i=i.substr(0,i.length-3),a=!1));i.length&&s.push(i),t=t.substr(i.length)}return s},encodeURICharComponent:t=>{let e="",i=t.charCodeAt(0).toString(16).toUpperCase();if(i.length%2&&(i="0"+i),i.length>2)for(let n=0,r=i.length/2;n<r;n++)e+="%"+i.substr(n,2);else e+="%"+i;return e},safeEncodeURIComponent(t){t=(t||"").toString();try{t=encodeURIComponent(t)}catch{return t.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return t.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,e=>this.encodeURICharComponent(e))}};function _E(t){let e,i=!1,n="text",r,a=[],s={address:[],comment:[],group:[],text:[]},o,l;for(o=0,l=t.length;o<l;o++)if(e=t[o],e.type==="operator")switch(e.value){case"<":n="address";break;case"(":n="comment";break;case":":n="group",i=!0;break;default:n="text"}else e.value&&(n==="address"&&(e.value=e.value.replace(/^[^<]*<\s*/,"")),s[n].push(e.value));if(!s.text.length&&s.comment.length&&(s.text=s.comment,s.comment=[]),i)s.text=s.text.join(" "),a.push({name:s.text||r&&r.name,group:s.group.length?Xp(s.group.join(",")):[]});else{if(!s.address.length&&s.text.length){for(o=s.text.length-1;o>=0;o--)if(s.text[o].match(/^[^@\s]+@[^@\s]+$/)){s.address=s.text.splice(o,1);break}let d=function(u){return s.address.length?u:(s.address=[u.trim()]," ")};if(!s.address.length)for(o=s.text.length-1;o>=0&&(s.text[o]=s.text[o].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,d).trim(),!s.address.length);o--);}if(!s.text.length&&s.comment.length&&(s.text=s.comment,s.comment=[]),s.address.length>1&&(s.text=s.text.concat(s.address.splice(1))),s.text=s.text.join(" "),s.address=s.address.join(" "),!s.address&&i)return[];r={address:s.address||s.text||"",name:s.text||s.address||""},r.address===r.name&&((r.address||"").match(/@/)?r.name="":r.address=""),a.push(r)}return a}class bE{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e,i=[];for(let n=0,r=this.str.length;n<r;n++)e=this.str.charAt(n),this.checkChar(e);return this.list.forEach(n=>{n.value=(n.value||"").toString().trim(),n.value&&i.push(n)}),i}checkChar(e){if(!this.escaped){if(e===this.operatorExpecting){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&e in this.operators){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&e==="\\"){this.escaped=!0;return}}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),e===`
`&&(e=" "),(e.charCodeAt(0)>=33||[" ","	"].includes(e))&&(this.node.value+=e),this.escaped=!1}}function Xp(t,e){e=e||{};let n=new bE(t).tokenize(),r=[],a=[],s=[];if(n.forEach(o=>{o.type==="operator"&&(o.value===","||o.value===";")?(a.length&&r.push(a),a=[]):a.push(o)}),a.length&&r.push(a),r.forEach(o=>{o=_E(o),o.length&&(s=s.concat(o))}),e.flatten){let o=[],l=d=>{d.forEach(u=>{if(u.group)return l(u.group);o.push(u)})};return l(s),o}return s}var TE=Xp;const AE=me.Transform;let SE=class extends AE{constructor(){super(),this.lastByte=!1}_transform(e,i,n){e.length&&(this.lastByte=e[e.length-1]),this.push(e),n()}_flush(e){return this.lastByte===10?e():this.lastByte===13?(this.push(Buffer.from(`
`)),e()):(this.push(Buffer.from(`\r
`)),e())}};var CE=SE;const IE=me,NE=IE.Transform;let OE=class extends NE{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,i,n){let r,a=0;for(let s=0,o=e.length;s<o;s++)e[s]===10&&(s&&e[s-1]!==13||!s&&this.lastByte!==13)&&(s>a&&(r=e.slice(a,s),this.push(r)),this.push(Buffer.from(`\r
`)),a=s+1);a&&a<e.length?(r=e.slice(a),this.push(r)):a||this.push(e),this.lastByte=e[e.length-1],n()}};var Kp=OE;const RE=me,$E=RE.Transform;let PE=class extends $E{constructor(e){super(e),this.options=e||{}}_transform(e,i,n){let r,a=0;for(let s=0,o=e.length;s<o;s++)e[s]===13&&(r=e.slice(a,s),a=s+1,this.push(r));a&&a<e.length?(r=e.slice(a),this.push(r)):a||this.push(e),n()}};var DE=PE;const ea=Le,kE=Ge,FE=Ml,Oi=me.PassThrough,LE=Pe,je=fr,UE=Yp,ME=Vp,jE=TE,HE=Ja,BE=CE,qE=Kp,zE=DE;let GE=class Qp{constructor(e,i){this.nodeCounter=0,i=i||{},this.baseBoundary=i.baseBoundary||ea.randomBytes(8).toString("hex"),this.boundaryPrefix=i.boundaryPrefix||"--_NmP",this.disableFileAccess=!!i.disableFileAccess,this.disableUrlAccess=!!i.disableUrlAccess,this.normalizeHeaderKey=i.normalizeHeaderKey,this.date=new Date,this.rootNode=i.rootNode||this,this.keepBcc=!!i.keepBcc,i.filename&&(this.filename=i.filename,e||(e=je.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(i.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=i.parentNode,this.hostname=i.hostname,this.newline=i.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],e&&this.setHeader("Content-Type",e)}createChild(e,i){!i&&typeof e=="object"&&(i=e,e=void 0);let n=new Qp(e,i);return this.appendChild(n),n}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach((i,n)=>{i===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[n]=e)}),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,i){let n=!1,r;if(!i&&e&&typeof e=="object")return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach(a=>{this.setHeader(a.key,a.value)}):Object.keys(e).forEach(a=>{this.setHeader(a,e[a])}),this;e=this._normalizeHeaderKey(e),r={key:e,value:i};for(let a=0,s=this._headers.length;a<s;a++)this._headers[a].key===e&&(n?(this._headers.splice(a,1),a--,s--):(this._headers[a]=r,n=!0));return n||this._headers.push(r),this}addHeader(e,i){return!i&&e&&typeof e=="object"?(e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach(n=>{this.addHeader(n.key,n.value)}):Object.keys(e).forEach(n=>{this.addHeader(n,e[n])}),this):Array.isArray(i)?(i.forEach(n=>{this.addHeader(e,n)}),this):(this._headers.push({key:this._normalizeHeaderKey(e),value:i}),this)}getHeader(e){e=this._normalizeHeaderKey(e);for(let i=0,n=this._headers.length;i<n;i++)if(this._headers[i].key===e)return this._headers[i].value}setContent(e){return this.content=e,typeof this.content.pipe=="function"?(this._contentErrorHandler=i=>{this.content.removeListener("error",this._contentErrorHandler),this.content=i},this.content.once("error",this._contentErrorHandler)):typeof this.content=="string"&&(this._isPlainText=je.isPlainText(this.content),this._isPlainText&&je.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let i;e||(i=new Promise((o,l)=>{e=LE.callbackPromise(o,l)}));let n=this.createReadStream(),r=[],a=0,s=!1;return n.on("readable",()=>{let o;for(;(o=n.read())!==null;)r.push(o),a+=o.length}),n.once("error",o=>{if(!s)return s=!0,e(o)}),n.once("end",o=>{if(!s)return s=!0,o&&o.length&&(r.push(o),a+=o.length),e(null,Buffer.concat(r,a))}),i}getTransferEncoding(){let e=!1,i=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),(!e||!["base64","quoted-printable"].includes(e))&&(/^text\//i.test(i)?this._isPlainText&&!this._hasLongLines?e="7bit":typeof this.content=="string"||this.content instanceof Buffer?e=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64":e=this.textEncoding==="B"?"base64":"quoted-printable":/^(multipart|message)\//i.test(i)||(e=e||"base64"))),e}buildHeaders(){let e=this.getTransferEncoding(),i=[];return e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this&&(this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0")),this._headers.forEach(n=>{let r=n.key,a=n.value,s,o,l={};if(!(a&&typeof a=="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(r)&&(Object.keys(a).forEach(u=>{u!=="value"&&(l[u]=a[u])}),a=(a.value||"").toString(),!a.trim()))){if(l.prepared){l.foldLines?i.push(je.foldLines(r+": "+a)):i.push(r+": "+a);return}switch(n.key){case"Content-Disposition":s=je.parseHeaderValue(a),this.filename&&(s.params.filename=this.filename),a=je.buildHeaderValue(s);break;case"Content-Type":s=je.parseHeaderValue(a),this._handleContentType(s),s.value.match(/^text\/plain\b/)&&typeof this.content=="string"&&/[\u0080-\uFFFF]/.test(this.content)&&(s.params.charset="utf-8"),a=je.buildHeaderValue(s),this.filename&&(o=this._encodeWords(this.filename),(o!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(o))&&(o='"'+o+'"'),a+="; name="+o);break;case"Bcc":if(!this.keepBcc)return;break}if(a=this._encodeHeaderValue(r,a),!!(a||"").toString().trim()){if(typeof this.normalizeHeaderKey=="function"){let u=this.normalizeHeaderKey(r,a);u&&typeof u=="string"&&u.length&&(r=u)}i.push(je.foldLines(r+": "+a,76))}}}),i.join(`\r
`)}createReadStream(e){e=e||{};let i=new Oi(e),n=i,r;this.stream(i,e,a=>{if(a){n.emit("error",a);return}i.end()});for(let a=0,s=this._transforms.length;a<s;a++)r=typeof this._transforms[a]=="function"?this._transforms[a]():this._transforms[a],n.once("error",o=>{r.emit("error",o)}),n=n.pipe(r);r=new BE,n.once("error",a=>{r.emit("error",a)}),n=n.pipe(r);for(let a=0,s=this._processFuncs.length;a<s;a++)r=this._processFuncs[a],n=r(n);if(this.newline){const s=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new qE:new zE,o=n.pipe(s);return n.on("error",l=>o.emit("error",l)),o}return n}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,i,n){let r=this.getTransferEncoding(),a,s,o=!1,l=p=>{o||(o=!0,n(p))},d=()=>{let p=0,c=()=>{if(p>=this.childNodes.length)return e.write(`\r
--`+this.boundary+`--\r
`),l();let h=this.childNodes[p++];e.write((p>1?`\r
`:"")+"--"+this.boundary+`\r
`),h.stream(e,i,_=>{if(_)return l(_);setImmediate(c)})};if(this.multipart)setImmediate(c);else return l()},u=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return l(this.content);typeof this.content.pipe=="function"&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=c=>l(c),this.content.once("error",this._contentErrorHandler));let p=()=>{["quoted-printable","base64"].includes(r)?(a=new(r==="base64"?ME:UE).Encoder(i),a.pipe(e,{end:!1}),a.once("end",d),a.once("error",c=>l(c)),s=this._getStream(this.content),s.pipe(a)):(s=this._getStream(this.content),s.pipe(e,{end:!1}),s.once("end",d)),s.once("error",c=>l(c))};if(this.content._resolve){let c=[],h=0,_=!1,A=this._getStream(this.content);A.on("error",w=>{_||(_=!0,l(w))}),A.on("readable",()=>{let w;for(;(w=A.read())!==null;)c.push(w),h+=w.length}),A.on("end",()=>{_||(_=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(c,h),setImmediate(p))})}else setImmediate(p);return}else return setImmediate(d)};this._raw?setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return l(this._raw);typeof this._raw.pipe=="function"&&this._raw.removeListener("error",this._contentErrorHandler);let p=this._getStream(this._raw);p.pipe(e,{end:!1}),p.on("error",c=>e.emit("error",c)),p.on("end",d)}):(e.write(this.buildHeaders()+`\r
\r
`),setImmediate(u))}setEnvelope(e){let i;this._envelope={from:!1,to:[]},e.from&&(i=[],this._convertAddresses(this._parseAddresses(e.from),i),i=i.filter(r=>r&&r.address),i.length&&i[0]&&(this._envelope.from=i[0].address)),["to","cc","bcc"].forEach(r=>{e[r]&&this._convertAddresses(this._parseAddresses(e[r]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(r=>r.address).filter(r=>r);let n=["to","cc","bcc","from"];return Object.keys(e).forEach(r=>{n.includes(r)||(this._envelope[r]=e[r])}),this}getAddresses(){let e={};return this._headers.forEach(i=>{let n=i.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(n)&&(Array.isArray(e[n])||(e[n]=[]),this._convertAddresses(this._parseAddresses(i.value),e[n]))}),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach(i=>{let n=[];i.key==="From"||!e.from&&["Reply-To","Sender"].includes(i.key)?(this._convertAddresses(this._parseAddresses(i.value),n),n.length&&n[0]&&(e.from=n[0].address)):["To","Cc","Bcc"].includes(i.key)&&this._convertAddresses(this._parseAddresses(i.value),e.to)}),e.to=e.to.map(i=>i.address),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&typeof this._raw.pipe=="function"&&(this._contentErrorHandler=i=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=i},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let i;return e._resolvedValue?(i=new Oi,setImmediate(()=>{try{i.end(e._resolvedValue)}catch(n){i.emit("error",n)}}),i):typeof e.pipe=="function"?e:e&&typeof e.path=="string"&&!e.href?this.disableFileAccess?(i=new Oi,setImmediate(()=>i.emit("error",new Error("File access rejected for "+e.path))),i):kE.createReadStream(e.path):e&&typeof e.href=="string"?this.disableUrlAccess?(i=new Oi,setImmediate(()=>i.emit("error",new Error("Url access rejected for "+e.href))),i):HE(e.href,{headers:e.httpHeaders}):(i=new Oi,setImmediate(()=>{try{i.end(e||"")}catch(n){i.emit("error",n)}}),i)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map(i=>i&&i.address?(i.address=this._normalizeAddress(i.address),i.name=i.name||"",[i]):jE(i)))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,i=>i.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),e}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,i){switch(e=this._normalizeHeaderKey(e),e){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(i));case"Message-ID":case"In-Reply-To":case"Content-Id":return i=(i||"").toString().replace(/\r?\n|\r/g," "),i.charAt(0)!=="<"&&(i="<"+i),i.charAt(i.length-1)!==">"&&(i=i+">"),i;case"References":return i=[].concat.apply([],[].concat(i||"").map(n=>(n=(n||"").toString().replace(/\r?\n|\r/g," ").trim(),n.replace(/<[^>]*>/g,r=>r.replace(/\s/g,"")).split(/\s+/)))).map(n=>(n.charAt(0)!=="<"&&(n="<"+n),n.charAt(n.length-1)!==">"&&(n=n+">"),n)),i.join(" ").trim();case"Date":return Object.prototype.toString.call(i)==="[object Date]"?i.toUTCString().replace(/GMT/,"+0000"):(i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i));case"Content-Type":case"Content-Disposition":return(i||"").toString().replace(/\r?\n|\r/g," ");default:return i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i)}}_convertAddresses(e,i){let n=[];return i=i||[],[].concat(e||[]).forEach(r=>{if(r.address)r.address=this._normalizeAddress(r.address),r.name?r.name&&n.push(`${this._encodeAddressName(r.name)} <${r.address}>`):n.push(r.address.indexOf(" ")>=0?`<${r.address}>`:`${r.address}`),r.address&&(i.filter(a=>a.address===r.address).length||i.push(r));else if(r.group){let a=(r.group.length?this._convertAddresses(r.group,i):"").trim();n.push(`${this._encodeAddressName(r.name)}:${a};`)}}),n.join(", ")}_normalizeAddress(e){e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let i=e.lastIndexOf("@");if(i<0)return e;let n=e.substr(0,i),r=e.substr(i+1),a;try{a=FE.toASCII(r.toLowerCase())}catch{}return n.indexOf(" ")>=0&&(n.charAt(0)!=='"'&&(n='"'+n),n.substr(-1)!=='"'&&(n=n+'"')),`${n}@${a}`}_encodeAddressName(e){return/^[\w ']*$/.test(e)?e:/^[\x20-\x7e]*$/.test(e)?'"'+e.replace(/([\\"])/g,"\\$1")+'"':je.encodeWord(e,this._getTextEncoding(e),52)}_encodeWords(e){return je.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let i=this.textEncoding,n,r;return i||(r=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,n=(e.match(/[a-z]/gi)||[]).length,i=r<n?"Q":"B"),i}_generateMessageId(){return"<"+[2,2,2,6].reduce((e,i)=>e+"-"+ea.randomBytes(i).toString("hex"),ea.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}};var Jp=GE;const Ri=Jp,ta=fr;let VE=class{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(e=>/^text\/html\b/i.test(e.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw?this.message=new Ri("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(e=>{let i=e.replace(/-(\w)/g,(n,r)=>r.toUpperCase());this.mail[i]&&this.message.setHeader(e,this.mail[i])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let i,n,r=[].concat(this.mail.attachments||[]).map((a,s)=>{let o,l=/^message\//i.test(a.contentType);return/^data:/i.test(a.path||a.href)&&(a=this._processDataUrl(a)),o={contentType:a.contentType||ta.detectMimeType(a.filename||a.path||a.href||"bin"),contentDisposition:a.contentDisposition||(l?"inline":"attachment"),contentTransferEncoding:"contentTransferEncoding"in a?a.contentTransferEncoding:"base64"},a.filename?o.filename=a.filename:!l&&a.filename!==!1&&(o.filename=(a.path||a.href||"").split("/").pop().split("?").shift()||"attachment-"+(s+1),o.filename.indexOf(".")<0&&(o.filename+="."+ta.detectExtension(o.contentType))),/^https?:\/\//i.test(a.path)&&(a.href=a.path,a.path=void 0),a.cid&&(o.cid=a.cid),a.raw?o.raw=a.raw:a.path?o.content={path:a.path}:a.href?o.content={href:a.href,httpHeaders:a.httpHeaders}:o.content=a.content||"",a.encoding&&(o.encoding=a.encoding),a.headers&&(o.headers=a.headers),o});return this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?i=this.mail.icalEvent:i={content:this.mail.icalEvent},n={},Object.keys(i).forEach(a=>{n[a]=i[a]}),n.contentType="application/ics",n.headers||(n.headers={}),n.filename=n.filename||"invite.ics",n.headers["Content-Disposition"]="attachment",n.headers["Content-Transfer-Encoding"]="base64"),e?{attached:r.filter(a=>!a.cid).concat(n||[]),related:r.filter(a=>!!a.cid)}:{attached:r.concat(n||[]),related:[]}}getAlternatives(){let e=[],i,n,r,a,s,o;return this.mail.text&&(typeof this.mail.text=="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?i=this.mail.text:i={content:this.mail.text},i.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(typeof this.mail.watchHtml=="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?r=this.mail.watchHtml:r={content:this.mail.watchHtml},r.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(typeof this.mail.amp=="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?a=this.mail.amp:a={content:this.mail.amp},a.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?s=this.mail.icalEvent:s={content:this.mail.icalEvent},o={},Object.keys(s).forEach(l=>{o[l]=s[l]}),o.content&&typeof o.content=="object"&&(o.content._resolve=!0),o.filename=!1,o.contentType="text/calendar; charset=utf-8; method="+(o.method||"PUBLISH").toString().trim().toUpperCase(),o.headers||(o.headers={})),this.mail.html&&(typeof this.mail.html=="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?n=this.mail.html:n={content:this.mail.html},n.contentType="text/html; charset=utf-8"),[].concat(i||[]).concat(r||[]).concat(a||[]).concat(n||[]).concat(o||[]).concat(this.mail.alternatives||[]).forEach(l=>{let d;/^data:/i.test(l.path||l.href)&&(l=this._processDataUrl(l)),d={contentType:l.contentType||ta.detectMimeType(l.filename||l.path||l.href||"txt"),contentTransferEncoding:l.contentTransferEncoding},l.filename&&(d.filename=l.filename),/^https?:\/\//i.test(l.path)&&(l.href=l.path,l.path=void 0),l.raw?d.raw=l.raw:l.path?d.content={path:l.path}:l.href?d.content={href:l.href}:d.content=l.content||"",l.encoding&&(d.encoding=l.encoding),l.headers&&(d.headers=l.headers),e.push(d)}),e}_createMixed(e){let i;return e?i=e.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new Ri("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(i):this._useRelated&&this._createRelated(i),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(n=>{(!this._useRelated||n!==this._htmlNode)&&this._createContentNode(i,n)}),i}_createAlternative(e){let i;return e?i=e.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new Ri("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(n=>{this._useRelated&&this._htmlNode===n?this._createRelated(i):this._createContentNode(i,n)}),i}_createRelated(e){let i;return e?i=e.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new Ri('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(i,this._htmlNode),this._attachments.related.forEach(n=>this._createContentNode(i,n)),i}_createContentNode(e,i){i=i||{},i.content=i.content||"";let n,r=(i.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return e?n=e.createChild(i.contentType,{filename:i.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):n=new Ri(i.contentType,{filename:i.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),i.headers&&n.addHeader(i.headers),i.cid&&n.setHeader("Content-Id","<"+i.cid.replace(/[<>]/g,"")+">"),i.contentTransferEncoding?n.setHeader("Content-Transfer-Encoding",i.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(i.contentType)&&n.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(i.contentType)||i.contentDisposition)&&n.setHeader("Content-Disposition",i.contentDisposition||(i.cid?"inline":"attachment")),typeof i.content=="string"&&!["utf8","usascii","ascii"].includes(r)&&(i.content=Buffer.from(i.content,r)),i.raw?n.setRaw(i.raw):n.setContent(i.content),n}_processDataUrl(e){let i=(e.path||e.href).match(/^data:((?:[^;]*;)*(?:[^,]*)),(.*)$/i);return i&&(e.content=/\bbase64$/i.test(i[1])?Buffer.from(i[2],"base64"):Buffer.from(decodeURIComponent(i[2])),"path"in e&&(e.path=!1),"href"in e&&(e.href=!1),i[1].split(";").forEach(n=>{/^\w+\/[^/]+$/i.test(n)&&(e.contentType=e.contentType||n.toLowerCase())})),e}};var WE=VE;const YE=me.Transform;let XE=class extends YE{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let i=this.lastBytes.length,n=Math.min(e.length,i);for(let r=0,a=i-n;r<a;r++)this.lastBytes[r]=this.lastBytes[r+n];for(let r=1;r<=n;r++)this.lastBytes[i-r]=e[e.length-r]}checkHeaders(e){if(this.headersParsed)return!0;let i=this.lastBytes.length,n=0;this.curLinePos=0;for(let r=0,a=this.lastBytes.length+e.length;r<a;r++){let s;if(r<i?s=this.lastBytes[r]:s=e[r-i],s===10&&r){let o=r-1<i?this.lastBytes[r-1]:e[r-1-i],l=r>1?r-2<i?this.lastBytes[r-2]:e[r-2-i]:!1;if(o===10){this.headersParsed=!0,n=r-i+1,this.headerBytes+=n;break}else if(o===13&&l===10){this.headersParsed=!0,n=r-i+1,this.headerBytes+=n;break}}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,n)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>n){let r=e.slice(n);this.bodySize+=r.length,setImmediate(()=>this.push(r))}return!1}else this.headerBytes+=e.length,this.headerChunks.push(e);return this.updateLastBytes(e),!1}_transform(e,i,n){if(!e||!e.length)return n();typeof e=="string"&&(e=Buffer.from(e,i));let r;try{r=this.checkHeaders(e)}catch(a){return n(a)}r&&(this.bodySize+=e.length,this.push(e)),setImmediate(n)}_flush(e){if(this.headerChunks){let i=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=i.length,this.push(i),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let i=e.length-1;i>0;i--)/^\s/.test(e[i])&&(e[i-1]+=`
`+e[i],e.splice(i,1));return e.filter(i=>i.trim()).map(i=>({key:i.substr(0,i.indexOf(":")).trim().toLowerCase(),line:i}))}};var KE=XE;const QE=me.Transform,JE=Le;let ZE=class extends QE{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=JE.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=e.debug?[]:!1}updateHash(e){let i,n="",r="file";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(r==="file"&&(o===10||o===13))){if(r==="file"&&(o===9||o===32))r="line";else if(!(r==="line"&&(o===9||o===32))){if((r==="file"||r==="line")&&(r="body",s===e.length-1))break}}if(s===0){if(r==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||r==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=e.toString("binary");return}else if(r==="line"||r==="file"){n=e.toString("binary"),e=!1;break}}if(r==="body"){n=e.slice(s+1).toString("binary"),e=e.slice(0,s+1);break}}let a=!!this.remainder;if(e&&!a){for(let s=0,o=e.length;s<o;s++)if(s&&e[s]===10&&e[s-1]!==13){a=!0;break}else if(s&&e[s]===13&&e[s-1]===32){a=!0;break}else if(s&&e[s]===32&&e[s-1]===32){a=!0;break}else if(e[s]===9){a=!0;break}}a?(i=this.remainder+(e?e.toString("binary"):""),this.remainder=n,i=i.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),e=Buffer.from(i,"binary")):n&&(this.remainder=n),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,i,n){if(!e||!e.length)return n();typeof e=="string"&&(e=Buffer.from(e,i)),this.updateHash(e),this.byteLength+=e.length,this.push(e),n()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from(`\r
`)),this.byteLength||this.push(Buffer.from(`\r
`)),this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),e()}};var e_=ZE,Za={exports:{}};const t_=Ml,i_=fr,n_=Le;Za.exports=(t,e,i,n)=>{n=n||{};let r="From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",a=n.headerFieldNames||r,s=Zp(t,a,n.skipFields),o=r_(n.domainName,n.keySelector,s.fieldNames,e,i),l,d;s.headers+="dkim-signature:"+eu(o),l=n_.createSign(("rsa-"+e).toUpperCase()),l.update(s.headers);try{d=l.sign(n.privateKey,"base64")}catch{return!1}return o+d.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()};Za.exports.relaxedHeaders=Zp;function r_(t,e,i,n,r){let a=["v=1","a=rsa-"+n,"c=relaxed/relaxed","d="+t_.toASCII(t),"q=dns/txt","s="+e,"bh="+r,"h="+i].join("; ");return i_.foldLines("DKIM-Signature: "+a,76)+`;\r
 b=`}function Zp(t,e,i){let n=new Set,r=new Set,a=new Map;(i||"").toLowerCase().split(":").forEach(l=>{r.add(l.trim())}),(e||"").toLowerCase().split(":").filter(l=>!r.has(l.trim())).forEach(l=>{n.add(l.trim())});for(let l=t.length-1;l>=0;l--){let d=t[l];n.has(d.key)&&!a.has(d.key)&&a.set(d.key,eu(d.line))}let s=[],o=[];return n.forEach(l=>{a.has(l)&&(o.push(l),s.push(l+":"+a.get(l)))}),{headers:s.join(`\r
`)+`\r
`,fieldNames:o.join(":")}}function eu(t){return t.substr(t.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}var a_=Za.exports;const s_=KE,o_=e_,l_=a_,ia=me.PassThrough,na=Ge,c_=se,p_=Le,u_="sha256",d_=128*1024;class h_{constructor(e,i,n,r){this.options=e||{},this.keys=i,this.cacheTreshold=Number(this.options.cacheTreshold)||d_,this.hashAlgo=this.options.hashAlgo||u_,this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?c_.join(this.cacheDir,"message."+Date.now()+"-"+p_.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=n,this.output=r,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",a=>{this.hasErrored=!0,this.cleanup(),r.emit("error",a)})}cleanup(){!this.cache||!this.cachePath||na.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=na.createReadStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.output.emit("error",e)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(this.output.write(e)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let e=0,i=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let n=this.keys[e++],r=l_(this.headers,this.hashAlgo,this.bodyHash,{domainName:n.domainName,keySelector:n.keySelector,privateKey:n.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return r&&this.output.write(Buffer.from(r+`\r
`)),setImmediate(i)};if(this.bodyHash&&this.headers)return i();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=na.createWriteStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;this.relaxedBody.read()!==null;);}),this.hasErrored=!0,this.output.emit("error",e)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new s_,this.relaxedBody=new o_({hashAlgo:this.hashAlgo}),this.parser.on("headers",e=>{this.headers=e}),this.relaxedBody.on("hash",e=>{this.bodyHash=e}),this.relaxedBody.on("readable",()=>{let e;if(!this.cache){for(;(e=this.relaxedBody.read())!==null;)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}}let f_=class{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,i){let n=new ia,r=e,a=!1;Buffer.isBuffer(e)?(a=e,r=new ia):typeof e=="string"&&(a=Buffer.from(e),r=new ia);let s=this.options;i&&Object.keys(i).length&&(s={},Object.keys(this.options||{}).forEach(l=>{s[l]=this.options[l]}),Object.keys(i||{}).forEach(l=>{l in s||(s[l]=i[l])}));let o=new h_(s,this.keys,r,n);return setImmediate(()=>{o.signStream(),a&&setImmediate(()=>{r.end(a)})}),n}};var m_=f_;const _l=Ji,bl=jl,g_=Ve;function tu(t,e,i,n){let r=g_.parse(t),a,s,o;a={host:r.hostname,port:Number(r.port)?Number(r.port):r.protocol==="https:"?443:80},r.protocol==="https:"?(a.rejectUnauthorized=!1,s=bl.connect.bind(bl)):s=_l.connect.bind(_l);let l=!1,d=p=>{if(!l){l=!0;try{o.destroy()}catch{}n(p)}},u=()=>{let p=new Error("Proxy socket timed out");p.code="ETIMEDOUT",d(p)};o=s(a,()=>{if(l)return;let p={Host:i+":"+e,Connection:"close"};r.auth&&(p["Proxy-Authorization"]="Basic "+Buffer.from(r.auth).toString("base64")),o.write("CONNECT "+i+":"+e+` HTTP/1.1\r
`+Object.keys(p).map(_=>_+": "+p[_]).join(`\r
`)+`\r
\r
`);let c="",h=_=>{let A,w;if(!l&&(c+=_.toString("binary"),A=c.match(/\r\n\r\n/))){if(o.removeListener("data",h),w=c.substr(A.index+A[0].length),c=c.substr(0,A.index),w&&o.unshift(Buffer.from(w,"binary")),l=!0,A=c.match(/^HTTP\/\d+\.\d+ (\d+)/i),!A||(A[1]||"").charAt(0)!=="2"){try{o.destroy()}catch{}return n(new Error("Invalid response from proxy"+(A&&": "+A[1]||"")))}return o.removeListener("error",d),o.removeListener("timeout",u),o.setTimeout(0),n(null,o)}};o.on("data",h)}),o.setTimeout(tu.timeout||30*1e3),o.on("timeout",u),o.once("error",d)}var v_=tu;const Tl=Pe,x_=Jp,Xt=fr;let w_=class{constructor(e,i){this.mailer=e,this.data={},this.message=null,i=i||{};let n=e.options||{},r=e._defaults||{};Object.keys(i).forEach(a=>{this.data[a]=i[a]}),this.data.headers=this.data.headers||{},Object.keys(r).forEach(a=>{a in this.data?a==="headers"&&Object.keys(r.headers).forEach(s=>{s in this.data.headers||(this.data.headers[s]=r.headers[s])}):this.data[a]=r[a]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(a=>{a in n&&(this.data[a]=n[a])})}resolveContent(...e){return Tl.resolveContent(...e)}resolveAll(e){let i=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((l,d)=>{i.push([this.data.alternatives,d])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((l,d)=>{l.filename||(l.filename=(l.path||l.href||"").split("/").pop().split("?").shift()||"attachment-"+(d+1),l.filename.indexOf(".")<0&&(l.filename+="."+Xt.detectExtension(l.contentType))),l.contentType||(l.contentType=Xt.detectMimeType(l.filename||l.path||l.href||"bin")),i.push([this.data.attachments,d])});let n=new x_;["from","to","cc","bcc","sender","replyTo"].forEach(l=>{let d;this.message?d=[].concat(n._parseAddresses(this.message.getHeader(l==="replyTo"?"reply-to":l))||[]):this.data[l]&&(d=[].concat(n._parseAddresses(this.data[l])||[])),d&&d.length?this.data[l]=d:l in this.data&&(this.data[l]=null)}),["from","sender"].forEach(l=>{this.data[l]&&(this.data[l]=this.data[l].shift())});let s=0,o=()=>{if(s>=i.length)return e(null,this.data);let l=i[s++];if(!l[0]||!l[0][l[1]])return o();Tl.resolveContent(...l,(d,u)=>{if(d)return e(d);let p={content:u};l[0][l[1]]&&typeof l[0][l[1]]=="object"&&!Buffer.isBuffer(l[0][l[1]])&&Object.keys(l[0][l[1]]).forEach(c=>{!(c in p)&&!["content","path","href","raw"].includes(c)&&(p[c]=l[0][l[1]][c])}),l[0][l[1]]=p,o()})};setImmediate(()=>o())}normalize(e){let i=this.data.envelope||this.message.getEnvelope(),n=this.message.messageId();this.resolveAll((r,a)=>r?e(r):(a.envelope=i,a.messageId=n,["html","text","watchHtml","amp"].forEach(s=>{a[s]&&a[s].content&&(typeof a[s].content=="string"?a[s]=a[s].content:Buffer.isBuffer(a[s].content)&&(a[s]=a[s].content.toString()))}),a.icalEvent&&Buffer.isBuffer(a.icalEvent.content)&&(a.icalEvent.content=a.icalEvent.content.toString("base64"),a.icalEvent.encoding="base64"),a.alternatives&&a.alternatives.length&&a.alternatives.forEach(s=>{s&&s.content&&Buffer.isBuffer(s.content)&&(s.content=s.content.toString("base64"),s.encoding="base64")}),a.attachments&&a.attachments.length&&a.attachments.forEach(s=>{s&&s.content&&Buffer.isBuffer(s.content)&&(s.content=s.content.toString("base64"),s.encoding="base64")}),a.normalizedHeaders={},Object.keys(a.headers||{}).forEach(s=>{let o=[].concat(a.headers[s]||[]).shift();o=o&&o.value||o,o&&(["references","in-reply-to","message-id","content-id"].includes(s)&&(o=this.message._encodeHeaderValue(s,o)),a.normalizedHeaders[s]=o)}),a.list&&typeof a.list=="object"&&this._getListHeaders(a.list).forEach(o=>{a.normalizedHeaders[o.key]=o.value.map(l=>l&&l.value||l).join(", ")}),a.references&&(a.normalizedHeaders.references=this.message._encodeHeaderValue("references",a.references)),a.inReplyTo&&(a.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",a.inReplyTo)),e(null,a)))}setMailerHeader(){!this.message||!this.data.xMailer||this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!(!this.message||!this.data.priority))switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break}}setListHeaders(){!this.message||!this.data.list||typeof this.data.list!="object"||this.data.list&&typeof this.data.list=="object"&&this._getListHeaders(this.data.list).forEach(e=>{e.value.forEach(i=>{this.message.addHeader(e.key,i)})})}_getListHeaders(e){return Object.keys(e).map(i=>({key:"list-"+i.toLowerCase().trim(),value:[].concat(e[i]||[]).map(n=>({prepared:!0,foldLines:!0,value:[].concat(n||[]).map(r=>{if(typeof r=="string"&&(r={url:r}),r&&r.url){if(i.toLowerCase().trim()==="id"){let s=r.comment||"";return Xt.isPlainText(s)?s='"'+s+'"':s=Xt.encodeWord(s),(r.comment?s+" ":"")+this._formatListUrl(r.url).replace(/^<[^:]+\/{,2}/,"")}let a=r.comment||"";return Xt.isPlainText(a)||(a=Xt.encodeWord(a)),this._formatListUrl(r.url)+(r.comment?" ("+a+")":"")}return""}).filter(r=>r).join(", ")}))}))}_formatListUrl(e){return e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e)?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}};var y_=w_;const E_=Et,Al=Pe,__=Gp,b_=WE,Sl=m_,T_=v_,A_=Xi,S_=Ve,ra=lt,C_=y_,I_=Ji,N_=Ul,O_=Le;class R_ extends E_{constructor(e,i,n){super(),this.options=i||{},this._defaults=n||{},this._defaultPlugins={compile:[(...r)=>this._convertDataImages(...r)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new Sl(this.options.dkim):!1,this.transporter=e,this.transporter.mailer=this,this.logger=Al.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on=="function"&&(this.transporter.on("log",r=>{this.logger.debug({tnx:"transport"},"%s: %s",r.type,r.message)}),this.transporter.on("error",r=>{this.logger.error({err:r,tnx:"transport"},"Transport Error: %s",r.message),this.emit("error",r)}),this.transporter.on("idle",(...r)=>{this.emit("idle",...r)})),["close","isIdle","verify"].forEach(r=>{this[r]=(...a)=>typeof this.transporter[r]=="function"?(r==="verify"&&typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[r](...a)):(this.logger.warn({tnx:"transport",methodName:r},"Non existing method %s called for transport",r),!1)}),this.options.proxy&&typeof this.options.proxy=="string"&&this.setupProxy(this.options.proxy)}use(e,i){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(i):this._userPlugins[e]=[i],this}sendMail(e,i=null){let n;i||(n=new Promise((a,s)=>{i=Al.callbackPromise(a,s)})),typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let r=new C_(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",r,a=>{if(a)return this.logger.error({err:a,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",a.message),i(a);r.message=new b_(r.data).compile(),r.setMailerHeader(),r.setPriorityHeaders(),r.setListHeaders(),this._processPlugins("stream",r,s=>{if(s)return this.logger.error({err:s,tnx:"plugin",action:"stream"},"PluginStream Error: %s",s.message),i(s);(r.data.dkim||this.dkim)&&r.message.processFunc(o=>{let l=r.data.dkim?new Sl(r.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:r.message.messageId(),dkimDomains:l.keys.map(d=>d.keySelector+"."+d.domainName).join(", ")},"Signing outgoing message with %s keys",l.keys.length),l.sign(o,r.data._dkim)}),this.transporter.send(r,(...o)=>{o[0]&&this.logger.error({err:o[0],tnx:"transport",action:"send"},"Send Error: %s",o[0].message),i(...o)})})}),n}getVersionString(){return A_.format("%s (%s; +%s; %s/%s)",ra.name,ra.version,ra.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,i,n){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return n();let r=this._userPlugins[e]||[],a=this._defaultPlugins[e]||[];if(r.length&&this.logger.debug({tnx:"transaction",pluginCount:r.length,step:e},"Using %s plugins for %s",r.length,e),r.length+a.length===0)return n();let s=0,o="default",l=()=>{let d=o==="default"?a:r;if(s>=d.length)if(o==="default"&&r.length)o="user",s=0,d=r;else return n();let u=d[s++];u(i,p=>{if(p)return n(p);l()})};l()}setupProxy(e){let i=S_.parse(e);this.getSocket=(n,r)=>{let a=i.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+a))return this.meta.get("proxy_handler_"+a)(i,n,r);switch(a){case"http":case"https":T_(i.href,n.port,n.host,(s,o)=>s?r(s):r(null,{connection:o}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return r(new Error("Socks module not loaded"));let s=o=>{let l=!!this.meta.get("proxy_socks_module").SocksClient,d=l?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),u=Number(i.protocol.replace(/\D/g,""))||5,p={proxy:{ipaddress:o,port:Number(i.port),type:u},[l?"destination":"target"]:{host:n.host,port:n.port},command:"connect"};if(i.auth){let c=decodeURIComponent(i.auth.split(":").shift()),h=decodeURIComponent(i.auth.split(":").pop());l?(p.proxy.userId=c,p.proxy.password=h):u===4?p.userid=c:p.authentication={username:c,password:h}}d.createConnection(p,(c,h)=>c?r(c):r(null,{connection:h.socket||h}))};return I_.isIP(i.hostname)?s(i.hostname):N_.resolve(i.hostname,(o,l)=>{if(o)return r(o);s(Array.isArray(l)?l[0]:l)})}}r(new Error("Unknown proxy configuration"))}}_convertDataImages(e,i){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return i();e.resolveContent(e.data,"html",(n,r)=>{if(n)return i(n);let a=0;r=(r||"").toString().replace(/(<img\b[^>]* src\s*=[\s"']*)(data:([^;]+);[^"'>\s]+)/gi,(s,o,l,d)=>{let u=O_.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:l,cid:u,filename:"image-"+ ++a+"."+__.detectExtension(d)}),o+"cid:"+u}),e.data.html=r,i()})}set(e,i){return this.meta.set(e,i)}get(e){return this.meta.get(e)}}var $_=R_;const P_=me,D_=P_.Transform;let k_=class extends D_{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,i,n){let r=[],a=0,s,o,l=0,d;if(!e||!e.length)return n();for(typeof e=="string"&&(e=Buffer.from(e)),this.inByteCount+=e.length,s=0,o=e.length;s<o;s++)e[s]===46?(s&&e[s-1]===10||!s&&(!this.lastByte||this.lastByte===10))&&(d=e.slice(l,s+1),r.push(d),r.push(Buffer.from(".")),a+=d.length+1,l=s+1):e[s]===10&&(s&&e[s-1]!==13||!s&&this.lastByte!==13)&&(s>l?(d=e.slice(l,s),r.push(d),a+=d.length+2):a+=2,r.push(Buffer.from(`\r
`)),l=s+1);a?(l<e.length&&(d=e.slice(l),r.push(d),a+=d.length),this.outByteCount+=a,this.push(Buffer.concat(r,a))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],n()}_flush(e){let i;this.lastByte===10?i=Buffer.from(`.\r
`):this.lastByte===13?i=Buffer.from(`
.\r
`):i=Buffer.from(`\r
.\r
`),this.outByteCount+=i.length,this.push(i),e()}};var F_=k_;const L_=lt,U_=Et.EventEmitter,M_=Ji,Cl=jl,j_=Ki,Il=Le,H_=F_,B_=me.PassThrough,it=Pe,q_=2*60*1e3,Nl=10*60*1e3,z_=30*1e3,G_=30*1e3;let V_=class extends U_{constructor(e){super(e),this.id=Il.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=e||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure>"u"&&this.port===465&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=it.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(i=>{let n=(i||"").toString().trim().toUpperCase();n&&this.customAuth.set(n,this.options.customAuth[i])}),this.version=L_.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=i=>this._onData(i),this._onSocketError=i=>this._onError(i,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if(typeof e=="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()});const r=this._isDestroyedMessage("connect");if(r)return e(this._formatError(r,"ECONNECTION",!1,"CONN"))}let i={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||G_};this.options.localAddress&&(i.localAddress=this.options.localAddress);let n=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||q_),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(r=>{if(r){this._onError(new Error("Error initiating TLS - "+(r.message||r)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}else return this.options.socket?(this._socket=this.options.socket,it.resolveHostname(i,(r,a)=>{if(r)return setImmediate(()=>this._onError(r,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(r=>{i[r]=this.options.tls[r]}),it.resolveHostname(i,(r,a)=>{if(r)return setImmediate(()=>this._onError(r,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket=Cl.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})):it.resolveHostname(i,(r,a)=>{if(r)return setImmediate(()=>this._onError(r,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket=M_.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),n()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";this.stage==="init"&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let i=this._socket&&this._socket.socket||this._socket;if(i&&!i.destroyed)try{this._socket[e]()}catch{}this._destroy()}login(e,i){const n=this._isDestroyedMessage("login");if(n)return i(this._formatError(n,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials?this._authMethod="XOAUTH2":(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)&&(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()),this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass)this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return i(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let r=this.customAuth.get(this._authMethod),a,s=!1,o=()=>{s||(s=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0))},l=u=>{s||(s=!0,i(this._formatError(u,"EAUTH",a,"AUTH "+this._authMethod)))},d=r({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(u,p)=>{let c;return p||(c=new Promise((h,_)=>{p=it.callbackPromise(h,_)})),this._responseActions.push(h=>{a=h;let _=h.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),A={command:u,response:h};_?(A.status=Number(_[1])||0,_[2]&&(A.code=_[2]),A.text=h.substr(_[0].length)):(A.text=h,A.status=0),p(null,A)}),setImmediate(()=>this._sendCommand(u)),c},resolve:o,reject:l});d&&typeof d.catch=="function"&&d.then(o).catch(l);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,i);return;case"LOGIN":this._responseActions.push(r=>{this._actionAUTH_LOGIN_USER(r,i)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(r=>{this._actionAUTHComplete(r,i)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(r=>{this._actionAUTH_CRAM_MD5(r,i)}),this._sendCommand("AUTH CRAM-MD5");return}return i(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(e,i,n){if(!i)return n(this._formatError("Empty message","EMESSAGE",!1,"API"));const r=this._isDestroyedMessage("send message");if(r)return n(this._formatError(r,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate(()=>{n(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let a=!1,s=function(){a||(a=!0,n(...arguments))};typeof i.on=="function"&&i.on("error",l=>s(this._formatError(l,"ESTREAM",!1,"API")));let o=Date.now();this._setEnvelope(e,(l,d)=>{if(l)return s(l);let u=Date.now(),p=this._createSendStream((c,h)=>c?s(c):(d.envelopeTime=u-o,d.messageTime=Date.now()-u,d.messageSize=p.outByteCount,d.response=h,s(null,d)));typeof i.pipe=="function"?i.pipe(p):(p.write(i),p.end())})}reset(e){this._sendCommand("RSET"),this._responseActions.push(i=>i.charAt(0)!=="2"?e(this._formatError("Could not reset session state. response="+i,"EPROTOCOL",i,"RSET")):(this._envelope=!1,e(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Nl),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||z_),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(e){if(this._destroyed||!e||!e.length)return;let i=(e||"").toString("binary"),n=(this._remainder+i).split(/\r?\n/),r;this._remainder=n.pop();for(let a=0,s=n.length;a<s;a++){if(this._responseQueue.length&&(r=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(r.split(`
`).pop()))){this._responseQueue[this._responseQueue.length-1]+=`
`+n[a];continue}this._responseQueue.push(n[a])}this._responseQueue.length&&(r=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(r.split(`
`).pop()))||this._processResponse()}_onError(e,i,n,r){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),!this._destroyed&&(e=this._formatError(e,i,n,r),this.logger.error(n,e.message),this.emit("error",e),this.close())}_formatError(e,i,n,r){let a;/Error\]$/i.test(Object.prototype.toString.call(e))?a=e:a=new Error(e),i&&i!=="Error"&&(a.code=i),n&&(a.response=n,a.message+=": "+n);let s=typeof n=="string"&&Number((n.match(/^\d+/)||[])[0])||!1;return s&&(a.responseCode=s),r&&(a.command=r),a}_onClose(){let e=!1;if(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",e,"CONN");if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");if(/^[45]\d{2}\b/.test(e))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let i=this._socket,n={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(r=>{n[r]=this.options.tls[r]}),this.upgrading=!0;try{this._socket=Cl.connect(n,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),i.removeListener("close",this._onSocketClose),i.removeListener("end",this._onSocketEnd),e(null,!0)))}catch(r){return e(r)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Nl),this._socket.on("timeout",this._onSocketTimeout),i.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split(`
`).pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate(()=>this._processResponse());let i=this._responseActions.shift();if(typeof i=="function")i.call(this,e),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",e,"CONN")}_sendCommand(e,i){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(i||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+`\r
`,"utf-8"))}}_setEnvelope(e,i){let n=[],r=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(a=>(a&&a.address||a||"").toString().trim()),!this._envelope.to.length)return i(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return i(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(r=!0);for(let a=0,s=this._envelope.to.length;a<s;a++){if(!this._envelope.to[a]||/[\r\n<>]/.test(this._envelope.to[a]))return i(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[a]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[a])&&(r=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(a){return i(this._formatError("Invalid DSN "+a.message,"EENVELOPE",!1,"API"))}this._responseActions.push(a=>{this._actionMAIL(a,i)}),r&&this._supportedExtensions.includes("SMTPUTF8")&&(n.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(n.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&n.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&n.push("RET="+it.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&n.push("ENVID="+it.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(n.length?" "+n.join(" "):""))}_setDsnEnvelope(e){let i=(e.ret||e.return||"").toString().toUpperCase()||null;if(i)switch(i){case"HDRS":case"HEADERS":i="HDRS";break;case"FULL":case"BODY":i="FULL";break}if(i&&!["FULL","HDRS"].includes(i))throw new Error("ret: "+JSON.stringify(i));let n=(e.envid||e.id||"").toString()||null,r=e.notify||null;if(r){typeof r=="string"&&(r=r.split(",")),r=r.map(l=>l.trim().toUpperCase());let s=["NEVER","SUCCESS","FAILURE","DELAY"];if(r.filter(l=>!s.includes(l)).length||r.length>1&&r.includes("NEVER"))throw new Error("notify: "+JSON.stringify(r.join(",")));r=r.join(",")}let a=(e.recipient||e.orcpt||"").toString()||null;return a&&a.indexOf(";")<0&&(a="rfc822;"+a),{ret:i,envid:n,notify:r,orcpt:a}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+it.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+it.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let i=new H_,n;return this.options.lmtp?this._envelope.accepted.forEach((r,a)=>{let s=a===this._envelope.accepted.length-1;this._responseActions.push(o=>{this._actionLMTPStream(r,s,o,e)})}):this._responseActions.push(r=>{this._actionSMTPStream(r,e)}),i.pipe(this._socket,{end:!1}),this.options.debug&&(n=new B_,n.on("readable",()=>{let r;for(;r=n.read();)this.logger.debug({tnx:"message"},r.toString("binary").replace(/\r?\n$/,""))}),i.pipe(n)),i.once("end",()=>{this.logger.info({tnx:"message",inByteCount:i.inByteCount,outByteCount:i.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",i.outByteCount,i.inByteCount)}),i}_actionGreeting(e){if(clearTimeout(this._greetingTimeout),e.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO");return}this._actionEHLO(e)}_actionEHLO(e){let i;if(e.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO");return}if(e.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=e.split(/\r?\n/).map(n=>n.replace(/^\d+[ -]/,"").trim()).filter(n=>n).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(i=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(i[1])||0),this.emit("connect")}_actionHELO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(e){if(e.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");return}this._upgradeConnection((i,n)=>{if(i){this._onError(new Error("Error initiating TLS - "+(i.message||i)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),n?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(e,i){if(!/^334[ -]/.test(e)){i(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"));return}this._responseActions.push(n=>{this._actionAUTH_LOGIN_PASS(n,i)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(e,i){let n=e.match(/^334\s+(.+)$/),r="";if(n)r=n[1];else return i(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));let a=Buffer.from(r,"base64").toString("ascii"),s=Il.createHmac("md5",this._auth.credentials.pass);s.update(a);let o=this._auth.credentials.user+" "+s.digest("hex");this._responseActions.push(l=>{this._actionAUTH_CRAM_MD5_PASS(l,i)}),this._sendCommand(Buffer.from(o).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,i){if(!e.match(/^235\s+/))return i(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0)}_actionAUTH_LOGIN_PASS(e,i){if(!/^334[ -]/.test(e))return i(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(n=>{this._actionAUTHComplete(n,i)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,i,n){if(!n&&typeof i=="function"&&(n=i,i=!1),e.substr(0,3)==="334"){this._responseActions.push(r=>{i||this._authMethod!=="XOAUTH2"?this._actionAUTHComplete(r,!0,n):setImmediate(()=>this._handleXOauth2Token(!0,n))}),this._sendCommand("");return}if(e.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),n(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,n(null,!0)}_actionMAIL(e,i){let n,r;if(Number(e.charAt(0))!==2)return this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?n="Internationalized mailbox name not allowed":n="Mail command failed",i(this._formatError(n,"EENVELOPE",e,"MAIL FROM"));if(this._envelope.rcptQueue.length)if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)r=this._envelope.rcptQueue.shift(),this._recipientQueue.push(r),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+r+">"+this._getDsnRcptToArgs());else r=this._envelope.rcptQueue.shift(),this._recipientQueue.push(r),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+r+">"+this._getDsnRcptToArgs());else return i(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"))}_actionRCPT(e,i){let n,r,a=this._recipientQueue.shift();if(Number(e.charAt(0))!==2?(this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(a)?n="Internationalized mailbox name not allowed":n="Recipient command failed",this._envelope.rejected.push(a),r=this._formatError(n,"EENVELOPE",e,"RCPT TO"),r.recipient=a,this._envelope.rejectedErrors.push(r)):this._envelope.accepted.push(a),!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push(s=>{this._actionDATA(s,i)}),this._sendCommand("DATA");else return r=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO"),r.rejected=this._envelope.rejected,r.rejectedErrors=this._envelope.rejectedErrors,i(r);else this._envelope.rcptQueue.length&&(a=this._envelope.rcptQueue.shift(),this._recipientQueue.push(a),this._responseActions.push(s=>{this._actionRCPT(s,i)}),this._sendCommand("RCPT TO:<"+a+">"+this._getDsnRcptToArgs()))}_actionDATA(e,i){if(!/^[23]/.test(e))return i(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let n={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(n.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(n.rejectedErrors=this._envelope.rejectedErrors),i(null,n)}_actionSMTPStream(e,i){return Number(e.charAt(0))!==2?i(this._formatError("Message failed","EMESSAGE",e,"DATA")):i(null,e)}_actionLMTPStream(e,i,n,r){let a;if(Number(n.charAt(0))!==2){a=this._formatError("Message failed for recipient "+e,"EMESSAGE",n,"DATA"),a.recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(a);for(let s=0,o=this._envelope.accepted.length;s<o;s++)this._envelope.accepted[s]===e&&this._envelope.accepted.splice(s,1)}if(i)return r(null,n)}_handleXOauth2Token(e,i){this._auth.oauth2.getToken(e,(n,r)=>{if(n)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),i(this._formatError(n,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(a=>{this._actionAUTHComplete(a,e,i)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(r),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=j_.hostname()||""}catch{e="localhost"}return(!e||e.indexOf(".")<0)&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}};var es=V_;const W_=me.Stream,Y_=Ja,X_=Le,K_=Pe;let Q_=class extends W_{constructor(e,i){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let n=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=n||5*60}if(this.logger=K_.getLogger({logger:i},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback=="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let n=Math.max(Number(this.options.timeout)||0,0);this.expires=n&&Date.now()+n*1e3||0}}getToken(e,i){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return i(null,this.accessToken);let n=(...r)=>{r[0]?this.logger.error({err:r[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),i(...r)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,(r,a,s)=>{!r&&a&&(this.accessToken=a,this.expires=s||0),n(r,a)}):this.generateToken(n)}updateToken(e,i){this.accessToken=e,i=Math.max(Number(i)||0,0),this.expires=i&&Date.now()+i*1e3||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let i,n;if(this.options.serviceClient){let r=Math.floor(Date.now()/1e3),a={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:r,exp:r+this.options.serviceRequestTimeout},s;try{s=this.jwtSignRS256(a)}catch{return e(new Error("Can't generate token. Check your auth options"))}i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:s},n={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:a}}else{if(!this.options.refreshToken)return e(new Error("Can't create new access token for user"));i={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},n={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(r=>{i[r]=this.options.customParams[r],n[r]=this.options.customParams[r]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(n)),this.postRequest(this.options.accessUrl,i,this.options,(r,a)=>{let s;if(r)return e(r);try{s=JSON.parse(a.toString())}catch(l){return e(l)}if(!s||typeof s!="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(a||"").toString()),e(new Error("Invalid authentication response"));let o={};if(Object.keys(s).forEach(l=>{l!=="access_token"?o[l]=s[l]:o[l]=(s[l]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(o)),s.error){let l=s.error;return s.error_description&&(l+=": "+s.error_description),s.error_uri&&(l+=" ("+s.error_uri+")"),e(new Error(l))}return s.access_token?(this.updateToken(s.access_token,s.expires_in),e(null,this.accessToken)):e(new Error("No access token"))})}buildXOAuth2Token(e){let i=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(i.join(""),"utf-8").toString("base64")}postRequest(e,i,n,r){let a=!1,s=[],o=0,l=Y_(e,{method:"post",headers:n.customHeaders,body:i,allowErrorResponse:!0});l.on("readable",()=>{let d;for(;(d=l.read())!==null;)s.push(d),o+=d.length}),l.once("error",d=>{if(!a)return a=!0,r(d)}),l.once("end",()=>{if(!a)return a=!0,r(null,Buffer.concat(s,o))})}toBase64URL(e){return typeof e=="string"&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map(n=>this.toBase64URL(n)).join(".");let i=X_.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(i)}};var iu=Q_;const J_=es,Z_=Pe.assign,eb=iu,tb=Et;let ib=class extends tb{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let i=new eb(this.options.auth,this.logger);i.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||i.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:i,method:"XOAUTH2"},i.on("token",n=>this.pool.mailer.emit("token",n)),i.on("error",n=>this.emit("error",n));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(e){this.pool.getSocket(this.options,(i,n)=>{if(i)return e(i);let r=!1,a=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,a.host||"",a.port||""),a=Z_(!1,a),Object.keys(n).forEach(s=>{a[s]=n[s]})),this.connection=new J_(a),this.connection.once("error",s=>{if(this.emit("error",s),!r)return r=!0,e(s)}),this.connection.once("end",()=>{if(this.close(),r)return;r=!0;let s=setTimeout(()=>{if(r)return;let o=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(o.code="ETLS"),e(o)},1e3);try{s.unref()}catch{}}),this.connection.connect(()=>{if(!r)if(this.auth&&(this.connection.allowsAuth||a.forceAuth))this.connection.login(this.auth,s=>{if(!r){if(r=!0,s)return this.connection.close(),this.emit("error",s),e(s);this._connected=!0,e(null,!0)}});else return r=!0,this._connected=!0,e(null,!0)})})}send(e,i){if(!this._connected)return this.connect(s=>s?i(s):this.send(e,i));let n=e.message.getEnvelope(),r=e.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r,cid:this.id},"Sending message %s using #%s to <%s>",r,this.id,a.join(", ")),e.data.dsn&&(n.dsn=e.data.dsn),this.connection.send(n,e.message.createReadStream(),(s,o)=>{if(this.messages++,s)return this.connection.close(),this.emit("error",s),i(s);o.envelope={from:n.from,to:n.to},o.messageId=r,setImmediate(()=>{let l;this.messages>=this.options.maxMessages?(l=new Error("Resource exhausted"),l.code="EMAXLIMIT",this.connection.close(),this.emit("error",l)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),i(null,o)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}};var nb=ib;const rb={domains:["aol.com"],host:"smtp.aol.com",port:587},ab={host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},sb={host:"debugmail.io",port:25},ob={aliases:["Dynect"],host:"smtp.dynect.net",port:25},lb={aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},cb={domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},pb={aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},ub={aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},db={host:"smtpout.secureserver.net",port:25},hb={host:"smtp.asia.secureserver.net",port:25},fb={host:"smtp.europe.secureserver.net",port:25},mb={aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},gb={aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},vb={host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},xb={port:1025,ignoreTLS:!0},wb={host:"smtp.mailgun.org",port:465,secure:!0},yb={host:"in.mailjet.com",port:587},Eb={host:"mailosaur.io",port:25},_b={host:"smtp.mailtrap.io",port:2525},bb={host:"smtp.mandrillapp.com",port:587},Tb={host:"smtp.naver.com",port:587},Ab={host:"send.one.com",port:465,secure:!0},Sb={aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Cb={host:"smtp.office365.com",port:587,secure:!1},Ib={host:"smtp.ohmysmtp.com",port:587,secure:!1},Nb={aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Ob={domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},Rb={aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},$b={host:"smtp.sendcloud.net",port:2525},Pb={host:"smtp.sendgrid.net",port:587},Db={host:"smtp-relay.sendinblue.com",port:587},kb={host:"smtp-pulse.com",port:465,secure:!0},Fb={host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},Lb={aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Ub={host:"smtp.tipimail.com",port:587},Mb={domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},jb={domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Hb={host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},Bb={126:{host:"smtp.126.com",port:465,secure:!0},163:{host:"smtp.163.com",port:465,secure:!0},"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},AOL:rb,Bluewin:ab,DebugMail:sb,DynectEmail:ob,Ethereal:lb,FastMail:cb,"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},GandiMail:pb,Gmail:ub,Godaddy:db,GodaddyAsia:hb,GodaddyEurope:fb,"hot.ee":{host:"mail.hot.ee"},Hotmail:mb,iCloud:gb,Infomaniak:vb,"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},Maildev:xb,Mailgun:wb,Mailjet:yb,Mailosaur:Eb,Mailtrap:_b,Mandrill:bb,Naver:Tb,One:Ab,OpenMailBox:Sb,Outlook365:Cb,OhMySMTP:Ib,Postmark:Nb,"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:Ob,QQex:Rb,SendCloud:$b,SendGrid:Pb,SendinBlue:Db,SendPulse:kb,SES:Fb,"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},Sparkpost:Lb,Tipimail:Ub,Yahoo:Mb,Yandex:jb,Zoho:Hb},Ol=Bb,Pn={};Object.keys(Ol).forEach(t=>{let e=Ol[t];Pn[Dn(t)]=aa(e),[].concat(e.aliases||[]).forEach(i=>{Pn[Dn(i)]=aa(e)}),[].concat(e.domains||[]).forEach(i=>{Pn[Dn(i)]=aa(e)})});function Dn(t){return t.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function aa(t){let e=["domains","aliases"],i={};return Object.keys(t).forEach(n=>{e.indexOf(n)<0&&(i[n]=t[n])}),i}var nu=function(t){return t=Dn(t.split("@").pop()),Pn[t]||!1};const qb=Et,Rl=nb,$l=es,zb=nu,$i=Pe,Gb=lt;let Vb=class extends qb{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let i,n=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(i=$i.parseConnectionUrl(e.url),n=n||i.service),this.options=$i.assign(!1,e,i,n&&zb(n)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=$i.getLogger(this.options,{component:this.options.component||"smtp-pool"});let r=new $l(this.options);this.name="SMTP (pool)",this.version=Gb.version+"[client:"+r.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(e,i){return setImmediate(()=>i(null,!1))}send(e,i){return this._closed?!1:(this._queue.push({mail:e,requeueAttempts:0,callback:i}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let e,i=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!i&&!this._queue.length)return;for(let r=i-1;r>=0;r--)this._connections[r]&&this._connections[r].available&&(e=this._connections[r],e.close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(i&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let n=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let r=this._queue.shift();if(r&&typeof r.callback=="function")try{r.callback(new Error("Connection pool was closed"))}catch(a){this.logger.error({err:a,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,a.message)}setImmediate(n)};setImmediate(n)}_processMessages(){let e,i,n;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(i=0,n=this._connections.length;i<n;i++)if(this._connections[i].available){e=this._connections[i];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let r=e.queueEntry=this._queue.shift();r.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:r.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",r.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(r.mail,(a,s)=>{if(r===e.queueEntry){try{r.callback(a,s)}catch(o){this.logger.error({err:o,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,o.message)}e.queueEntry=!1}})}_createConnection(){let e=new Rl(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()}),e.once("error",i=>{if(i.code!=="EMAXLIMIT"?this.logger.error({err:i,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,i.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(i)}catch(n){this.logger.error({err:n,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,n.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()}),e.once("close",()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout(()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return this.options.maxRequeues===void 0||this.options.maxRequeues<0?!0:e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(i){this.logger.error({err:i,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,i.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(e){let i=this._connections.indexOf(e);i!==-1&&this._connections.splice(i,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let i=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return e();if(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=i-this._rateLimit.delta)return this._clearRateLimit();this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(i-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=i)}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let e=this._rateLimit.waiting.shift();setImmediate(e)}}isIdle(){return this.idling}verify(e){let i;e||(i=new Promise((r,a)=>{e=$i.callbackPromise(r,a)}));let n=new Rl(this).auth;return this.getSocket(this.options,(r,a)=>{if(r)return e(r);let s=this.options;a&&a.connection&&(this.logger.info({tnx:"proxy",remoteAddress:a.connection.remoteAddress,remotePort:a.connection.remotePort,destHost:s.host||"",destPort:s.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",a.connection.remoteAddress,a.connection.remotePort,s.host||"",s.port||""),s=$i.assign(!1,s),Object.keys(a).forEach(u=>{s[u]=a[u]}));let o=new $l(s),l=!1;o.once("error",u=>{if(!l)return l=!0,o.close(),e(u)}),o.once("end",()=>{if(!l)return l=!0,e(new Error("Connection closed"))});let d=()=>{if(!l)return l=!0,o.quit(),e(null,!0)};o.connect(()=>{if(!l)if(n&&(o.allowsAuth||s.forceAuth))o.login(n,u=>{if(!l){if(u)return l=!0,o.close(),e(u);d()}});else if(!n&&o.allowsAuth&&s.forceAuth){let u=new Error("Authentication info was not provided");return u.code="NoAuth",l=!0,o.close(),e(u)}else d()})}),i}};var Wb=Vb;const Yb=Et,sa=es,Xb=nu,Kt=Pe,Kb=iu,Qb=lt;let Jb=class extends Yb{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let i,n=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(i=Kt.parseConnectionUrl(e.url),n=n||i.service),this.options=Kt.assign(!1,e,i,n&&Xb(n)),this.logger=Kt.getLogger(this.options,{component:this.options.component||"smtp-transport"});let r=new sa(this.options);this.name="SMTP",this.version=Qb.version+"[client:"+r.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,i){return setImmediate(()=>i(null,!1))}getAuth(e){if(!e)return this.auth;let i=!1,n={};if(this.options.auth&&typeof this.options.auth=="object"&&Object.keys(this.options.auth).forEach(r=>{i=!0,n[r]=this.options.auth[r]}),e&&typeof e=="object"&&Object.keys(e).forEach(r=>{i=!0,n[r]=e[r]}),!i)return!1;switch((n.type||"").toString().toUpperCase()){case"OAUTH2":{if(!n.service&&!n.user)return!1;let r=new Kb(n,this.logger);return r.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||r.provisionCallback,r.on("token",a=>this.mailer.emit("token",a)),r.on("error",a=>this.emit("error",a)),{type:"OAUTH2",user:n.user,oauth2:r,method:"XOAUTH2"}}default:return{type:(n.type||"").toString().toUpperCase()||"LOGIN",user:n.user,credentials:{user:n.user||"",pass:n.pass,options:n.options},method:(n.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(e,i){this.getSocket(this.options,(n,r)=>{if(n)return i(n);let a=!1,s=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:s.host||"",destPort:s.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,s.host||"",s.port||""),s=Kt.assign(!1,s),Object.keys(r).forEach(d=>{s[d]=r[d]}));let o=new sa(s);o.once("error",d=>{if(!a)return a=!0,o.close(),i(d)}),o.once("end",()=>{if(a)return;let d=setTimeout(()=>{if(a)return;a=!0;let u=new Error("Unexpected socket close");o&&o._socket&&o._socket.upgrading&&(u.code="ETLS"),i(u)},1e3);try{d.unref()}catch{}});let l=()=>{let d=e.message.getEnvelope(),u=e.message.messageId(),p=[].concat(d.to||[]);p.length>3&&p.push("...and "+p.splice(2).length+" more"),e.data.dsn&&(d.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:u},"Sending message %s to <%s>",u,p.join(", ")),o.send(d,e.message.createReadStream(),(c,h)=>{if(a=!0,o.close(),c)return this.logger.error({err:c,tnx:"send"},"Send error for %s: %s",u,c.message),i(c);h.envelope={from:d.from,to:d.to},h.messageId=u;try{return i(null,h)}catch(_){this.logger.error({err:_,tnx:"callback"},"Callback error for %s: %s",u,_.message)}})};o.connect(()=>{if(a)return;let d=this.getAuth(e.data.auth);d&&(o.allowsAuth||s.forceAuth)?o.login(d,u=>{if(d&&d!==this.auth&&d.oauth2&&d.oauth2.removeAllListeners(),!a){if(u)return a=!0,o.close(),i(u);l()}}):l()})})}verify(e){let i;return e||(i=new Promise((n,r)=>{e=Kt.callbackPromise(n,r)})),this.getSocket(this.options,(n,r)=>{if(n)return e(n);let a=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,a.host||"",a.port||""),a=Kt.assign(!1,a),Object.keys(r).forEach(d=>{a[d]=r[d]}));let s=new sa(a),o=!1;s.once("error",d=>{if(!o)return o=!0,s.close(),e(d)}),s.once("end",()=>{if(!o)return o=!0,e(new Error("Connection closed"))});let l=()=>{if(!o)return o=!0,s.quit(),e(null,!0)};s.connect(()=>{if(o)return;let d=this.getAuth({});if(d&&(s.allowsAuth||a.forceAuth))s.login(d,u=>{if(!o){if(u)return o=!0,s.close(),e(u);l()}});else if(!d&&s.allowsAuth&&a.forceAuth){let u=new Error("Authentication info was not provided");return u.code="NoAuth",o=!0,s.close(),e(u)}else l()})}),i}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}};var Zb=Jb;const eT=Qi.spawn,tT=lt,iT=Pe;let nT=class{constructor(e){e=e||{},this._spawn=eT,this.options=e||{},this.name="Sendmail",this.version=tT.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=iT.getLogger(this.options,{component:this.options.component||"sendmail"}),e&&(typeof e=="string"?this.path=e:typeof e=="object"&&(e.path&&(this.path=e.path),Array.isArray(e.args)&&(this.args=e.args),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())))}send(e,i){e.message.keepBcc=!0;let n=e.data.envelope||e.message.getEnvelope(),r=e.message.messageId(),a,s,o;if([].concat(n.from||[]).concat(n.to||[]).some(u=>/^-/.test(u)))return i(new Error("Can not send mail. Invalid envelope addresses."));this.args?a=["-i"].concat(this.args).concat(n.to):a=["-i"].concat(n.from?["-f",n.from]:[]).concat(n.to);let d=u=>{if(!o&&(o=!0,typeof i=="function"))return u?i(u):i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:r,response:"Messages queued for delivery"})};try{s=this._spawn(this.path,a)}catch(u){return this.logger.error({err:u,tnx:"spawn",messageId:r},"Error occurred while spawning sendmail. %s",u.message),d(u)}if(s){s.on("error",c=>{this.logger.error({err:c,tnx:"spawn",messageId:r},"Error occurred when sending message %s. %s",r,c.message),d(c)}),s.once("exit",c=>{if(!c)return d();let h;c===127?h=new Error("Sendmail command not found, process exited with code "+c):h=new Error("Sendmail exited with code "+c),this.logger.error({err:h,tnx:"stdin",messageId:r},"Error sending message %s to sendmail. %s",r,h.message),d(h)}),s.once("close",d),s.stdin.on("error",c=>{this.logger.error({err:c,tnx:"stdin",messageId:r},"Error occurred when piping message %s to sendmail. %s",r,c.message),d(c)});let u=[].concat(n.to||[]);u.length>3&&u.push("...and "+u.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r},"Sending message %s to <%s>",r,u.join(", "));let p=e.message.createReadStream();p.once("error",c=>{this.logger.error({err:c,tnx:"stdin",messageId:r},"Error occurred when generating message %s. %s",r,c.message),s.kill("SIGINT"),d(c)}),p.pipe(s.stdin)}else return d(new Error("sendmail was not found"))}};var rT=nT;const aT=lt,sT=Pe;let oT=class{constructor(e){e=e||{},this.options=e||{},this.name="StreamTransport",this.version=aT.version,this.logger=sT.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())}send(e,i){e.message.keepBcc=!0;let n=e.data.envelope||e.message.getEnvelope(),r=e.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r},"Sending message %s to <%s> using %s line breaks",r,a.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let s;try{s=e.message.createReadStream()}catch(d){return this.logger.error({err:d,tnx:"send",messageId:r},"Creating send stream failed for %s. %s",r,d.message),i(d)}if(!this.options.buffer)return s.once("error",d=>{this.logger.error({err:d,tnx:"send",messageId:r},"Failed creating message for %s. %s",r,d.message)}),i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:r,message:s});let o=[],l=0;s.on("readable",()=>{let d;for(;(d=s.read())!==null;)o.push(d),l+=d.length}),s.once("error",d=>(this.logger.error({err:d,tnx:"send",messageId:r},"Failed creating message for %s. %s",r,d.message),i(d))),s.on("end",()=>i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:r,message:Buffer.concat(o,l)}))})}};var lT=oT;const cT=lt,pT=Pe;let uT=class{constructor(e){e=e||{},this.options=e||{},this.name="JSONTransport",this.version=cT.version,this.logger=pT.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,i){e.message.keepBcc=!0;let n=e.data.envelope||e.message.getEnvelope(),r=e.message.messageId(),a=[].concat(n.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r},"Composing JSON structure of %s to <%s>",r,a.join(", ")),setImmediate(()=>{e.normalize((s,o)=>s?(this.logger.error({err:s,tnx:"send",messageId:r},"Failed building JSON structure for %s. %s",r,s.message),i(s)):(delete o.envelope,delete o.normalizedHeaders,i(null,{envelope:n,messageId:r,message:this.options.skipEncoding?o:JSON.stringify(o)})))})}};var dT=uT;const hT=Et,fT=lt,Pl=Pe,mT=Kp;let gT=class extends hT{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=fT.version,this.logger=Pl.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(e,i){if(this.connections>=this.maxConnections)return this.idling=!1,this.pending.push({mail:e,callback:i});if(!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:e,callback:i});this._send(e,(...n)=>{setImmediate(()=>i(...n)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let e=this.pending.shift();this._send(e.mail,(...i)=>{setImmediate(()=>e.callback(...i)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),i=!1;for(let r=this.rateMessages.length-1;r>=0;r--)this.rateMessages[r].ts>=e-this.rateInterval&&(!i||this.rateMessages[r].ts<i)&&(i=this.rateMessages[r].ts),this.rateMessages[r].ts<e-this.rateInterval&&!this.rateMessages[r].pending&&this.rateMessages.splice(r,1);if(this.rateMessages.length<this.sendingRate)return!0;let n=Math.max(i+1001,e+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),e-n);try{this.sendingRateTTL.unref()}catch{}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,i){let n={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(n);let r=e.data.envelope||e.message.getEnvelope(),a=e.message.messageId(),s=[].concat(r.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a},"Sending message %s to <%s>",a,s.join(", "));let o=l=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&typeof e.data._dkim.skipFields=="string"?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let d=e.message.createReadStream(),u=d.pipe(new mT),p=[],c=0;u.on("readable",()=>{let h;for(;(h=u.read())!==null;)p.push(h),c+=h.length}),d.once("error",h=>u.emit("error",h)),u.once("error",h=>{l(h)}),u.once("end",()=>l(null,Buffer.concat(p,c)))};setImmediate(()=>o((l,d)=>{if(l)return this.logger.error({err:l,tnx:"send",messageId:a},"Failed creating message for %s. %s",a,l.message),n.pending=!1,i(l);let u={RawMessage:{Data:d},Source:r.from,Destinations:r.to};Object.keys(e.data.ses||{}).forEach(_=>{u[_]=e.data.ses[_]});let p=(this.ses.aws?this.ses.ses:this.ses)||{},c=this.ses.aws||{};(_=>p.config&&typeof p.config.region=="function"?p.config.region().then(A=>_(null,A)).catch(A=>_(A)):_(null,p.config&&p.config.region||"us-east-1"))((_,A)=>{(_||!A)&&(A="us-east-1");let w;typeof p.send=="function"&&c.SendRawEmailCommand?w=p.send(new c.SendRawEmailCommand(u)):w=p.sendRawEmail(u).promise(),w.then(E=>{A==="us-east-1"&&(A="email"),n.pending=!1,i(null,{envelope:{from:r.from,to:r.to},messageId:"<"+E.MessageId+(/@/.test(E.MessageId)?"":"@"+A+".amazonses.com")+">",response:E.MessageId,raw:d})}).catch(E=>{this.logger.error({err:E,tnx:"send"},"Send error for %s: %s",a,E.message),n.pending=!1,i(E)})})}))}verify(e){let i,n=(this.ses.aws?this.ses.ses:this.ses)||{},r=this.ses.aws||{};const a={RawMessage:{Data:`From: invalid@invalid\r
To: invalid@invalid\r
 Subject: Invalid\r
\r
Invalid`},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(i=new Promise((o,l)=>{e=Pl.callbackPromise(o,l)}));const s=o=>o&&(o.code||o.Code)!=="InvalidParameterValue"?e(o):e(null,!0);return typeof n.send=="function"&&r.SendRawEmailCommand?(a.RawMessage.Data=Buffer.from(a.RawMessage.Data),n.send(new r.SendRawEmailCommand(a),s)):n.sendRawEmail(a,s),i}};var vT=gT;const xT=$_,wT=Pe,yT=Wb,ET=Zb,_T=rT,bT=lT,TT=dT,AT=vT;(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,"");(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,"");["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase());var ST=function(t,e){let i,n,r;return(typeof t=="object"&&typeof t.send!="function"||typeof t=="string"&&/^(smtps?|direct):/i.test(t))&&((i=typeof t=="string"?t:t.url)?n=wT.parseConnectionUrl(i):n=t,n.pool?t=new yT(n):n.sendmail?t=new _T(n):n.streamTransport?t=new bT(n):n.jsonTransport?t=new TT(n):n.SES?t=new AT(n):t=new ET(n)),r=new xT(t,n,e),r};const{VITE_SMTP_HOST:ru,VITE_SMTP_PORT:au,VITE_SMTP_USERNAME:ts,VITE_SMTP_PASSWORD:su,VITE_SMTP_SENDER_NAME:ou,VITE_SMTP_RECIPIENT:lu}={VITE_DEV_SERVER_URL:"http://localhost:5173/",BASE_URL:"/",MODE:"development",DEV:!0,PROD:!1,SSR:!1},Dl=Object.entries({VITE_SMTP_HOST:ru,VITE_SMTP_PORT:au,VITE_SMTP_USERNAME:ts,VITE_SMTP_PASSWORD:su,VITE_SMTP_SENDER_NAME:ou,VITE_SMTP_RECIPIENT:lu}).reduce((t,[e,i])=>(i===void 0&&t.push(e),t),[]),CT=ST({host:ru,port:Number(au)||0,auth:{user:ts,pass:su}}),IT=async(t,e)=>{if(Dl.length>0)return{ok:!1,error:`Missing values: ${Dl.join(", ")}`};const i={from:`<${ts}> ${ou}`,to:lu,html:e,subject:t};try{return await CT.sendMail(i),{ok:!0}}catch(n){return{ok:!1,error:JSON.stringify(n)}}},NT=()=>{ze.ipcMain.handle("send-mail",(t,e,i)=>IT(e,i))},OT=oa.join(__dirname,"../dist"),{VITE_DEV_SERVER_URL:kl}=process.env,Qt=Gy(process.argv.slice(process.argv.indexOf("--")+1),{default:{width:1920,height:1080,kiosk:!0,relaunch:!1,update:!0},alias:{width:"w",height:"h"}});function RT(){const t=new ze.BrowserWindow({kiosk:Qt.kiosk,fullscreen:Qt.kiosk,width:Qt.width,height:Qt.height,autoHideMenuBar:!0,webPreferences:{devTools:!0,preload:oa.join(__dirname,"preload.js")}});if(kl?t.loadURL(kl):t.loadFile(oa.join(OT,"index.html")),Ii.autoUpdater.autoDownload=!0,Ii.autoUpdater.autoInstallOnAppQuit=!1,Qt.update){const e=Qt.relaunch;Ii.autoUpdater.on("update-downloaded",()=>Ii.autoUpdater.quitAndInstall(!0,e))}Ii.autoUpdater.checkForUpdates()}ze.app.on("window-all-closed",()=>{process.platform!=="darwin"&&ze.app.quit()});ze.app.whenReady().then(()=>{NT(),RT()});
